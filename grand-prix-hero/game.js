!function(e){"use strict";var t,s={},i=function(){return zs.__string_rec(this,"")},n=n||{};function r(e,t){var s=Object.create(e);for(var i in t)s[i]=t[i];return t.toString!==Object.prototype.toString&&(s.toString=t.toString),s}var a=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};s.EReg=a,a.__name__="EReg",a.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&e>=0&&e<this.r.m.length)return this.r.m[e];throw ys.thrown("EReg::matched")},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},__class__:a};var _=function(){};s.HxOverrides=_,_.__name__="HxOverrides",_.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),s=new Date;return s.setTime(0),s.setUTCHours(t[0]),s.setUTCMinutes(t[1]),s.setUTCSeconds(t[2]),s;case 10:t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var i=(t=e.split(" "))[0].split("-"),n=t[1].split(":");return new Date(i[0],i[1]-1,i[2],n[0],n[1],n[2]);default:throw ys.thrown("Invalid date format : "+e)}},_.cca=function(e,t){var s=e.charCodeAt(t);if(s==s)return s},_.substr=function(e,t,s){if(null==s)s=e.length;else if(s<0){if(0!=t)return"";s=e.length+s}return e.substr(t,s)},_.remove=function(e,t){var s=e.indexOf(t);return-1!=s&&(e.splice(s,1),!0)},_.now=function(){return Date.now()};var o=function(){};s.Lambda=o,o.__name__="Lambda",o.has=function(e,t){for(var s=_i(e);s.hasNext();){if(s.next()==t)return!0}return!1},o.exists=function(e,t){for(var s=_i(e);s.hasNext();){if(t(s.next()))return!0}return!1},Math.__name__="Math";var h=function(){};s.Reflect=h,h.__name__="Reflect",h.field=function(e,t){try{return e[t]}catch(e){return null}},h.getProperty=function(e,t){var s;return null==e?null:!!e.__properties__&&(s=e.__properties__["get_"+t])?e[s]():e[t]},h.setProperty=function(e,t,s){var i;!!e.__properties__&&(i=e.__properties__["set_"+t])?e[i](s):e[t]=s},h.fields=function(e){var t=[];if(null!=e){var s=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&s.call(e,i)&&t.push(i)}return t},h.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},h.compareMethods=function(e,t){return e==t||!(!h.isFunction(e)||!h.isFunction(t))&&(e.scope==t.scope&&e.method==t.method&&null!=e.method)},h.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};var l=function(){};s.Std=l,l.__name__="Std",l.string=function(e){return zs.__string_rec(e,"")},l.parseInt=function(e){if(null!=e)for(var t=0,s=e.length;t<s;){var i=t++,n=e.charCodeAt(i);if(n<=8||n>=14&&32!=n&&45!=n){var r=e.charCodeAt(i+1),a=parseInt(e,120==r||88==r?16:10);return isNaN(a)?null:a}}return null},l.random=function(e){return e<=0?0:Math.floor(Math.random()*e)};var c=function(){this.b=""};s.StringBuf=c,c.__name__="StringBuf",c.prototype={__class__:c};var u=function(){};s.StringTools=u,u.__name__="StringTools",u.htmlEscape=function(e,t){for(var s="",i=0,n=e;i<n.length;){var r=i++,a=(e=n).charCodeAt(r);a>=55296&&a<=56319&&(a=a-55232<<10|1023&e.charCodeAt(r+1));a>=65536&&++i;var _=a;switch(_){case 34:s+=t?"&quot;":String.fromCodePoint(_);break;case 38:s+="&amp;";break;case 39:s+=t?"&#039;":String.fromCodePoint(_);break;case 60:s+="&lt;";break;case 62:s+="&gt;";break;default:s+=String.fromCodePoint(_)}}return s},u.isSpace=function(e,t){var s=_.cca(e,t);return s>8&&s<14||32==s},u.ltrim=function(e){for(var t=e.length,s=0;s<t&&u.isSpace(e,s);)++s;return s>0?_.substr(e,s,t-s):e},u.rtrim=function(e){for(var t=e.length,s=0;s<t&&u.isSpace(e,t-s-1);)++s;return s>0?_.substr(e,0,t-s):e},u.trim=function(e){return u.ltrim(u.rtrim(e))},u.replace=function(e,t,s){return e.split(t).join(s)},u.hex=function(e,t){for(var s="";s="0123456789ABCDEF".charAt(15&e)+s,(e>>>=4)>0;);if(null!=t)for(;s.length<t;)s="0"+s;return s};var d=n.ValueType={__ename__:"ValueType",__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"],TNull:{_hx_index:0,__enum__:"ValueType",toString:i},TInt:{_hx_index:1,__enum__:"ValueType",toString:i},TFloat:{_hx_index:2,__enum__:"ValueType",toString:i},TBool:{_hx_index:3,__enum__:"ValueType",toString:i},TObject:{_hx_index:4,__enum__:"ValueType",toString:i},TFunction:{_hx_index:5,__enum__:"ValueType",toString:i},TClass:(t=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:i}},t.__params__=["c"],t),TEnum:(t=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:i}},t.__params__=["e"],t),TUnknown:{_hx_index:8,__enum__:"ValueType",toString:i}},p=function(){};s.Type=p,p.__name__="Type",p.getEnum=function(e){return null==e?null:n[e.__enum__]},p.createEnum=function(e,t,s){var i=h.field(e,t);if(null==i)throw ys.thrown("No such constructor "+t);if(h.isFunction(i)){if(null==s)throw ys.thrown("Constructor "+t+" need parameters");return i.apply(e,s)}if(null!=s&&0!=s.length)throw ys.thrown("Constructor "+t+" does not need parameters");return i},p.createEnumIndex=function(e,t,s){var i=e.__constructs__[t];if(null==i)throw ys.thrown(t+" is not a valid enum constructor index");return p.createEnum(e,i,s)},p.typeof=function(e){switch(typeof e){case"boolean":return d.TBool;case"function":return e.__name__||e.__ename__?d.TObject:d.TFunction;case"number":return Math.ceil(e)==e%2147483648?d.TInt:d.TFloat;case"object":if(null==e)return d.TNull;var t=e.__enum__;if(null!=t)return d.TEnum(n[t]);var s=zs.getClass(e);return null!=s?d.TClass(s):d.TObject;case"string":return d.TClass(String);case"undefined":return d.TNull;default:return d.TUnknown}},p.enumEq=function(e,t){if(e==t)return!0;try{var s=e.__enum__;if(null==s||s!=t.__enum__)return!1;if(e._hx_index!=t._hx_index)return!1;for(var i=n[s],r=i[i.__constructs__[e._hx_index]].__params__,a=0;a<r.length;){var _=r[a];if(++a,!p.enumEq(e[_],t[_]))return!1}}catch(a){return!1}return!0},p.enumParameters=function(e){var t=n[e.__enum__],s=t[t.__constructs__[e._hx_index]].__params__;if(null!=s){for(var i=[],r=0;r<s.length;){var a=s[r];++r,i.push(e[a])}return i}return[]};var g={toString:function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}}},f=function(e){this.nodeType=e,this.children=[],this.attributeMap=new Bs};s.Xml=f,f.__name__="Xml",f.parse=function(e){return Hs.parse(e)},f.createElement=function(e){var t=new f(f.Element);if(t.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeName=e,t},f.createPCData=function(e){var t=new f(f.PCData);if(t.nodeType==f.Document||t.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeValue=e,t},f.createCData=function(e){var t=new f(f.CData);if(t.nodeType==f.Document||t.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeValue=e,t},f.createComment=function(e){var t=new f(f.Comment);if(t.nodeType==f.Document||t.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeValue=e,t},f.createDocType=function(e){var t=new f(f.DocType);if(t.nodeType==f.Document||t.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeValue=e,t},f.createProcessingInstruction=function(e){var t=new f(f.ProcessingInstruction);if(t.nodeType==f.Document||t.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":g.toString(t.nodeType)));return t.nodeValue=e,t},f.createDocument=function(){return new f(f.Document)},f.prototype={get:function(e){if(this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,t){if(this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));this.attributeMap.h[e]=t},exists:function(e){if(this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));return Bs.keysIterator(this.attributeMap.h)},elements:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));for(var e=[],t=0,s=this.children;t<s.length;){var i=s[t];++t,i.nodeType==f.Element&&e.push(i)}return new Fs(e)},firstElement:function(){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));for(var e=0,t=this.children;e<t.length;){var s=t[e];if(++e,s.nodeType==f.Element)return s}return null},addChild:function(e){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=f.Document&&this.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":g.toString(this.nodeType)));return!!_.remove(this.children,e)&&(e.parent=null,!0)},toString:function(){return Vs.print(this)},__class__:f};var y=function(){};s["awe6.interfaces.IPauseable"]=y,y.__name__="awe6.interfaces.IPauseable",y.__isInterface__=!0,y.prototype={__class__:y};var m=function(){};s["awe6.interfaces.IDisposable"]=m,m.__name__="awe6.interfaces.IDisposable",m.__isInterface__=!0,m.prototype={__class__:m};var w=function(){};s["awe6.interfaces.IUpdateable"]=w,w.__name__="awe6.interfaces.IUpdateable",w.__isInterface__=!0,w.prototype={__class__:w};var v=function(){};s["awe6.interfaces.IProcess"]=v,v.__name__="awe6.interfaces.IProcess",v.__isInterface__=!0,v.__interfaces__=[y,m,w];var E=function(e){this._kernel=e,this._tools=this._kernel.tools,this._isEntity=zs.__implements(this,C),this._init()};s["awe6.core.Process"]=E,E.__name__="awe6.core.Process",E.__interfaces__=[v],E.prototype={_init:function(){this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this.isDisposed=!1,this._age=0,this._updates=0},dispose:function(){this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer())},_disposer:function(){},getAge:function(e){return null==e&&(e=!0),e?this._age:this._updates},update:function(e){null==e&&(e=0),this.isActive&&!this.isDisposed&&(this._age+=e,this._updates++,this._updater(e))},_updater:function(e){null==e&&(e=0)},set_isActive:function(e){return this.isDisposed?(this.isActive=!1,!1):(e!=this.isActive&&(this._isIsActiveSetterBypassed?this.isActive=e:e?this.isActive||this.isDisposed||(this._resumer(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this._isEntity&&this._kernel.messenger.sendMessage(tt.RESUME,this,!0,!0,!0)):this.isActive&&!this.isDisposed&&(this._pauser(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!1),this._isEntity&&this._kernel.messenger.sendMessage(tt.PAUSE,this,!0,!0,!0))),this._isIsActiveSetterBypassed=!1,this.isActive)},pause:function(){this.isActive&&!this.isDisposed&&(this._pauser(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!1),this._isEntity&&this._kernel.messenger.sendMessage(tt.PAUSE,this,!0,!0,!0))},_pauser:function(){},resume:function(){this.isActive||this.isDisposed||(this._resumer(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this._isEntity&&this._kernel.messenger.sendMessage(tt.RESUME,this,!0,!0,!0))},_resumer:function(){},__class__:E,__properties__:{set_isActive:"set_isActive"}};var x=function(){};s["awe6.interfaces.IAgendaManager"]=x,x.__name__="awe6.interfaces.IAgendaManager",x.__isInterface__=!0,x.prototype={__class__:x};var b=function(){};s["awe6.interfaces.IEntityCollection"]=b,b.__name__="awe6.interfaces.IEntityCollection",b.__isInterface__=!0,b.__interfaces__=[x],b.prototype={__class__:b};var S=function(){};s["awe6.interfaces.IViewable"]=S,S.__name__="awe6.interfaces.IViewable",S.__isInterface__=!0,S.prototype={__class__:S,__properties__:{get_view:"get_view"}};var C=function(){};s["awe6.interfaces.IEntity"]=C,C.__name__="awe6.interfaces.IEntity",C.__isInterface__=!0,C.__interfaces__=[b,S,v],C.prototype={__class__:C,__properties__:{get_parent:"get_parent"}};var k=function(e,t,s){null==this.get_view()&&(this.view=new ze(e,s,0,this)),this.set_id(null==t?e.tools.createGuid():t),E.call(this,e)};s["awe6.core.Entity"]=k,k.__name__="awe6.core.Entity",k.__interfaces__=[C],k.__super__=E,k.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.agenda=Qe.ALWAYS,this._entityAgendaPairs=new Rs,this._isAgendaDirty=!0,this._cachedEntities=[]},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e),this._isAgendaDirty&&(this._cachedEntities=this._getEntities(this.get_agenda()),p.enumEq(this.get_agenda(),Qe.ALWAYS)||(this._cachedEntities=this._cachedEntities.concat(this._getEntities(Qe.ALWAYS))),this._isAgendaDirty=!1);for(var t=0,s=this._cachedEntities;t<s.length;){var i=s[t];++t,i.update(e)}},_disposer:function(){this.remove(),this._kernel.messenger.removeSubscribers(this),this._kernel.messenger.removeSubscribers(null,null,null,this,null);var e=this._getEntities();e.reverse();for(var t=0;t<e.length;){var s=e[t];++t,s.dispose()}for(s=this._entityAgendaPairs.iterator();s.hasNext();){var i=s.next();this._entityAgendaPairs.remove(i)}this.get_view().dispose(),E.prototype._disposer.call(this)},addEntity:function(e,t,s,i){if(null==i&&(i=0),null==s&&(s=!1),this.isDisposed||null==e)return null;null==t&&(t=Qe.ALWAYS);for(var n=this._entityAgendaPairs.iterator();n.hasNext();){var r=n.next();if(r.entity==e&&p.enumEq(r.agenda,t))return e}(this._isAgendaDirty=!0,e.get_parent()!=this)&&(e.remove(s),e instanceof k&&e._setParent(this));var a=new N(e,t),_=this._entityAgendaPairs;return _.head=new Is(a,_.head),s&&(p.enumEq(t,this.get_agenda())||t==Qe.ALWAYS?this.get_view().addChild(e.get_view(),i):(e.get_view().set_priority(i),a.isAddedToView=!0)),e},removeEntity:function(e,t,s){if(null==s&&(s=!1),!this.isDisposed&&null!=e){for(var i=!1,n=this._entityAgendaPairs.iterator();n.hasNext();){var r=n.next();r.entity!=e||null!=t&&!p.enumEq(r.agenda,t)||(this._entityAgendaPairs.remove(r),i=!0)}if(i){if(this._isAgendaDirty=!0,e instanceof k)e._setParent(null);s&&e.get_view().remove()}}},remove:function(e){null==e&&(e=!1),null!=this.get_parent()&&this.get_parent().removeEntity(this,null,e)},getEntities:function(e){return this._getEntities(e)},_getEntities:function(e){if(!this._isAgendaDirty&&(null==e||p.enumEq(e,this.get_agenda())))return this._cachedEntities;for(var t=[],s=this._entityAgendaPairs.iterator();s.hasNext();){var i=s.next();(null==e||p.enumEq(e,i.agenda))&&t.push(i.entity)}return t.reverse(),t},getEntitiesByClass:function(e,t,s,i,n){if(null==n&&(n=!1),null==i&&(i=!1),null==s&&(s=!1),n&&null!=this._kernel.scenes.get_scene())return this._kernel.scenes.get_scene().getEntitiesByClass(e,t,!0);for(var r=[],a=this._getEntities(t),_=0;_<a.length;){var o=a[_];++_,zs.__instanceof(o,e)&&r.push(o),s&&(r=r.concat(o.getEntitiesByClass(e,t,!0)))}return i&&null!=this.get_parent()&&(r=r.concat(this.get_parent().getEntitiesByClass(e,t,!1,!0))),r},setAgenda:function(e){if(null==e&&(e=Qe.ALWAYS),p.enumEq(this.get_agenda(),e))return!1;this._isAgendaDirty=!0;for(var t=this._entityAgendaPairs.iterator();t.hasNext();){var s=t.next(),i=p.enumEq(this.get_agenda(),s.agenda)&&s.entity.get_view().get_parent()==this.get_view();i&&s.entity.get_view().remove(),s.isAddedToView=s.isAddedToView||i}this.agenda=e;for(t=this._entityAgendaPairs.iterator();t.hasNext();){(s=t.next()).isAddedToView&&(p.enumEq(Qe.ALWAYS,s.agenda)||p.enumEq(this.get_agenda(),s.agenda))&&this.get_view().addChild(s.entity.get_view())}return!0},_setParent:function(e){this.parent=e},set_id:function(e){return this.id=e,this.id},get_agenda:function(){return this.agenda},get_parent:function(){return this.parent},get_view:function(){return this.view},__class__:k,__properties__:r(E.prototype.__properties__,{get_view:"get_view",get_parent:"get_parent",get_agenda:"get_agenda",set_id:"set_id"})});var T=function(){};s["awe6.interfaces.IPositionable"]=T,T.__name__="awe6.interfaces.IPositionable",T.__isInterface__=!0,T.prototype={__class__:T,__properties__:{set_y:"set_y",set_x:"set_x"}};var A=function(e,t,s,i,n,r,a,_,o,h,l){null==a&&(a=0),null==r&&(r=0),null==n&&(n=20),null==i&&(i=100),this._stateUp=new I(e,t),this._stateOver=new I(e,s),this.x=r,this.y=a,this.set_width(i),this.set_height(n),this._keyType=_,this.onClickCallback=o,this.onRollOverCallback=h,this.onRollOutCallback=l,k.call(this,e)};s["awe6.core.BasicButton"]=A,A.__name__="awe6.core.BasicButton",A.__interfaces__=[T],A.__super__=k,A.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this),this.get_view().set_x(this.x),this.get_view().set_y(this.y),this.isOver=!1,this.addEntity(this._stateUp,Qe.SUB_TYPE(R.UP),!0),this.addEntity(this._stateOver,Qe.SUB_TYPE(R.OVER),!0),this.setAgenda(Qe.SUB_TYPE(R.UP))},_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e);var t=this._kernel.inputs.mouse,s=this._isPointInsideRectangle(t.x+this.get_view().x-this.get_view().globalX,t.y+this.get_view().y-this.get_view().globalY,this.x,this.y,this.width,this.height);s&&t.set_cursorType(it.BUTTON),s&&!this.isOver&&this.onRollOver(),!s&&this.isOver&&(t.set_cursorType(it.AUTO),this.onRollOut()),this.isOver=s,this.isOver&&t.getIsButtonDown()&&this.setAgenda(Qe.SUB_TYPE(R.OVER)),this.isOver&&t.getIsButtonRelease()&&this.onClick(),null!=this._keyType&&this._kernel.inputs.keyboard.getIsKeyRelease(this._keyType)&&this.onClick()},_isPointInsideRectangle:function(e,t,s,i,n,r){return!(e<s)&&(!(t<i)&&(!(e>s+n)&&!(t>i+r)))},onClick:function(){this.setAgenda(Qe.SUB_TYPE(R.UP)),null!=this.onClickCallback&&this.onClickCallback()},onRollOver:function(){this.setAgenda(Qe.SUB_TYPE(R.OVER)),null!=this.onRollOverCallback&&this.onRollOverCallback()},onRollOut:function(){this.setAgenda(Qe.SUB_TYPE(R.UP)),null!=this.onRollOutCallback&&this.onRollOutCallback()},setPosition:function(e,t){this.set_x(e),this.set_y(t)},set_x:function(e){return this.x=e,null!=this.get_view()&&this.get_view().set_x(this.x),this.x},set_y:function(e){return this.y=e,null!=this.get_view()&&this.get_view().set_y(this.y),this.y},set_width:function(e){return this.width=e,this.width},set_height:function(e){return this.height=e,this.height},__class__:A,__properties__:r(k.prototype.__properties__,{set_height:"set_height",set_width:"set_width",set_y:"set_y",set_x:"set_x"})});var I=function(e,t){k.call(this,e),this.view=t};s["awe6.core._BasicButton._HelperState"]=I,I.__name__="awe6.core._BasicButton._HelperState",I.__super__=k,I.prototype=r(k.prototype,{__class__:I});var R=n["awe6.core._BasicButton._HelperEState"]={__ename__:"awe6.core._BasicButton._HelperEState",__constructs__:["UP","OVER"],UP:{_hx_index:0,__enum__:"awe6.core._BasicButton._HelperEState",toString:i},OVER:{_hx_index:1,__enum__:"awe6.core._BasicButton._HelperEState",toString:i}},D=function(){};s["awe6.interfaces.IEncrypter"]=D,D.__name__="awe6.interfaces.IEncrypter",D.__isInterface__=!0,D.prototype={__class__:D};var P=function(e){this._defaultSecret=e};s["awe6.core.Encrypter"]=P,P.__name__="awe6.core.Encrypter",P.__interfaces__=[D],P.prototype={decrypt:function(e,t){null==t&&(t="");var s=""!=t?t:this._defaultSecret;return this._xor(e,s)},_xor:function(e,t){for(var s=new Cs(new ArrayBuffer(e.length)),i=0,n=0,r=s.length;n<r;){var a=n++;s.b[a]=e.b[a]^_.cca(t,i),++i>=t.length&&(i=0)}return s},__class__:P};var N=function(e,t){this.entity=e,this.agenda=t,this.isAddedToView=!1};s["awe6.core._Entity._HelperEntityAgendaPair"]=N,N.__name__="awe6.core._Entity._HelperEntityAgendaPair",N.prototype={__class__:N};var O=function(){};s["awe6.interfaces.IInputJoypad"]=O,O.__name__="awe6.interfaces.IInputJoypad",O.__isInterface__=!0,O.prototype={__class__:O};var B=function(e,t,s,i,n,r,a,_,o,h,l,c,u,d){this._kernel=e,this._keyUp=null!=t?t:et.UP,this._keyRight=null!=s?s:et.RIGHT,this._keyDown=null!=i?i:et.DOWN,this._keyLeft=null!=n?n:et.LEFT,this._keyPrimary=null!=r?r:et.SPACE,this._keySecondary=null!=a?a:et.Z,this._keyUpAlt=null!=_?_:et.W,this._keyRightAlt=null!=o?o:et.D,this._keyDownAlt=null!=h?h:et.S,this._keyLeftAlt=null!=l?l:et.A,this._keyPrimaryAlt=null!=c?c:et.Q,this._keySecondaryAlt=null!=u?u:et.E,this._joypadTouchType=null!=d?d:this._kernel.factory.joypadTouchType,this._isTouchEnabled=this._kernel.factory.joypadTouchType!=$e.DISABLED,this._joypadStateCache={age:0,isFire:!1,isUp:!1,isRight:!1,isDown:!1,isLeft:!1,isPrevFire:!1,isPrevUp:!1,isPrevRight:!1,isPrevDown:!1,isPrevLeft:!1}};s["awe6.core.InputJoypad"]=B,B.__name__="awe6.core.InputJoypad",B.__interfaces__=[O],B.prototype={_checkKeyboard:function(e,t){switch(e._hx_index){case 0:return!!this._checkKeyboard(qe.PRIMARY,t)||this._checkKeyboard(qe.SECONDARY,t);case 1:return!!t(this._keyUp)||t(this._keyUpAlt);case 2:return!!t(this._keyRight)||t(this._keyRightAlt);case 3:return!!t(this._keyDown)||t(this._keyDownAlt);case 4:return!!t(this._keyLeft)||t(this._keyLeftAlt);case 5:return!!t(this._keyPrimary)||t(this._keyPrimaryAlt);case 6:return!!t(this._keySecondary)||t(this._keySecondaryAlt)}},getIsButtonDown:function(e){return!!this._checkKeyboard(e,(t=this._kernel.inputs.keyboard,oi(t,t.getIsKeyDown)))||!!this._isTouchEnabled&&this._checkTouchIsDown(e)},getIsButtonPress:function(e){return!!this._checkKeyboard(e,(t=this._kernel.inputs.keyboard,oi(t,t.getIsKeyPress)))||!!this._isTouchEnabled&&this._checkTouchIsPress(e)},_getTouchButtonPosition:function(e){switch(e._hx_index){case 1:return{x:.5*this._kernel.factory.width,y:.25*this._kernel.factory.height};case 2:return{x:.75*this._kernel.factory.width,y:.5*this._kernel.factory.height};case 3:return{x:.5*this._kernel.factory.width,y:.75*this._kernel.factory.height};case 4:return{x:.25*this._kernel.factory.width,y:.5*this._kernel.factory.height};case 0:case 5:case 6:return{x:.5*this._kernel.factory.width,y:.5*this._kernel.factory.height}}},_getClosestTouchButton:function(e,t){null==e&&(e=this._mouse.x),null==t&&(t=this._mouse.y);var s=99999999,i=qe.FIRE,n=qe.FIRE,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n);n=qe.UP,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n);n=qe.RIGHT,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n);n=qe.DOWN,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n);n=qe.LEFT,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n);var a;n=qe.PRIMARY,r=this._getTouchButtonPosition(n);return(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<s&&(s=a,i=n),i},_getTouchState:function(){var e;if(null!=this._mouse?e=!0:this._kernel.inputs.mouse instanceof Be?(this._mouse=zs.__cast(this._kernel.inputs.mouse,Be),e=!0):e=!1,!e||this._mouse.getAge()==this._joypadStateCache.age)return this._joypadStateCache;var t={age:this._mouse.getAge(),isFire:!1,isUp:!1,isRight:!1,isDown:!1,isLeft:!1,isPrevFire:this._joypadStateCache.isFire,isPrevUp:this._joypadStateCache.isUp,isPrevRight:this._joypadStateCache.isRight,isPrevDown:this._joypadStateCache.isDown,isPrevLeft:this._joypadStateCache.isLeft},s=this._joypadTouchType;switch(s._hx_index){case 1:var i=this._getClosestTouchButton();t.isFire=i==qe.FIRE&&this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,this._mouse.getIsButtonDown()&&(t.isUp=i==qe.UP,t.isRight=i==qe.RIGHT,t.isDown=i==qe.DOWN,t.isLeft=i==qe.LEFT);break;case 2:var n=s.distance;null==n&&(n=20),t.isFire=this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,t.isUp=this._mouse.getButtonDragHeight()<-n,t.isRight=this._mouse.getButtonDragWidth()>n,t.isDown=this._mouse.getButtonDragHeight()>n,t.isLeft=this._mouse.getButtonDragWidth()<-n;break;case 3:var r=s.speed;if(t.isFire=this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,this._kernel.inputs.mouse.getIsButtonDown()){null==r&&(r=100);var a=this._mouse.getDeltaX(),_=this._mouse.getDeltaY();t.isUp=_<-r,t.isRight=a>r,t.isDown=_>r,t.isLeft=a<-r}}return this._joypadStateCache=t,this._joypadStateCache},_checkTouchIsDown:function(e){var t=this._getTouchState();switch(e._hx_index){case 1:return t.isUp;case 2:return t.isRight;case 3:return t.isDown;case 4:return t.isLeft;case 0:case 5:case 6:return t.isFire}},_checkTouchIsPress:function(e){var t=this._getTouchState();switch(e._hx_index){case 1:return!!t.isUp&&!t.isPrevUp;case 2:return!!t.isRight&&!t.isPrevRight;case 3:return!!t.isDown&&!t.isPrevDown;case 4:return!!t.isLeft&&!t.isPrevLeft;case 0:case 5:case 6:return!!t.isFire&&!t.isPrevFire}},__class__:B};var M=function(){};s["awe6.interfaces.IResettable"]=M,M.__name__="awe6.interfaces.IResettable",M.__isInterface__=!0,M.prototype={__class__:M};var U=function(){};s["awe6.interfaces.IInputManager"]=U,U.__name__="awe6.interfaces.IInputManager",U.__isInterface__=!0,U.__interfaces__=[M],U.prototype={__class__:U};var L=function(e){E.call(this,e)};s["awe6.core.InputManager"]=L,L.__name__="awe6.core.InputManager",L.__interfaces__=[U],L.__super__=E,L.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.joypad=this.createJoypad(),this.keyboard=this._inputKeyboard=new Oe(this._kernel),this.mouse=this._inputMouse=new Be(this._kernel)},_updater:function(e){var t,s;null==e&&(e=0),E.prototype._updater.call(this,e),null==(s=e)&&(s=0),(t=this._inputKeyboard).isActive&&!t.isDisposed&&(t._age+=s,t._updates++,t._updater(s)),null==(s=e)&&(s=0),(t=this._inputMouse).isActive&&!t.isDisposed&&(t._age+=s,t._updates++,t._updater(s))},_disposer:function(){var e;(e=this._inputKeyboard).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),(e=this._inputMouse).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),E.prototype._disposer.call(this)},createJoypad:function(e,t,s,i,n,r,a,_,o,h,l,c,u){return new B(this._kernel,e,t,s,i,n,r,a,_,o,h,l,c,u)},reset:function(){var e;return(e=this._inputKeyboard).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),(e=this._inputMouse).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),this._init(),!0},__class__:L});var F=function(){};s["awe6.interfaces.IMessageManager"]=F,F.__name__="awe6.interfaces.IMessageManager",F.__isInterface__=!0,F.__interfaces__=[M],F.prototype={__class__:F};var Y=function(e){E.call(this,e)};s["awe6.core.MessageManager"]=Y,Y.__name__="awe6.core.MessageManager",Y.__interfaces__=[F],Y.__super__=E,Y.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this._isVerbose=!1,this._subscriptions=new Rs,this._messageQueue=new Ps},addSubscriber:function(e,t,s,i,n,r){null==r&&(r=!1);var a=new H(e,t,s,i,n,r),_=this._subscriptions;_.head=new Is(a,_.head)},removeSubscribers:function(e,t,s,i,n){for(var r=this._getSubscriptions(e,t,s,i,n,!0).iterator();r.hasNext();){var a=r.next();this._subscriptions.remove(a),this._isVerbose&&ms.trace("Removing "+l.string(a.sender)+":"+l.string(a.message),{fileName:"awe6/core/MessageManager.hx",lineNumber:80,className:"awe6.core.MessageManager",methodName:"removeSubscribers"})}},sendMessage:function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!1),null==s&&(s=!1),this._sendMessage(e,t,t,s,i,n)},reset:function(){return this.removeSubscribers(),this._messageQueue=new Ps,!0},_updater:function(e){if(null==e&&(e=0),E.prototype._updater.call(this,e),this._isOkToSendMessage())for(var t=this._messageQueue.h;null!=t;){var s=t.item;t=t.next;var i=s;this._sendMessage(i.message,i.sender,i.target,i.isBubbleDown,i.isBubbleUp,i.isBubbleEverywhere),this._messageQueue.remove(i)}},_isOkToSendMessage:function(){return null!=this._kernel.scenes.get_scene()},_sendMessage:function(e,t,s,i,n,r){if(null==r&&(r=!1),null==n&&(n=!1),null==i&&(i=!1),this._isVerbose&&ms.trace("Sending message: "+l.string(e)+" from "+t.id+"("+l.string(zs.getClass(t))+") via "+s.id+" ("+l.string(zs.getClass(s))+")",{fileName:"awe6/core/MessageManager.hx",lineNumber:119,className:"awe6.core.MessageManager",methodName:"_sendMessage"}),this._isOkToSendMessage()){if(r){var a=this._kernel.scenes.get_scene().getEntities()[0];if(null!=a&&null!=a.get_parent())return void this._sendMessage(e,t,this._kernel.scenes.get_scene().getEntities()[0].get_parent(),!0)}for(var _=this._getSubscriptions(s,e,null,t).iterator();_.hasNext();){var o=_.next();if(!this._send(o,e,t))return}if(i)for(var h=s.getEntities(),c=0;c<h.length;){var u=h[c];++c,this._sendMessage(e,t,u,!0)}n&&null!=s.get_parent()&&zs.__implements(s.get_parent(),C)&&this._sendMessage(e,t,s.get_parent(),!1,!0)}else this._messageQueue.push(new V(e,t,s,i,n,r))},_send:function(e,t,s){var i=e.handler.apply(e.subscriber,[t,s]);return e.isRemovedAfterFirstSend&&this._subscriptions.remove(e),i},_getSubscriptions:function(e,t,s,i,r,a){null==a&&(a=!1);for(var _=new Rs,o=this._subscriptions.iterator();o.hasNext();){var l=o.next();if(null==e||e==l.subscriber||e==l.sender){if(null!=t&&!zs.__instanceof(t,l.messageClass)){var c=p.typeof(t);if(7==c._hx_index){var u;c.e;if(p.getEnum(t)==p.getEnum(l.message)){var d=l.message;u=n[t.__enum__].__constructs__[t._hx_index]!=n[d.__enum__].__constructs__[d._hx_index]}else u=!0;if(u||p.enumParameters(t).toString()!=p.enumParameters(l.message).toString())continue}else if(t!=l.message)continue}if(null==s||h.compareMethods(l.handler,s)){if(null!=i){if(a){if(null!=l.senderClassType)continue;if(null==l.sender)continue}if(null!=l.senderClassType&&!zs.__instanceof(i,l.senderClassType))continue;if(null!=l.sender&&l.sender!=i)continue}_.head=new Is(l,_.head)}}}return _},__class__:Y});var H=function(e,t,s,i,n,r){null==r&&(r=!1),this.subscriber=e,this.message=t,this.handler=s,this.sender=i,this.senderClassType=n,this.isRemovedAfterFirstSend=r,this.messageClass=zs.getClass(t)};s["awe6.core._MessageManager._HelperSubscription"]=H,H.__name__="awe6.core._MessageManager._HelperSubscription",H.prototype={__class__:H};var V=function(e,t,s,i,n,r){null==r&&(r=!1),null==n&&(n=!1),null==i&&(i=!1),this.message=e,this.sender=t,this.target=s,this.isBubbleDown=i,this.isBubbleUp=n,this.isBubbleEverywhere=r};s["awe6.core._MessageManager._HelperMessage"]=V,V.__name__="awe6.core._MessageManager._HelperMessage",V.prototype={__class__:V};var z=function(){};s["awe6.interfaces.IScene"]=z,z.__name__="awe6.interfaces.IScene",z.__isInterface__=!0,z.__interfaces__=[S,b,v],z.prototype={__class__:z};var j=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),this.type=t,this.isPauseable=s,this.isMuteable=i,this.isSessionSavedOnNext=n,E.call(this,e)};s["awe6.core.Scene"]=j,j.__name__="awe6.core.Scene",j.__interfaces__=[z],j.__super__=E,j.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.isDisposable=!0,this._entity=new k(this._kernel),this.view=this._entity.get_view()},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e),this._entity.update(e)},_disposer:function(){this._entity.dispose(),this.get_view().dispose(),E.prototype._disposer.call(this)},addEntity:function(e,t,s,i){return null==i&&(i=0),null==s&&(s=!1),this._entity.addEntity(e,t,s,i)},removeEntity:function(e,t,s){null==s&&(s=!1),this._entity.removeEntity(e,t,s)},getEntities:function(e){return this._entity.getEntities(e)},getEntitiesByClass:function(e,t,s,i,n){return null==n&&(n=!1),null==i&&(i=!1),null==s&&(s=!1),this._entity.getEntitiesByClass(e,t,s,i,!1)},get_view:function(){return this.view},setAgenda:function(e){return this._entity.setAgenda(e)},__class__:j,__properties__:r(E.prototype.__properties__,{get_view:"get_view"})});var G=function(){};s["awe6.interfaces.ISceneManager"]=G,G.__name__="awe6.interfaces.ISceneManager",G.__isInterface__=!0,G.prototype={__class__:G,__properties__:{get_scene:"get_scene"}};var K=function(e){E.call(this,e)};s["awe6.core.SceneManager"]=K,K.__name__="awe6.core.SceneManager",K.__interfaces__=[G],K.__super__=E,K.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.view=new ze(this._kernel)},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e),null!=this.get_scene()&&this.get_scene().update(e),null!=this._sceneTransition&&this._sceneTransition.update(e)},_disposer:function(){null!=this.get_scene()&&this.get_scene().dispose(),null!=this._sceneTransition&&this._sceneTransition.dispose(),this.view.dispose(),E.prototype._disposer.call(this)},setScene:function(e){var t=null;if(null!=this.get_scene()){t=this.get_scene().type;var s=this._kernel.factory.createSceneTransition(e,t);null!=this._sceneTransition&&this._sceneTransition.dispose(),this._sceneTransition=s,this._kernel.inputs.reset(),this.get_scene().isDisposable&&(this.get_scene().dispose(),this._kernel.messenger.reset()),this.scene=null}this._kernel.overlay.hideButtons(),this.scene=this._kernel.factory.createScene(e),this._kernel.overlay.showButton(nt.BACK,null!=this._kernel.factory.getBackSceneType(this.get_scene().type)),this._kernel.overlay.showButton(nt.MUTE,this.get_scene().isMuteable&&!this._kernel.audio.isMute),this._kernel.overlay.showButton(nt.UNMUTE,this.get_scene().isMuteable&&this._kernel.audio.isMute),this._kernel.overlay.showButton(nt.PAUSE,this.get_scene().isPauseable&&this._kernel.isActive),this._kernel.overlay.showButton(nt.UNPAUSE,this.get_scene().isPauseable&&!this._kernel.isActive),this.view.addChild(this.get_scene().get_view()),null!=this._sceneTransition&&this.get_scene().get_view().addChild(this._sceneTransition.get_view(),this._tools.BIG_NUMBER+1)},back:function(){var e=this._kernel.factory.getBackSceneType(this.get_scene().type);null!=e&&this.setScene(e)},next:function(){this.get_scene().isSessionSavedOnNext&&null!=this._kernel.get_session()&&this._kernel.get_session().save();var e=this._kernel.factory.getNextSceneType(this.get_scene().type);null!=e&&this.setScene(e)},get_scene:function(){return this.scene},__class__:K,__properties__:r(E.prototype.__properties__,{get_scene:"get_scene"})});var W=function(){};s["awe6.interfaces.ITextStyle"]=W,W.__name__="awe6.interfaces.ITextStyle",W.__isInterface__=!0,W.prototype={__class__:W};var X=function(e,t,s,i,n,r,a,_,o,h){null==o&&(o=0),null==n&&(n=!1),null==i&&(i=!1),this.font=null!=e?e:"_sans",this.size=null!=t?t:12,this.color=null!=s?s:0,this.isBold=i,this.isItalic=n,this.align=null!=r?r:at.LEFT,this.spacingHorizontal=null!=a?a:0,this.spacingVertical=null!=_?_:0,this.thickness=o,this.filters=h};s["awe6.core.TextStyle"]=X,X.__name__="awe6.core.TextStyle",X.__interfaces__=[W],X.prototype={toString:function(){return l.string(this.font+","+this.size+","+this.color+","+l.string(this.isBold)+","+l.string(this.isItalic)+","+l.string(this.align)+","+this.spacingHorizontal+","+this.spacingVertical+","+this.thickness+","+l.string(this.filters))},__class__:X};var Q=function(){};s["awe6.interfaces.ITools"]=Q,Q.__name__="awe6.interfaces.ITools",Q.__isInterface__=!0,Q.__interfaces__=[D],Q.prototype={__class__:Q};var J=function(e){this._kernel=e,this.BIG_NUMBER=9999998,this._encrypter=this._kernel.factory.createEncrypter()};s["awe6.core.Tools"]=J,J.__name__="awe6.core.Tools",J.__interfaces__=[Q],J.prototype={createGuid:function(e,t){return null==t&&(t=""),null==e&&(e=!1),e?t+_.substr(this._randomCharacter()+this._randomCharacter()+this._randomCharacter(),0,10):t+(this._randomCharacter()+this._randomCharacter()+"-")+this._randomCharacter()+"-"+this._randomCharacter()+"-"+this._randomCharacter()+"-"+this._randomCharacter()+this._randomCharacter()+this._randomCharacter()},_randomCharacter:function(){return _.substr(u.hex(0|65536*(1+Math.random()),1),1,null)},sortByPriority:function(e,t){var s=e.get_priority(),i=t.get_priority();return s<i?-1:s>i?1:0},_isCamelCase:function(e){return e.toUpperCase()!=e&&(!(e.indexOf(" ")>-1)&&!(e.indexOf("_")>-1))},_isConstCase:function(e){return e.toUpperCase()==e&&!(e.indexOf(" ")>-1)},fromCamelCase:function(e){if(null==e||""==e)return"";for(var t="",s=e.split(""),i="",n=0;n<s.length;){var r=s[n];++n,r.toLowerCase()!=r&&(t+=i),t+=r,i=" "}return t},toConstCase:function(e){if(null==e||""==e)return"";if(this._isConstCase(e))return e;this._isCamelCase(e)&&(e=this.fromCamelCase(e));return e=u.replace(e,"     "," "),e=u.replace(e,"    "," "),e=u.replace(e,"   "," "),e=u.replace(e,"  "," "),(e=u.replace(e," ","_")).toUpperCase()},limit:function(e,t,s){return e>s?s:e<t?t:e},getRandomType:function(e){return p.createEnumIndex(e,l.random(e.__constructs__.slice().length))},distance:function(e,t,s,i,n){null==n&&(n=!1);var r=s-e,a=i-t,_=r*r+a*a;return n?_:Math.sqrt(_)},shuffle:function(e){for(var t=e.slice(),s=t.length;s>1;){var i=l.random(s),n=t[--s];t[s]=t[i],t[i]=n}return t},serialize:function(e){return vs.run(e)},unserialize:function(e){return bs.run(e)},decrypt:function(e,t){return null==t&&(t=""),this._encrypter.decrypt(e,t)},__class__:J};var Z=function(){};s["awe6.interfaces.IAssetManager"]=Z,Z.__name__="awe6.interfaces.IAssetManager",Z.__isInterface__=!0,Z.prototype={__class__:Z};var q=function(){};s["awe6.interfaces.IAssetManagerProcess"]=q,q.__name__="awe6.interfaces.IAssetManagerProcess",q.__isInterface__=!0,q.__interfaces__=[v,Z];var $=function(e){E.call(this,e)};s["awe6.core.drivers.AAssetManager"]=$,$.__name__="awe6.core.drivers.AAssetManager",$.__interfaces__=[q],$.__super__=E,$.prototype=r(E.prototype,{_init:function(){this._packageId=this._kernel.getConfig("settings.assets.packages.default"),null==this._packageId&&(this._packageId="assets"),E.prototype._init.call(this)},getAsset:function(e,t,s){return null==t&&(t=this._packageId),this._driverGetAsset(e,t,s)},_driverGetAsset:function(e,t,s){return null},__class__:$});var ee=function(){};s["awe6.interfaces.IAudioManager"]=ee,ee.__name__="awe6.interfaces.IAudioManager",ee.__isInterface__=!0,ee.prototype={__class__:ee,__properties__:{set_isMute:"set_isMute"}};var te=function(e){E.call(this,e)};s["awe6.core.drivers.AAudioManager"]=te,te.__name__="awe6.core.drivers.AAudioManager",te.__interfaces__=[ee],te.__super__=E,te.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this._sounds=[],this._packageId=this._kernel.getConfig("settings.assets.packages.audio"),null==this._packageId&&(this._packageId=this._kernel.getConfig("settings.assets.packages.default")),null==this._packageId&&(this._packageId="assets.audio"),this.set_isMute(!1)},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e);for(var t=0,s=this._sounds;t<s.length;){var i=s[t];++t,i.isDisposed&&_.remove(this._sounds,i)}},_disposer:function(){for(var e=0,t=this._sounds;e<t.length;){var s=t[e];++e,s.dispose()}this.set_isMute(!1),E.prototype._disposer.call(this)},start:function(e,t,s,i,n,r,a,_){if((null==a&&(a=!1),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==s&&(s=1),null==t&&(t=Je.DEFAULT),a)&&0!=this._getSounds(e,t).length)return;this._sounds.push(this._driverSoundFactory(e,t,s,i,n,r,_))},_driverSoundFactory:function(e,t,s,i,n,r,a){return null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==s&&(s=1),new se(this._kernel,e,this._packageId,t,s,i,n,r,a)},stop:function(e,t){for(var s=this._getSounds(e,t),i=0;i<s.length;){var n=s[i];++i,n.stop()}},transform:function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=0),null==s&&(s=1);for(var r=this._getSounds(e,t),a=0;a<r.length;){var _=r[a];++a,_.transform(s,i,n)}},set_isMute:function(e){return this.isMute=e,this._driverSetIsMute(e),this.isMute},_driverSetIsMute:function(e){},_getSounds:function(e,t){var s=[];if(null==e&&null==t)s=this._sounds.slice();else if(null==t)for(var i=0,n=this._sounds;i<n.length;){var r=n[i];++i,r.id==e&&s.push(r)}else if(null==e)for(i=0,n=this._sounds;i<n.length;){r=n[i];++i,p.enumEq(r.audioChannelType,t)&&s.push(r)}else for(i=0,n=this._sounds;i<n.length;){r=n[i];++i,r.id==e&&p.enumEq(r.audioChannelType,t)&&s.push(r)}return s},__class__:te,__properties__:r(E.prototype.__properties__,{set_isMute:"set_isMute"})});var se=function(e,t,s,i,n,r,a,_,o){null==_&&(_=0),null==a&&(a=1),null==r&&(r=0),null==n&&(n=1),this._kernel=e,this.isDisposed=!1,this.id=t,this._packageId=s,this.audioChannelType=null!=i?i:Je.DEFAULT,-1==n&&(n=this._kernel.tools.BIG_NUMBER),this._loops=n,this._startTime=r,this._volume=a,this._pan=_,this._onCompleteCallback=o,this._init()};s["awe6.core.drivers._AHelperSound"]=se,se.__name__="awe6.core.drivers._AHelperSound",se.__interfaces__=[m],se.prototype={_init:function(){this._driverInit()},_driverInit:function(){},transform:function(e,t,s){null==s&&(s=!1),null==t&&(t=0),null==e&&(e=1),this.isDisposed||(s?(this._volume=e,this._pan=t):(this._volume=this._kernel.tools.limit(e,0,1),this._pan=this._kernel.tools.limit(t,-1,1)),this._driverTransform(s))},_driverTransform:function(e){null==e&&(e=!1)},stop:function(){this._driverStop(),this.dispose()},_driverStop:function(){},dispose:function(){this.isDisposed||(this.isDisposed=!0,this._driverStop())},__class__:se};var ie=function(){};s["awe6.interfaces.IFactory"]=ie,ie.__name__="awe6.interfaces.IFactory",ie.__isInterface__=!0,ie.prototype={__class__:ie};var ne=function(e,t,s){null==t&&(t=!1),this._context=e,this.isDebug=t,this._config=s,this.config=new Bs;var i=!0;null==i&&(i=!1),i&&(this.id="awe6",this.version="0.0.1",this.author="unknown",this.isDecached=!1,this.isEyeCandyOptionEnabled=!0,this.isFullScreenOptionEnabled=!0,this.isResetSessionsOptionEnabled=!0,this.width=600,this.height=400,this.bgColor=16711680,this.fullScreenType=Ze.SCALE_ASPECT_RATIO_PRESERVE,this.joypadTouchType=$e.DISABLED,this.secret="YouMustOverrideThis",this.targetFramerate=25,this.isFixedUpdates=!0,this.startingSceneType=rt.GAME,this.keyPause=et.P,this.keyMute=et.M,this.keyNext=et.SPACE,this.keyBack=et.ESCAPE,this.keySpecial=et.CONTROL),this._configurer(i),this._driverInit()};s["awe6.core.drivers.AFactory"]=ne,ne.__name__="awe6.core.drivers.AFactory",ne.__interfaces__=[m,ie],ne.prototype={_driverInit:function(){null!=this._config&&"<?xml"==_.substr(this._config,0,5)&&this._traverseElements(f.parse(this._config).firstElement().elements(),""),this._launchKernel()},_traverseElements:function(e,t){0!=t.length&&(t+=".");for(var s=e;s.hasNext();){var i=s.next();if(i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));var n,r=t+i.nodeName;if(i.elements().hasNext()&&this._traverseElements(i.elements(),r),i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));if(null!=i.children[0]){if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));n="<![CDATA["==_.substr(Vs.print(i.children[0]),0,9)}else n=!1;if(n){if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));var a=i.children[0];if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));var o=Vs.print(i.children[0]).split("<![CDATA[").join("").split("]]>").join("");if(a.nodeType==f.Document||a.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==a.nodeType?"null":g.toString(a.nodeType)));a.nodeValue=o}if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));if(null==i.children[0])this.config.h[r]="";else{if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));var h=i.children[0].nodeType;if(h!=f.Element&&h!=f.Document){var l,c=this.config;if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));if(null==i.children[0])l="";else{if(i.nodeType!=f.Document&&i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));var u=i.children[0];if(u.nodeType==f.Document||u.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==u.nodeType?"null":g.toString(u.nodeType)));l=u.nodeValue}c.h[r]=l}else this.config.h[r]=""}for(var d=i.attributes();d.hasNext();){var p=d.next(),y=r+"."+p,m=this.config,w=i.get(p);m.h[y]=w}}},_configurer:function(e){null==e&&(e=!1)},_launchKernel:function(){if(null==this._concreteKernel){var e=!1;null==e&&(e=!1),e&&(this.id="awe6",this.version="0.0.1",this.author="unknown",this.isDecached=!1,this.isEyeCandyOptionEnabled=!0,this.isFullScreenOptionEnabled=!0,this.isResetSessionsOptionEnabled=!0,this.width=600,this.height=400,this.bgColor=16711680,this.fullScreenType=Ze.SCALE_ASPECT_RATIO_PRESERVE,this.joypadTouchType=$e.DISABLED,this.secret="YouMustOverrideThis",this.targetFramerate=25,this.isFixedUpdates=!0,this.startingSceneType=rt.GAME,this.keyPause=et.P,this.keyMute=et.M,this.keyNext=et.SPACE,this.keyBack=et.ESCAPE,this.keySpecial=et.CONTROL),this._configurer(e),this._concreteKernel=new Me(this,this._context)}},_getAssetUrls:function(){for(var e=[],t=0;t<1e3;){var s="settings.assets.url"+t++;Object.prototype.hasOwnProperty.call(this.config.h,s)&&e.push(l.string(this.config.h[s]))}return e},onInitComplete:function(e){null==this._kernel&&null!=e&&(this._kernel=e,this._tools=this._kernel.tools,this.id=_.substr(this._tools.toConstCase(u.trim(this.id)),0,16),this.version=_.substr(u.trim(this.version),0,16),this.author=_.substr(u.trim(this.author),0,16))},createAssetManager:function(){return zs.__implements(this._kernel.assets,q)?zs.__cast(this._kernel.assets,q):new Re(this._kernel)},createEncrypter:function(){return new P(this.secret)},createLogger:function(){return null},createOverlay:function(){return new Ue(this._kernel)},createPreloader:function(){return new Le(this._kernel,this._getAssetUrls(),this.isDecached)},createScene:function(e){return null==e&&(e=this.startingSceneType),new j(this._kernel,e)},createSceneTransition:function(e,t){return new Ye(this._kernel)},createSession:function(e){return new ke(this._kernel,e)},createTextStyle:function(e){return new X},getBackSceneType:function(e){return null},getNextSceneType:function(e){return null},dispose:function(){if(!this.isDisposed&&null!=this._concreteKernel){this.isDisposed=!0,this._driverDisposer();var e=this._concreteKernel;e.isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),this._concreteKernel=null,this._kernel=null,this.config=null}},_driverDisposer:function(){},__class__:ne};var re=function(){};s["awe6.interfaces.IInputKeyboard"]=re,re.__name__="awe6.interfaces.IInputKeyboard",re.__isInterface__=!0,re.prototype={__class__:re};var ae=function(e){E.call(this,e)};s["awe6.core.drivers.AInputKeyboard"]=ae,ae.__name__="awe6.core.drivers.AInputKeyboard",ae.__interfaces__=[re],ae.__super__=E,ae.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this._driverInit(),this._reset()},_driverInit:function(){},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e);for(var t=Object.create(null),s=[],i=0,n=this._buffer;i<n.length;){var r=n[i];++i;var a=null==r.keyCode?"null":""+r.keyCode;Object.prototype.hasOwnProperty.call(t,a)?s.push(r):r.isDown?this._keys[r.keyCode].isDown||(this._onDown(r.keyCode),t[a]=!0):this._keys[r.keyCode].isDown&&(this._onUp(r.keyCode),t[a]=!0)}this._buffer=s.slice();for(i=0,n=this._keys;i<n.length;){r=n[i];++i,r.isDown?r.updatesDown++:r.updatesUp++,r.isDown?r.timeDown+=e:r.timeUp+=e}},_disposer:function(){this._keys=null,E.prototype._disposer.call(this)},_addEvent:function(e,t){this._buffer.push(new oe(e,t))},_onDown:function(e){var t=this._keys[e];t.isUsed=!0,t.isDown=!0,t.timeUpPrevious=t.timeUp,t.updatesUpPrevious=t.updatesUp,t.updatesUp=0,t.timeUp=0},_onUp:function(e){var t=this._keys[e];t.isDown=!1,t.timeDownPrevious=t.timeDown,t.updatesDownPrevious=t.updatesDown,t.updatesDown=0,t.timeDown=0},_reset:function(e){this._buffer=[],this._keys=[];for(var t=0;t<256;){var s=t++;this._keys[s]=new _e(this._kernel)}},getIsKeyDown:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return this._keys[t].isDown},getIsKeyPress:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return 1==this._keys[t].updatesDown},getIsKeyRelease:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return!!this._keys[t].isUsed&&1==this._keys[t].updatesUp},getKeyCode:function(e){switch(e._hx_index){case 0:return 144;case 1:return 12;case 2:return 47;case 3:return 18;case 4:return 8;case 5:return 20;case 6:return 17;case 7:return 46;case 8:return 40;case 9:return 35;case 10:return 13;case 11:return 27;case 12:return 112;case 13:return 121;case 14:return 122;case 15:return 123;case 16:return 124;case 17:return 125;case 18:return 126;case 19:return 113;case 20:return 114;case 21:return 115;case 22:return 116;case 23:return 117;case 24:return 118;case 25:return 119;case 26:return 120;case 27:return 36;case 28:return 45;case 29:return 37;case 30:return 96;case 31:return 97;case 32:return 98;case 33:return 99;case 34:return 100;case 35:return 101;case 36:return 102;case 37:return 103;case 38:return 104;case 39:return 105;case 40:return 107;case 41:return 110;case 42:return 111;case 43:return 108;case 44:return 106;case 45:return 109;case 46:return 34;case 47:return 33;case 48:return 39;case 49:return 16;case 50:return 32;case 51:return 9;case 52:return 38;case 53:return 65;case 54:return 66;case 55:return 67;case 56:return 68;case 57:return 69;case 58:return 70;case 59:return 71;case 60:return 72;case 61:return 73;case 62:return 74;case 63:return 75;case 64:return 76;case 65:return 77;case 66:return 78;case 67:return 79;case 68:return 80;case 69:return 81;case 70:return 82;case 71:return 83;case 72:return 84;case 73:return 85;case 74:return 86;case 75:return 87;case 76:return 88;case 77:return 89;case 78:return 90;case 79:return 48;case 80:return 49;case 81:return 50;case 82:return 51;case 83:return 52;case 84:return 53;case 85:return 54;case 86:return 55;case 87:return 56;case 88:return 57;case 89:return 186;case 90:return 187;case 91:return 189;case 92:return 191;case 93:return 222;case 94:return 219;case 95:return 221;case 96:return 220;case 97:return 192;case 98:return 223;case 99:return 0|e.value}},getKey:function(e){var t=et.__constructs__.slice();t.pop();for(var s=0;s<t.length;){var i=t[s];++s;var n=p.createEnum(et,i);if(this.getKeyCode(n)==e)return n}return et.SUB_TYPE(e)},__class__:ae});var _e=function(e){this.isDown=!1,this.updatesDown=0,this.updatesUp=e.tools.BIG_NUMBER,this.timeDown=0,this.timeUp=e.tools.BIG_NUMBER,this.updatesDownPrevious=0,this.updatesUpPrevious=e.tools.BIG_NUMBER,this.timeDownPrevious=0,this.timeUpPrevious=e.tools.BIG_NUMBER};s["awe6.core.drivers._AInputKeyboard._HelperKey"]=_e,_e.__name__="awe6.core.drivers._AInputKeyboard._HelperKey",_e.prototype={__class__:_e};var oe=function(e,t){this.keyCode=e,this.isDown=t};s["awe6.core.drivers._AInputKeyboard._HelperKeyEvent"]=oe,oe.__name__="awe6.core.drivers._AInputKeyboard._HelperKeyEvent",oe.prototype={__class__:oe};var he=function(){};s["awe6.interfaces.IInputMouse"]=he,he.__name__="awe6.interfaces.IInputMouse",he.__isInterface__=!0,he.prototype={__class__:he,__properties__:{set_cursorType:"set_cursorType"}};var le=function(e){E.call(this,e)};s["awe6.core.drivers.AInputMouse"]=le,le.__name__="awe6.core.drivers.AInputMouse",le.__interfaces__=[he],le.__super__=E,le.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this._driverInit(),this.x=this.y=this._xPrev=this._yPrev=this._deltaX=this._deltaY=this.scroll=this._deltaScroll=0,this.relativeX=this.relativeY=this.relativeCentralisedX=this.relativeCentralisedY=0,this.isMoving=!1,this._buffer=[],this._getPosition(),this.isMoving=!1,this.set_isVisible(!0),this.scroll=0,this.set_cursorType(it.AUTO),this._scrollPrev=0,this._stillUpdates=0,this._stillDuration=0,this._reset()},_driverInit:function(){},_updater:function(e){null==e&&(e=0),this._deltaTimePrev=e,E.prototype._updater.call(this,e),this._xPrev=this.x,this._yPrev=this.y,this._getPosition(),this._handleButton(st.LEFT,this._buffer.length>0?this._buffer.shift():this._buttonLeft.isDown,e),this._handleButton(st.MIDDLE,this._isMiddleDown(),e),this._handleButton(st.RIGHT,this._isRightDown(),e),this._deltaScroll=this.scroll-this._scrollPrev,this._scrollPrev=this.scroll,this._deltaX=this.x-this._xPrev,this._deltaY=this.y-this._yPrev,this.isMoving=this.x!=this._xPrev||this.y!=this._yPrev,this.isMoving?this._stillUpdates=this._stillDuration=0:(this._stillUpdates++,this._stillDuration+=e),this.relativeX=this.x/this._kernel.factory.width,this.relativeY=this.y/this._kernel.factory.height,this.relativeCentralisedX=2*(this.relativeX-.5),this.relativeCentralisedY=2*(this.relativeY-.5),this.isWithinBounds=this._isWithinBounds()},_isMiddleDown:function(){return!1},_isRightDown:function(){return!1},_isWithinBounds:function(){return!0},_getPosition:function(){this.x=0,this.y=0},_handleButton:function(e,t,s){null==s&&(s=0);var i=this._getButton(e);t?(i.isDown||(i.timeUpPrevious=i.timeUp,i.updatesUpPrevious=i.updatesUp,i.timeUp=i.updatesUp=0,i.clickX=this.x,i.clickY=this.y),i.timeDown+=s,i.updatesDown++,i.isDown=!0):(i.isDown&&(i.timeDownPrevious=i.timeDown,i.updatesDownPrevious=i.updatesDown,i.timeDown=i.updatesDown=0),i.timeUp+=s,i.updatesUp++,i.isDown=!1)},_disposer:function(){E.prototype._disposer.call(this)},_reset:function(e){this._buffer=[],this._buttonLeft=new ce(this._kernel),this._buttonMiddle=new ce(this._kernel),this._buttonRight=new ce(this._kernel)},_getButton:function(e){switch(null==e&&(e=st.LEFT),e._hx_index){case 0:return this._buttonLeft;case 1:return this._buttonMiddle;case 2:return this._buttonRight}},getDeltaX:function(e){null==e&&(e=!0);var t=this._deltaX;return e&&(t*=1e3/this._deltaTimePrev),Math.round(t)},getDeltaY:function(e){null==e&&(e=!0);var t=this._deltaY;return e&&(t*=1e3/this._deltaTimePrev),Math.round(t)},getIsButtonDown:function(e){return this._getButton(e).isDown},getIsButtonRelease:function(e){return 1==this._getButton(e).updatesUp},getButtonDownDuration:function(e,t,s){null==s&&(s=!1),null==t&&(t=!0);var i=this._getButton(e);return s?t?i.timeDownPrevious:i.updatesDownPrevious:t?i.timeDown:i.updatesDown},getButtonUpDuration:function(e,t,s){null==s&&(s=!1),null==t&&(t=!0);var i=this._getButton(e);return s?t?i.timeUpPrevious:i.updatesUpPrevious:t?i.timeUp:i.updatesUp},getButtonDragWidth:function(e){var t=this._getButton(e);return t.isDown?this.x-t.clickX:0},getButtonDragHeight:function(e){var t=this._getButton(e);return t.isDown?this.y-t.clickY:0},set_isVisible:function(e){return this.isVisible=e,this.isVisible},set_cursorType:function(e){return this.cursorType=e,this.cursorType},__class__:le,__properties__:r(E.prototype.__properties__,{set_cursorType:"set_cursorType",set_isVisible:"set_isVisible"})});var ce=function(e){this.isDown=!1,this.updatesDown=0,this.updatesUp=e.tools.BIG_NUMBER,this.timeDown=0,this.timeUp=e.tools.BIG_NUMBER,this.updatesDownPrevious=0,this.updatesUpPrevious=e.tools.BIG_NUMBER,this.timeDownPrevious=0,this.timeUpPrevious=e.tools.BIG_NUMBER};s["awe6.core.drivers._AInputMouse._HelperButton"]=ce,ce.__name__="awe6.core.drivers._AInputMouse._HelperButton",ce.prototype={__class__:ce};var ue=function(){};s["awe6.interfaces.ILogger"]=ue,ue.__name__="awe6.interfaces.ILogger",ue.__isInterface__=!0,ue.prototype={__class__:ue};var de=function(){};s["awe6.interfaces.IKernel"]=de,de.__name__="awe6.interfaces.IKernel",de.__isInterface__=!0,de.__interfaces__=[ue,y],de.prototype={__class__:de,__properties__:{set_session:"set_session",get_session:"get_session",set_isFullScreen:"set_isFullScreen",set_isEyeCandy:"set_isEyeCandy"}};var pe=function(e,t){this.factory=e,this._context=t,this.tools=this._tools=new J(this),E.call(this,this)};s["awe6.core.drivers.AKernel"]=pe,pe.__name__="awe6.core.drivers.AKernel",pe.__interfaces__=[de],pe.__super__=E,pe.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this._view=new ze(this,this._context,0,this),this._processes=new Ps,this._helperFramerate=new ge(this.factory.targetFramerate),this._isPreloaded=!1,this.isDebug=this.factory.isDebug,this.isLocal=this._driverGetIsLocal(),this._driverInit(),this.assets=this._assetManagerProcess=new Re(this._kernel),this.audio=this._audioManager=new De(this._kernel),this.inputs=this._inputManager=new L(this._kernel),this.scenes=this._sceneManager=new K(this._kernel),this.messenger=this._messageManager=new Y(this._kernel),this._view.addChild(this._sceneManager.view,1),this._addProcess(this._assetManagerProcess),this._addProcess(this._inputManager),this._addProcess(this._sceneManager),this._addProcess(this._messageManager),this._addProcess(this._audioManager),this.set_isEyeCandy(!0),this.set_isFullScreen(!1),this.factory.onInitComplete(this),this.set_session(this.factory.createSession()),this.get_session().reset(),this._preloader=this.factory.createPreloader(),this._addProcess(this._preloader),this._view.addChild(this._preloader.get_view(),2)},_driverGetIsLocal:function(){return!1},_driverInit:function(){},_driverDisposer:function(){},onPreloaderComplete:function(e){this._isPreloaded=!0,this._removeProcess(this._preloader),this._preloader=null,this._logger=this.factory.createLogger();var t=this.factory.createAssetManager();t!=this._assetManagerProcess&&(this._removeProcess(this._assetManagerProcess),this.assets=this._assetManagerProcess=t,this._addProcess(this._assetManagerProcess,!1)),this.overlay=this._overlayProcess=this.factory.createOverlay(),this._addProcess(this._overlayProcess,!0),this._view.addChild(this._overlayProcess.get_view(),3),this.isDebug&&(this._addProcess(this._profiler=new Fe(this)),this._view.addChild(this._profiler.get_view(),this._tools.BIG_NUMBER)),this.scenes.setScene(this.factory.startingSceneType),this.overlay.flash()},_updater:function(e){null==e&&(e=0),this._helperFramerate.update();var t=this.factory.isFixedUpdates?1e3/this.factory.targetFramerate|0:this._helperFramerate.timeInterval;E.prototype._updater.call(this,t);for(var s=this._processes.h;null!=s;){var i=s.item;s=s.next,i.update(t)}var n=this._view;null==(e=t)&&(e=0),n.isActive&&!n.isDisposed&&(n._age+=e,n._updates++,n._updater(e))},_disposer:function(){for(var e=this._processes.h;null!=e;){var t=e.item;e=e.next;var s=t;this._removeProcess(s)}zs.__implements(this.factory,m)&&zs.__cast(this.factory,m).dispose(),this.factory=null;var i=this._view;i.isDisposed||(i.isDisposed=!0,i.set_isActive(!1),i._disposer()),this._view=null,this._driverDisposer(),this.assets=this._assetManagerProcess=null,this.audio=this._audioManager=null,this.inputs=this._inputManager=null,this.scenes=this._sceneManager=null,this.messenger=this._messageManager=null,this.overlay=this._overlayProcess=null,this.tools=this._tools=null,this._logger=null,this._preloader=null,this.set_session(null),E.prototype._disposer.call(this)},getConfig:function(e){return Object.prototype.hasOwnProperty.call(this.factory.config.h,e)?this.factory.config.h[e]:null},log:function(e){null!=this._logger?this._logger.log(e):this.isDebug&&ms.trace("LOG: "+l.string(e),{fileName:"awe6/core/drivers/AKernel.hx",lineNumber:248,className:"awe6.core.drivers.AKernel",methodName:"log"})},getFramerate:function(e){return null==e&&(e=!0),e?this._helperFramerate.framerate:this.factory.targetFramerate},_addProcess:function(e,t){null==t&&(t=!0),null!=e&&(t?this._processes.add(e):this._processes.push(e))},_removeProcess:function(e){return null!=e&&(e.dispose(),this._processes.remove(e))},set_isEyeCandy:function(e){return this.factory.isEyeCandyOptionEnabled?(this.isEyeCandy=e,this._driverSetIsEyeCandy(e),this.isEyeCandy):(this.isEyeCandy=!0,this.isEyeCandy)},_driverSetIsEyeCandy:function(e){},set_isFullScreen:function(e){return!this.factory.isFullScreenOptionEnabled||p.enumEq(this.factory.fullScreenType,Ze.DISABLED)?(this.isFullScreen=!1,this.isFullScreen):(this.isFullScreen=e,this._driverSetIsFullScreen(e),this.isFullScreen)},_driverSetIsFullScreen:function(e){},_pauser:function(){E.prototype._pauser.call(this),null!=this.scenes.get_scene()&&this.scenes.get_scene().pause()},_resumer:function(){E.prototype._resumer.call(this),null!=this.scenes.get_scene()&&this.scenes.get_scene().resume()},get_session:function(){return this.session},set_session:function(e){return this.session=e,this.get_session()},__class__:pe,__properties__:r(E.prototype.__properties__,{set_session:"set_session",get_session:"get_session",set_isFullScreen:"set_isFullScreen",set_isEyeCandy:"set_isEyeCandy"})});var ge=function(e){this.framerate=e,this._timeAtLastUpdate=_.now()/1e3*1e3|0};s["awe6.core.drivers._AKernel._HelperFramerate"]=ge,ge.__name__="awe6.core.drivers._AKernel._HelperFramerate",ge.prototype={update:function(){this.timeInterval=(_.now()/1e3*1e3|0)-this._timeAtLastUpdate,this.framerate=1e3/this.timeInterval,this._timeAtLastUpdate=_.now()/1e3*1e3|0},__class__:ge};var fe=function(){};s["awe6.interfaces.IOverlay"]=fe,fe.__name__="awe6.interfaces.IOverlay",fe.__isInterface__=!0,fe.prototype={__class__:fe,__properties__:{get_pauseEntity:"get_pauseEntity"}};var ye=function(){};s["awe6.interfaces.IOverlayProcess"]=ye,ye.__name__="awe6.interfaces.IOverlayProcess",ye.__isInterface__=!0,ye.__interfaces__=[S,v,fe];var me=function(e,t,s,i,n,r,a,_,o,h,l,c,u,d,p,g,f){null==f&&(f=.35),null==g&&(g=0),null==p&&(p=8),null==s&&(s=30),null==t&&(t=30),null==i&&(i=new ze(e)),null==n&&(n=new ze(e)),null==r&&(r=new ze(e)),null==a&&(a=new ze(e)),null==_&&(_=new ze(e)),null==o&&(o=new ze(e)),null==h&&(h=new ze(e)),null==l&&(l=new ze(e)),null==c&&(c=new ze(e)),null==u&&(u=new ze(e)),null==d&&(d=new ze(e)),this._borderView=i,this._buttonBack=new A(e,n,r,t,s),this._buttonMute=new A(e,a,_,t,s),this._buttonUnmute=new A(e,o,h,t,s),this._buttonPause=new A(e,l,c,t,s),this._buttonUnpause=new A(e,u,d,t,s),this._pauseBlur=p,this._pauseColor=g,this._pauseAlpha=f,this._context=new createjs.Container,k.call(this,e,null,this._context)};s["awe6.core.drivers.AOverlay"]=me,me.__name__="awe6.core.drivers.AOverlay",me.__interfaces__=[ye],me.__super__=k,me.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this),this.get_view().addChild(this._borderView,4),this._wasMute=this._kernel.audio.isMute,this._driverInit(),this._progressView=new ze(this._kernel,this._progressContext),this._progressView.set_isVisible(!1),this._pauseView=new ze(this._kernel,this._pauseContext),this._pauseView.set_isVisible(!1),this._flashView=new ze(this._kernel,this._flashContext),this._flashView.set_isVisible(!1),this._flashStartingAlpha=1,this._flashAsTime=!0,this._flashDuration=this._flashStartingDuration=100;var e=oi(this,this.activateButton),t=nt.BACK,s=function(){e(t)};this._buttonBack.onClickCallback=s;var i=oi(this,this.activateButton),n=nt.MUTE;s=function(){i(n)};this._buttonMute.onClickCallback=s;var r=oi(this,this.activateButton),a=nt.PAUSE;s=function(){r(a)};this._buttonPause.onClickCallback=s;var _=oi(this,this.activateButton),o=nt.UNMUTE;s=function(){_(o)};this._buttonUnmute.onClickCallback=s;var h=oi(this,this.activateButton),l=nt.UNPAUSE;s=function(){h(l)};this._buttonUnpause.onClickCallback=s,this.get_view().addChild(this._flashView,1),this.get_view().addChild(this._pauseView,2),this.get_view().addChild(this._progressView,3),this.addEntity(this._buttonBack,null,!0,21),this.addEntity(this._buttonUnmute,null,!0,22),this.addEntity(this._buttonMute,null,!0,23),this.addEntity(this._buttonUnpause,null,!0,24),this.addEntity(this._buttonPause,null,!0,25);var c=this._buttonBack.height,u=this._buttonBack.width,d=this._kernel.factory.width-4*u,p=c;this.positionButton(nt.BACK,d,p),this.positionButton(nt.MUTE,d+=u,p),this.positionButton(nt.UNMUTE,d,p),this.positionButton(nt.PAUSE,d+=u,p),this.positionButton(nt.UNPAUSE,d,p)},_driverInit:function(){this._progressContext=new createjs.Container,this._pauseContext=new createjs.Container,this._flashContext=new createjs.Container},_updater:function(e){if(null==e&&(e=0),k.prototype._updater.call(this,e),this._flashDuration>0){this._flashDuration-=this._flashAsTime?e:1;var t=this._flashStartingAlpha*(this._flashDuration/this._flashStartingDuration);this._flashAlpha=t>1?1:t<0?0:t}this._flashView.set_isVisible(this._flashAlpha>0),null!=this._kernel.factory.keyBack&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyBack)&&this.activateButton(this._kernel.isActive?nt.BACK:nt.UNPAUSE),null!=this._kernel.factory.keyPause&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyPause)&&this.activateButton(this._kernel.isActive?nt.PAUSE:nt.UNPAUSE),null!=this._kernel.factory.keyMute&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyMute)&&this.activateButton(this._kernel.audio.isMute?nt.UNMUTE:nt.MUTE),null==this.get_pauseEntity()||this._kernel.isActive||(this.get_pauseEntity().update(e),this._pauseView.update(e))},_disposer:function(){null!=this.get_pauseEntity()&&this.get_pauseEntity().dispose(),this.get_view().dispose(),k.prototype._disposer.call(this)},_getButton:function(e){switch(e._hx_index){case 0:return this._buttonBack;case 1:return this._buttonMute;case 2:return this._buttonUnmute;case 3:return this._buttonPause;case 4:return this._buttonUnpause;case 5:e.value;return null}},showButton:function(e,t){null==t&&(t=!0);var s=this._getButton(e);null!=s&&(t?this.addEntity(s,null,!0):this.removeEntity(s,null,!0))},positionButton:function(e,t,s,i,n){var r=this._getButton(e);null!=r&&(r.set_x(t),r.set_y(s),null!=i&&r.set_width(i),null!=n&&r.set_height(n))},hideButtons:function(){this.showButton(nt.BACK,!1),this.showButton(nt.MUTE,!1),this.showButton(nt.UNMUTE,!1),this.showButton(nt.PAUSE,!1),this.showButton(nt.UNPAUSE,!1)},flash:function(e,t,s,i){null==i&&(i=16777215),null==s&&(s=1),null==t&&(t=!0),null==e&&(e=t?500:.5*this._kernel.factory.targetFramerate),this._flashDuration=this._flashStartingDuration=e,this._flashAsTime=t,this._flashAlpha=this._flashStartingAlpha=s>1?1:s<0?0:s},activateButton:function(e){switch(e._hx_index){case 0:this._buttonBack.get_view().get_isInViewStack()&&(this._kernel.isActive||this.activateButton(nt.UNPAUSE),this._drawPause(!1),this._kernel.resume(),this._kernel.scenes.back());break;case 1:this._buttonMute.get_view().get_isInViewStack()&&(this.showButton(nt.MUTE,!1),this.showButton(nt.UNMUTE,!0),this._kernel.audio.set_isMute(!0));break;case 2:this._buttonUnmute.get_view().get_isInViewStack()&&!this._buttonUnpause.get_view().get_isInViewStack()&&(this.showButton(nt.MUTE,!0),this.showButton(nt.UNMUTE,!1),this._kernel.audio.set_isMute(!1));break;case 3:this._buttonPause.get_view().get_isInViewStack()&&(this._kernel.pause(),this._drawPause(!0),this._wasMute=this._kernel.audio.isMute,this.showButton(nt.PAUSE,!1),this.showButton(nt.UNPAUSE,!0),this.activateButton(nt.MUTE));break;case 4:this._buttonUnpause.get_view().get_isInViewStack()&&(this.showButton(nt.PAUSE,!0),this.showButton(nt.UNPAUSE,!1),this.activateButton(this._wasMute?nt.MUTE:nt.UNMUTE),this._kernel.resume(),this._drawPause(!1));break;case 5:e.value}},_drawPause:function(e){null==e&&(e=!0),this._pauseView.set_isVisible(e)},get_pauseEntity:function(){return this.pauseEntity},set_pauseEntity:function(e){return null!=this.get_pauseEntity()&&this.get_pauseEntity().get_view().remove(),this.pauseEntity=e,this._pauseView.addChild(this.get_pauseEntity().get_view()),this.get_pauseEntity()},__class__:me,__properties__:r(k.prototype.__properties__,{set_pauseEntity:"set_pauseEntity",get_pauseEntity:"get_pauseEntity"})});var we=function(){};s["awe6.interfaces.IProgress"]=we,we.__name__="awe6.interfaces.IProgress",we.__isInterface__=!0;var ve=function(){};s["awe6.interfaces.IPreloader"]=ve,ve.__name__="awe6.interfaces.IPreloader",ve.__isInterface__=!0,ve.__interfaces__=[we,S,v];var Ee=function(e,t,s){null==s&&(s=!1),this._assets=t,this._isDecached=s,E.call(this,e)};s["awe6.core.drivers.APreloader"]=Ee,Ee.__name__="awe6.core.drivers.APreloader",Ee.__interfaces__=[ve],Ee.__super__=E,Ee.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.progress=0,null==this.get_view()&&(this.view=new ze(this._kernel)),this._encrypter=this._tools,this._currentProgress=0,this._currentAsset=0,this._isComplete=!1,this._assets.length>0&&this._next()},_next:function(){if(this._currentAsset++,this._currentAsset>this._assets.length){if(!this._isComplete){try{var e=oi(t=this._kernel,t.onPreloaderComplete),s=this;Es.delay(function(){e(s)},100)}catch(e){}this._isComplete=!0}}else this._driverLoad(this._assets[this._currentAsset-1]),this._currentProgress=0},_driverLoad:function(e){},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e),0==this._assets.length&&this._kernel.onPreloaderComplete(this),this.get_view().set_isVisible(this._age>100)},_disposer:function(){this.get_view().dispose(),this._driverDisposer(),E.prototype._disposer.call(this)},_driverDisposer:function(){},get_view:function(){return this.view},__class__:Ee,__properties__:r(E.prototype.__properties__,{get_view:"get_view"})});var xe=function(e){this._context=new createjs.Container,k.call(this,e,null,this._context)};s["awe6.core.drivers.AProfiler"]=xe,xe.__name__="awe6.core.drivers.AProfiler",xe.__super__=k,xe.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this),this._marginHeight=25,this._marginColor=128,this._backgroundColor=-2147483520,this._fpsColor=16777215,this._memoryColor=16744448,this._fpsLabel="FPS",this._memoryLabel="MBs",this._width=60,this._height=50,this._agePrev=0},_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e),this._age<this._agePrev+250||(this._agePrev=this._age,this._driverUpdate())},_driverUpdate:function(){},__class__:xe});var be=function(){};s["awe6.interfaces.ISceneTransition"]=be,be.__name__="awe6.interfaces.ISceneTransition",be.__isInterface__=!0,be.__interfaces__=[S,we,v];var Se=function(e,t){null==t&&(t=500),this._duration=t,this._context=new createjs.Container,k.call(this,e,null,this._context)};s["awe6.core.drivers.ASceneTransition"]=Se,Se.__name__="awe6.core.drivers.ASceneTransition",Se.__interfaces__=[be],Se.__super__=k,Se.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this)},_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e),this._age>this._duration&&(this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},get_progress:function(){var e=this._age/this._duration;return e>1?1:e<0?0:e},__class__:Se,__properties__:r(k.prototype.__properties__,{get_progress:"get_progress"})});var Ce=function(){};s["awe6.interfaces.ISession"]=Ce,Ce.__name__="awe6.interfaces.ISession",Ce.__isInterface__=!0,Ce.prototype={__class__:Ce};var ke=function(e,t){null==t&&(t=""),this._kernel=e,""==t&&(t="DEBUG_AWE6"),this.id=t,this._tools=this._kernel.tools,this._version=1,this._init()};s["awe6.core.drivers.ASession"]=ke,ke.__name__="awe6.core.drivers.ASession",ke.__interfaces__=[Ce],ke.prototype={_init:function(){this._driverLoad(),h.field(this._savedData,"_____VERSION")!=this._version&&this._driverReset();var e=null!=h.field(this._savedData,this.id);this._data={},this._resetter(),this._setter(),e&&(this._data=h.field(this._savedData,this.id),this._getter(),this.loadCount++)},_driverLoad:function(){this._savedData={}},_driverSave:function(){},_driverReset:function(){this._savedData={}},_getter:function(){this.loadCount=this._data.loadCount,this.saveCount=this._data.saveCount},_setter:function(){this._data.loadCount=this.loadCount,this._data.saveCount=this.saveCount},_resetter:function(){this.loadCount=0,this.saveCount=0},reset:function(e){null==e&&(e=!1),this._data={},this._resetter(),this._setter(),e&&(this.saveCount++,this._setter(),this._savedData._____VERSION=this._version,this._savedData[this.id]=this._data,this._driverSave())},save:function(){this.saveCount++,this._setter(),this._savedData._____VERSION=this._version,this._savedData[this.id]=this._data,this._driverSave()},__class__:ke};var Te=function(){};s["awe6.interfaces.IPriority"]=Te,Te.__name__="awe6.interfaces.IPriority",Te.__isInterface__=!0,Te.prototype={__class__:Te,__properties__:{set_priority:"set_priority",get_priority:"get_priority"}};var Ae=function(){};s["awe6.interfaces.IView"]=Ae,Ae.__name__="awe6.interfaces.IView",Ae.__isInterface__=!0,Ae.__interfaces__=[w,m,T,Te],Ae.prototype={__class__:Ae,__properties__:{get_isInViewStack:"get_isInViewStack",set_isVisible:"set_isVisible",get_parent:"get_parent"}};var Ie=function(e,t,s,i){null==s&&(s=0),this.context=t,this.set_priority(s),this.owner=i,E.call(this,e)};s["awe6.core.drivers.AView"]=Ie,Ie.__name__="awe6.core.drivers.AView",Ie.__interfaces__=[Ae],Ie.__super__=E,Ie.prototype=r(E.prototype,{_init:function(){E.prototype._init.call(this),this.globalX=0,this.globalY=0,this.set_x(0),this.set_y(0),this.set_isVisible(!0),this._isDirty=!0,this._children=[]},addChild:function(e,t){if(null==t&&(t=0),this.isDisposed||null==e)return null;if(e.get_parent()!=this&&(e.remove(),e instanceof Ie)){var s=e;this._children.push(s),s._setParent(this)}return 0!=t&&e.set_priority(t),this._isDirty=!0,e},removeChild:function(e){if(!this.isDisposed&&null!=e){if(e instanceof Ie){var t=e;if(t.get_parent()!=this)return;_.remove(this._children,t),t._setParent(null)}this._isDirty=!0}},remove:function(){null!=this.get_parent()&&this.get_parent().removeChild(this)},clear:function(){for(var e=0,t=this._children;e<t.length;){var s=t[e];++e,this.removeChild(s)}},_updater:function(e){null==e&&(e=0),E.prototype._updater.call(this,e);for(var t=0,s=this._children;t<s.length;){var i=s[t];++t;var n=e;null==n&&(n=0),i.isActive&&!i.isDisposed&&(i._age+=n,i._updates++,i._updater(n))}this._isDirty&&this._draw(),this.globalX=null==this.get_parent()?this.x:this.x+this.get_parent().globalX,this.globalY=null==this.get_parent()?this.y:this.y+this.get_parent().globalY},_disposer:function(){this.remove(),this._driverDisposer(),this.clear(),E.prototype._disposer.call(this)},_driverDisposer:function(){},_draw:function(){this.isDisposed||(this._children.sort(oi(t=this._tools,t.sortByPriority)),this._driverDraw(),this._isDirty=!1)},_driverDraw:function(){},_setParent:function(e){this.parent=e},get_priority:function(){return this.priority},set_priority:function(e){if(e==this.get_priority())return this.get_priority();if(this.priority=e,this.get_parent()instanceof Ie){var t=this.get_parent();null!=t&&(t._isDirty=!0)}return this.get_priority()},set_isVisible:function(e){if(e==this.isVisible)return this.isVisible;if(this.isVisible=e,this.get_parent()instanceof Ie){var t=this.get_parent();null!=t&&t._draw()}return this.isVisible},get_parent:function(){return this.parent},get_isInViewStack:function(){return!!this.isVisible&&(this.owner==this._kernel||null!=this.get_parent()&&this.get_parent().get_isInViewStack())},set_x:function(e){return this.x=e,this.globalX=null==this.get_parent()?this.x:this.x+this.get_parent().globalX,this.x},set_y:function(e){return this.y=e,this.globalY=null==this.get_parent()?this.y:this.y+this.get_parent().globalY,this.y},__class__:Ie,__properties__:r(E.prototype.__properties__,{get_parent:"get_parent",get_isInViewStack:"get_isInViewStack",set_isVisible:"set_isVisible",set_y:"set_y",set_x:"set_x",set_priority:"set_priority",get_priority:"get_priority"})});var Re=function(e){$.call(this,e)};s["awe6.core.drivers.createjs.AssetManager"]=Re,Re.__name__="awe6.core.drivers.createjs.AssetManager",Re.__super__=$,Re.prototype=r($.prototype,{_driverGetAsset:function(e,t,s){var i=null;return null!=Re.loadQueue&&(i=Re.loadQueue.getResult(e)),i},__class__:Re});var De=function(e){te.call(this,e)};s["awe6.core.drivers.createjs.AudioManager"]=De,De.__name__="awe6.core.drivers.createjs.AudioManager",De.__super__=te,De.prototype=r(te.prototype,{_init:function(){te.prototype._init.call(this),this._visibilityWasMute=this.isMute,window.document.addEventListener("visibilitychange",oi(this,this._onVisibilityChange))},_disposer:function(){window.document.removeEventListener("visibilitychange",oi(this,this._onVisibilityChange)),te.prototype._disposer.call(this)},_driverSoundFactory:function(e,t,s,i,n,r,a){return null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==s&&(s=1),new Pe(this._kernel,e,this._packageId,t,s,i,n,r,a)},_driverSetIsMute:function(e){try{createjs.Sound.muted=e}catch(e){}try{createjs.Sound.setMute(e)}catch(e){}},_onVisibilityChange:function(e){this._getVisibilityPropery()?(this._visibilityWasMute=this.isMute,this.set_isMute(!0)):this.set_isMute(this._visibilityWasMute)},_getVisibilityPropery:function(){for(var e=["hidden","mozHidden","msHidden","oHidden","webkitHidden"],t=0;t<e.length;){var s=e[t];++t;var i=window.document;if(Object.prototype.hasOwnProperty.call(i,s))return h.field(window.document,s)}return window.document.hidden},__class__:De});var Pe=function(e,t,s,i,n,r,a,_,o){null==_&&(_=0),null==a&&(a=1),null==r&&(r=0),null==n&&(n=1),se.call(this,e,t,s,i,1==n?0:n,r,a,_,o)};s["awe6.core.drivers.createjs._HelperSound"]=Pe,Pe.__name__="awe6.core.drivers.createjs._HelperSound",Pe.__super__=se,Pe.prototype=r(se.prototype,{_driverInit:function(){try{this._sound=createjs.Sound.play("assets.audio."+this.id,null,0,this._startTime,this._loops,this._volume,this._pan),createjs.WebAudioPlugin.context&&"suspended"==createjs.WebAudioPlugin.context.state&&createjs.WebAudioPlugin.context.resume()}catch(e){}null!=this._sound?(this._sound.addEventListener("complete",oi(this,this._onSoundComplete)),this._driverTransform()):this.dispose()},_driverTransform:function(e){null==e&&(e=!1),null!=this._sound&&(e&&(this._volume*=this._sound.volume,this._pan*=this._sound.pan),this._sound.volume=this._volume,this._sound.pan=this._pan)},_driverStop:function(){if(null!=this._sound)try{this._sound.stop()}catch(e){}},_onSoundComplete:function(e){null!=this._onCompleteCallback&&this._onCompleteCallback.apply(this,[]),this.dispose()},__class__:Pe});var Ne=function(e,t,s){ne.call(this,e,t,s)};s["awe6.core.drivers.createjs.Factory"]=Ne,Ne.__name__="awe6.core.drivers.createjs.Factory",Ne.__super__=ne,Ne.prototype=r(ne.prototype,{_driverInit:function(){this.isDebug||(ms.trace=function(e,t){window.console.log(e)});var e=new createjs.Container;if(this._context.addChild(e),this._context=e,this._countConfigsLoaded=0,this._countConfigsToLoad=0,""!=this._config){var t=null!=this._config?this._config:"assets/__Config.xml",s=this._context.getStage().canvas.getAttribute("config");null!=s&&""!=s&&(t=s),this._loadConfig(t)}else this._launchKernel()},_launchKernel:function(){this._displayCredits();var e=!0;Object.prototype.hasOwnProperty.call(this.config.h,"settings.nativeExperience")&&(e="true"==this.config.h["settings.nativeExperience"]);var t=this._context.getStage().canvas.getAttribute("nativeExperience");null!=t&&""!=t&&(e="true"==t),this.isNativeExperience=e,ne.prototype._launchKernel.call(this);var s=this._concreteKernel.system.isDesktop,i="default";Object.prototype.hasOwnProperty.call(this.config.h,"settings.fullScreen")&&(i=this.config.h["settings.fullScreen"]);var n=this._context.getStage().canvas.getAttribute("fullScreen");null!=n&&""!=n&&(i=n),this._kernel.set_isFullScreen(s&&("desktop"==i||"all"==i)||!s&&("mobile"==i||"all"==i||"default"==i)),this._kernel.isFullScreen&&this.isNativeExperience&&!s&&(this._concreteKernel.system.requestFullScreen(),this._concreteKernel.system.requestLockScreen())},_displayCredits:function(){ms.trace(Object.prototype.hasOwnProperty.call(this.config.h,"settings.asciiArt")?this.config.h["settings.asciiArt"]:"",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:127,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),ms.trace(this.id+" v"+this.version+" by "+this.author,{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:128,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),ms.trace("Powered by awe6 (http://awe6.org)",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:129,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),this.isDecached&&ms.trace("Note: decaching is currently enabled",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:132,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),ms.trace("",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:134,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"})},_loadConfig:function(e){if("<?xml"==_.substr(e,0,5))this._parseXml(e);else{this.isDecached&&(e+="?dc="+l.random(99999));try{var t=new Us(e);t.onError=oi(this,this._onIOError),t.onData=oi(this,this._onComplete),t.request()}catch(e){var s=ys.caught(e).unwrap();return void this._onIOError(l.string(s))}this._countConfigsToLoad++}},_parseXml:function(e){if(this._traverseElements(f.parse(e).firstElement().elements(),""),Object.prototype.hasOwnProperty.call(this.config.h,"settings.joinXml")&&this._countConfigsLoaded<100){var t=this.config.h["settings.joinXml"],s=this.config;Object.prototype.hasOwnProperty.call(s.h,"settings.joinXml")&&delete s.h["settings.joinXml"];for(var i=t.split(","),n=0;n<i.length;){var r=i[n];++n,this._loadConfig(r)}}this._countConfigsLoaded==this._countConfigsToLoad&&this._launchKernel()},_onIOError:function(e){ms.trace("IO Errors Occurred During Config Loading:"+e,{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:188,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),ms.trace("Double check your Config path.  Cross domain (or local) file loading of Config is a security risk and is, therefore, disabled on this browser.",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:189,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),null!=this._config&&"<?xml"==_.substr(this._config,0,5)?(ms.trace("Embedded Config detected, using that to continue ...",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:192,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),this._countConfigsLoaded=this._countConfigsToLoad,this._parseXml(this._config)):(ms.trace("Use a web server (or local server) to run over http and serve all files from the same domain.  Or embed the Config directlty in the code (e.g. as a Resource).",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:198,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),ms.trace("Unable to continue without Config.",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:199,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}))},_onComplete:function(e){if(this._countConfigsLoaded++,""!=e){var t=e;"<?xml"!=_.substr(t,0,5)&&(t=this.createEncrypter().decrypt(Cs.ofString(t)).toString()),this._parseXml(t)}else this._onIOError(e)},_getAssetUrls:function(){for(var e=["bin/assets/audio/Boost1.m4a","bin/assets/audio/Boost1.ogg","bin/assets/audio/Boost2.m4a","bin/assets/audio/Boost2.ogg","bin/assets/audio/ButtonOver.m4a","bin/assets/audio/ButtonOver.ogg","bin/assets/audio/Coin.m4a","bin/assets/audio/Coin.ogg","bin/assets/audio/Collision1.m4a","bin/assets/audio/Collision1.ogg","bin/assets/audio/Collision2.m4a","bin/assets/audio/Collision2.ogg","bin/assets/audio/Driveby1.m4a","bin/assets/audio/Driveby1.ogg","bin/assets/audio/Driveby2.m4a","bin/assets/audio/Driveby2.ogg","bin/assets/audio/Driveby3.m4a","bin/assets/audio/Driveby3.ogg","bin/assets/audio/Driveby4.m4a","bin/assets/audio/Driveby4.ogg","bin/assets/audio/Engines.m4a","bin/assets/audio/Engines.ogg","bin/assets/audio/MusicGame.m4a","bin/assets/audio/MusicGame.ogg","bin/assets/audio/MusicLose.m4a","bin/assets/audio/MusicLose.ogg","bin/assets/audio/MusicMenu.m4a","bin/assets/audio/MusicMenu.ogg","bin/assets/audio/MusicWin.m4a","bin/assets/audio/MusicWin.ogg","bin/assets/audio/Silence.m4a","bin/assets/audio/Silence.ogg","bin/assets/audio/Transition.m4a","bin/assets/audio/Transition.ogg","bin/assets/audio/Upgrade.m4a","bin/assets/audio/Upgrade.ogg","bin/assets/audio/VocalProgress1.m4a","bin/assets/audio/VocalProgress1.ogg","bin/assets/audio/VocalProgress2.m4a","bin/assets/audio/VocalProgress2.ogg","bin/assets/audio/VocalProgress3.m4a","bin/assets/audio/VocalProgress3.ogg","bin/assets/audio/VocalRankGood.m4a","bin/assets/audio/VocalRankGood.ogg","bin/assets/audio/VocalRankOk.m4a","bin/assets/audio/VocalRankOk.ogg","bin/assets/audio/VocalRankPoor.m4a","bin/assets/audio/VocalRankPoor.ogg","bin/assets/audio/VocalStart.m4a","bin/assets/audio/VocalStart.ogg","bin/assets/Blank.png","bin/assets/fonts/__Roboto-webfont.eot","bin/assets/fonts/__Roboto-webfont.svg","bin/assets/fonts/__Roboto-webfont.ttf","bin/assets/fonts/__Roboto-webfont.woff","bin/assets/gui/Buttons.png","bin/assets/gui/Hud.png","bin/assets/gui/HudProgress.png","bin/assets/gui/InstructionsA.png","bin/assets/gui/InstructionsB.png","bin/assets/gui/LocationPreview.png","bin/assets/gui/LocationPreviewMask.png","bin/assets/gui/Logo.png","bin/assets/gui/LogoShine.png","bin/assets/gui/PauseBg.png","bin/assets/gui/SceneBg.png","bin/assets/gui/SceneBgA.png","bin/assets/gui/SceneBgB.png","bin/assets/gui/SceneBgC.jpg","bin/assets/gui/SceneFgHorizontal.png","bin/assets/gui/SceneFgVertical.png","bin/assets/gui/Title.png","bin/assets/gui/Vignette.png","bin/assets/location/Boost.png","bin/assets/location/Cars.png","bin/assets/location/FinishLine.png","bin/assets/location/HorizonA.jpg","bin/assets/location/HorizonB.jpg","bin/assets/location/HorizonC.jpg","bin/assets/location/HorizonD.jpg","bin/assets/location/LensDirt.jpg","bin/assets/location/LensFlares.jpg","bin/assets/location/RoadA.jpg","bin/assets/location/RoadB.jpg","bin/assets/location/RoadC.jpg","bin/assets/location/RoadD.jpg","bin/assets/location/Scenery.png","bin/assets/location/Streaks.png","bin/assets/__Config.xml","bin/assets/__Icon128.png","bin/assets/__Icon196.png","bin/assets/__Icon256.png","bin/assets/__PreloaderBg.png","bin/assets/__PreloaderFg.png"],t=[],s=0,i=e.length;s<i;){e[n=s++]=_.substr(e[n],4,null),("__"==_.substr(e[n],0,2)||e[n].indexOf("/__")>-1)&&t.push(e[n])}for(s=0;s<t.length;){var n=t[s];++s,_.remove(e,n)}return e},_driverDisposer:function(){null!=this._context.parent&&this._context.parent.removeChild(this._context)},preventDefaultForKeys:function(e){this._kernel.inputs.keyboard.preventDefaultForKeys(e)},allowDefaultForKeys:function(e){this._kernel.inputs.keyboard.allowDefaultForKeys(e)},__class__:Ne});var Oe=function(e){ae.call(this,e)};s["awe6.core.drivers.createjs.InputKeyboard"]=Oe,Oe.__name__="awe6.core.drivers.createjs.InputKeyboard",Oe.__super__=ae,Oe.prototype=r(ae.prototype,{_driverInit:function(){this._document=window.document,this._preventDefaultKeyCodes=[],this._document.addEventListener("keydown",oi(this,this._onKeyDown)),this._document.addEventListener("keyup",oi(this,this._onKeyUp))},_disposer:function(){this._document.removeEventListener("keydown",oi(this,this._onKeyDown)),this._document.removeEventListener("keyup",oi(this,this._onKeyUp)),ae.prototype._disposer.call(this)},_onKeyDown:function(e){this.isActive&&(-1!=this._preventDefaultKeyCodes.indexOf(e.keyCode)&&e.preventDefault(),this._addEvent(e.keyCode,!0))},_onKeyUp:function(e){this.isActive&&(-1!=this._preventDefaultKeyCodes.indexOf(e.keyCode)&&e.preventDefault(),this._addEvent(e.keyCode,!1))},preventDefaultForKeys:function(e){if(null!=e)for(var t=0;t<e.length;){var s=e[t];++t;var i=this.getKeyCode(s);o.has(this._preventDefaultKeyCodes,i)||this._preventDefaultKeyCodes.push(i)}},allowDefaultForKeys:function(e){if(null!=e)for(var t=0;t<this._preventDefaultKeyCodes.length;){var s=this.getKey(this._preventDefaultKeyCodes[t]);o.has(e,s)?this._preventDefaultKeyCodes.splice(t,1):++t}},__class__:Oe});var Be=function(e){le.call(this,e)};s["awe6.core.drivers.createjs.InputMouse"]=Be,Be.__name__="awe6.core.drivers.createjs.InputMouse",Be.__super__=le,Be.prototype=r(le.prototype,{_driverInit:function(){this._stage=this._kernel._stage,this._isTouch=createjs.Touch.isSupported()&&!this._kernel.system.isDesktop,this._isTouch?(createjs.Touch.enable(this._stage,!0),this._touchX=this._touchY=0,this._stage.canvas.addEventListener("touchstart",oi(this,this._onTouchStart)),this._stage.canvas.addEventListener("touchmove",oi(this,this._onTouch)),this._stage.canvas.addEventListener("touchend",oi(this,this._onTouchEnd))):(this._stage.addEventListener("stagemousedown",oi(this,this._onMouseDown)),this._stage.addEventListener("stagemouseup",oi(this,this._onMouseUp))),window.focus()},_disposer:function(){this._isTouch?(createjs.Touch.disable(this._stage),this._stage.canvas.removeEventListener("touchstart",oi(this,this._onTouchStart)),this._stage.canvas.removeEventListener("touchmove",oi(this,this._onTouch)),this._stage.canvas.removeEventListener("touchend",oi(this,this._onTouchEnd))):(this._stage.removeEventListener("stagemousedown",oi(this,this._onMouseDown)),this._stage.removeEventListener("stagemouseup",oi(this,this._onMouseUp))),le.prototype._disposer.call(this)},_isWithinBounds:function(){return this._stage.mouseInBounds},_getPosition:function(){if(this._isTouch)this.x=this._touchX,this.y=this._touchY;else{var e=this._stage.mouseX/this._stage.scaleX,t=this._kernel.factory.width;this.x=0|(e>t?t:e<0?0:e);e=this._stage.mouseY/this._stage.scaleY,t=this._kernel.factory.height;this.y=0|(e>t?t:e<0?0:e)}this.x=this.x==this._kernel.factory.width?this._xPrev:this.x,this.y=this.y==this._kernel.factory.height?this._yPrev:this.y},_onTouchStart:function(e){this._onMouseDown(e),this._onTouch(e),this.x=this._touchX,this.y=this._touchY},_onTouchEnd:function(e){this._onMouseUp(e),this._onTouch(e),Be._isSoundTriggered||(this._kernel.audio.start("Silence"),Be._isSoundTriggered=!0,this._kernel.isFullScreen&&this._kernel.factory.isNativeExperience&&(this._kernel.system.requestFullScreen(),this._kernel.system.requestLockScreen()))},_onTouch:function(e){try{var t=(e.targetTouches[0].pageX-(0|this._stage.canvas.offsetLeft))/this._kernel._scaleX,s=this._kernel.factory.width;this._touchX=0|(t>s?s:t<0?0:t);t=(e.targetTouches[0].pageY-(0|this._stage.canvas.offsetTop))/this._kernel._scaleY,s=this._kernel.factory.height;this._touchY=0|(t>s?s:t<0?0:t)}catch(e){}this._stage.mouseInBounds&&e.preventDefault()},_onMouseDown:function(e){window.focus(),this.isActive&&(this._isTouch||2!=e.nativeEvent.button)&&this._buffer.push(!0)},_onMouseUp:function(e){this.isActive&&(this._isTouch||2!=e.nativeEvent.button)&&this._buffer.push(!1)},set_isVisible:function(e){return this._stage.cursor=e?"none":"auto",le.prototype.set_isVisible.call(this,e)},set_cursorType:function(e){var t;switch(e._hx_index){case 0:t="crosshair";break;case 1:t="auto";break;case 2:case 3:t="pointer";break;case 4:t="text";break;case 5:t=e.value}return this._stage.canvas.style.cursor=t,le.prototype.set_cursorType.call(this,e)},__class__:Be});var Me=function(e,t){pe.call(this,e,t)};s["awe6.core.drivers.createjs.Kernel"]=Me,Me.__name__="awe6.core.drivers.createjs.Kernel",Me.__super__=pe,Me.prototype=r(pe.prototype,{_driverGetIsLocal:function(){var e;switch(window.location.protocol){case"http:":case"https:":e=!1;break;default:e=!0}return e},_driverInit:function(){this.system=new Ve(this),this._scaleX=this._scaleY=1,this._stage=this._stageDynamic=this._context.getStage(),this._stage.canvas.style.setProperty("-ms-touch-action","none",""),this._stage.canvas.style.setProperty("image-rendering","-o-crisp-edges",""),this._stage.canvas.style.setProperty("image-rendering","optimize-contrast",""),this._stage.canvas.style.setProperty("-ms-interpolation-mode","nearest-neighbor",""),this._stage.canvas.style.setProperty("-webkit-tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("-moz-tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("user-select","none",""),this._stage.canvas.style.setProperty("-webkit-touch-callout","none",""),this._stage.canvas.style.setProperty("-webkit-user-select","none",""),this._stage.canvas.style.setProperty("-moz-user-select","none",""),this._stage.canvas.style.setProperty("-ms-user-select","none",""),this._stage.tickOnUpdate=!1,this._stage.mouseEnabled=!1,this._stage.canvas.width=this.factory.width,this._stage.canvas.height=this.factory.height;var e=new createjs.Shape;e.graphics.beginFill("#"+_.substr(u.hex(this.factory.bgColor,8),2,6)),e.graphics.drawRect(0,0,this.factory.width,this.factory.height),e.graphics.endFill(),this._stage.addChildAt(e,0),createjs.Ticker.setFPS(this.factory.targetFramerate),createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.addEventListener("tick",oi(this,this._onEnterFrame)),this._stage.canvas.addEventListener("contextmenu",oi(this,this._onContextMenu),!1),window.addEventListener("unload",oi(this,this._onUnload))},_onUnload:function(e){window.removeEventListener("unload",oi(this,this._onUnload)),this.get_session().save()},_onContextMenu:function(e){if(e.preventDefault(),e.stopImmediatePropagation(),null!=this.overlay){var s=oi(t=this.overlay,t.activateButton),i=nt.PAUSE;Es.delay(function(){s(i)},100)}},_driverDisposer:function(){this._stage.canvas.removeEventListener("contextmenu",oi(this,this._onContextMenu))},_onEnterFrame:function(e){null!=e.paused&&1==e.paused?this._stage.tickOnUpdate=!1:(this._updates++,this._updater(0),this._stage.tickOnUpdate=this.isActive,this._stageDynamic.update(e));var t=l.string(window.innerWidth)+":"+l.string(window.innerHeight);this._prevWindowSize!=t&&this._driverSetIsFullScreen(this.isFullScreen)},_driverSetIsEyeCandy:function(e){},_driverSetIsFullScreen:function(e){this._prevWindowSize=l.string(window.innerWidth)+":"+l.string(window.innerHeight),this._scaleX=this._scaleY=1;var t=this.factory.width,s=this.factory.height,i=window.innerWidth,n=window.innerHeight,r=t<s,a=i<n;this.system.isRotated=!this.system.isDesktop&&r!=a;var _=0,o=0;if(e){var h=Math.min(i/t,n/s),c=this.factory.fullScreenType;switch(c._hx_index){case 0:case 1:break;case 2:this._scaleX=i/t,this._scaleY=n/s;break;case 3:this._scaleX=this._scaleY=h;break;case 4:h=h<.5?.25:h<1?.5:Math.floor(h),this._scaleX=this._scaleY=h;break;case 5:var u=c.value;if(null!=u.bleedWidth&&null!=u.bleedHeight){var d=t-2*l.parseInt(l.string(u.bleedWidth)+""),p=s-2*l.parseInt(l.string(u.bleedHeight)+""),g=Math.min(i/d,n/p);this._scaleX=this._scaleY=g}}_=Math.round((i-t*this._scaleX)/2),o=Math.round((n-s*this._scaleY)/2)}this._stage.canvas.style.setProperty("width",Math.round(t*this._scaleX)+"px",""),this._stage.canvas.style.setProperty("height",Math.round(s*this._scaleY)+"px",""),this._stage.canvas.style.setProperty("margin-left",_+"px",""),this._stage.canvas.style.setProperty("margin-top",o+"px","")},__class__:Me});var Ue=function(e,t,s,i,n,r,a,_,o,h,l,c,u,d,p,g,f){me.call(this,e,t,s,i,n,r,a,_,o,h,l,c,u,d,p,g,f)};s["awe6.core.drivers.createjs.Overlay"]=Ue,Ue.__name__="awe6.core.drivers.createjs.Overlay",Ue.__super__=me,Ue.prototype=r(me.prototype,{_driverInit:function(){zs.__cast(this._borderView,ze).context.mouseEnabled=!1,this._context.mouseEnabled=!1,this._pauseContext=new createjs.Container,this._pauseContext.mouseEnabled=!1;var e=new createjs.Shape;e.graphics.beginFill("#"+u.hex(this._pauseColor,6)),e.graphics.drawRect(0,0,this._kernel.factory.width,this._kernel.factory.height),e.alpha=this._pauseAlpha,this._pauseContext.addChild(e),this._flashContext=new createjs.Container,this._flashContext.mouseEnabled=!1},_updater:function(e){null==e&&(e=0),me.prototype._updater.call(this,e),this._flashContext.alpha=this._flashAlpha,this._flashContext.visible=0!=this._flashAlpha},flash:function(e,t,s,i){null==i&&(i=16777215),null==s&&(s=1),null==t&&(t=!0),this._flashContext.removeAllChildren();var n=new createjs.Shape;n.graphics.beginFill("#"+u.hex(i,6)),n.graphics.drawRect(0,0,this._kernel.factory.width,this._kernel.factory.height),this._flashContext.addChild(n),null==e&&(e=t?500:.5*this._kernel.factory.targetFramerate),this._flashDuration=this._flashStartingDuration=e,this._flashAsTime=t,this._flashAlpha=this._flashStartingAlpha=s>1?1:s<0?0:s},__class__:Ue});var Le=function(e,t,s){Ee.call(this,e,t,s)};s["awe6.core.drivers.createjs.Preloader"]=Le,Le.__name__="awe6.core.drivers.createjs.Preloader",Le.__super__=Ee,Le.prototype=r(Ee.prototype,{_init:function(){this._context=new createjs.Container,this.view=new ze(this._kernel,this._context),Ee.prototype._init.call(this),this._system=this._kernel.system,this._isDesktop=this._system.isDesktop,this._audioHoldDelay=0,this._completedDelay=0;var e=this._isDecached?"?dc="+l.random(999999):"",s=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"];null!=this._proprietaryAudioFormat&&""!=this._proprietaryAudioFormat&&o.has(s,this._proprietaryAudioFormat)||(this._proprietaryAudioFormat="mp3");var i=[];if(this._manifest=[],createjs.Sound.initializeDefaultPlugins()){this._audioHoldDelay=this._getAudioHoldDelay();var n=this._isSoundDisabled||this._system.isAndroid&&this._getIsStockAndroidBrowser();this._validSoundFormat=createjs.Sound.getCapability("ogg")?"ogg":createjs.Sound.getCapability(this._proprietaryAudioFormat)?this._proprietaryAudioFormat:"noValidFormat",this._activePlugin=createjs.Sound.activePlugin;for(var r=0,a=this._assets;r<a.length;){var h=a[r];++r;var c=_.substr(h,-3,null);if(o.has(s,c)&&(i.push(h),!n&&c==this._validSoundFormat)){var u="assets.audio."+_.substr(h.split("/").pop(),0,-4);this._isFastTestMode||this._manifest.push({src:h+e,id:u})}}}for(r=0;r<i.length;){h=i[r];++r,_.remove(this._assets,h)}for(r=0,a=this._assets;r<a.length;){h=a[r];++r,this._manifest.push({src:h+e,id:h})}this._loadQueue=new createjs.LoadQueue(!this._kernel.isLocal&&!this._isFastTestMode,""),this._loadQueue.setMaxConnections(10),this._loadQueue.installPlugin(createjs.Sound),this._manifest=this._tools.shuffle(this._manifest),this._loadQueue.addEventListener("complete",oi(this,this._onComplete)),this._loadQueue.addEventListener("fileerror",oi(this,this._onError)),this._loadQueue.addEventListener("error",oi(this,this._onError));r=oi(t=this._loadQueue,t.loadManifest);var d=this._manifest;Es.delay(function(){r(d)},200)},_next:function(){},get_progress:function(){return this._loadQueue.progress},_onComplete:function(e){this._isComplete||(this._isComplete=!0,Re.loadQueue=this._loadQueue,this._completedDelay=this._audioHoldDelay,this._loadQueue.removeEventListener("complete",oi(this,this._onComplete)),this._loadQueue.removeEventListener("fileerror",oi(this,this._onError)),this._loadQueue.removeEventListener("error",oi(this,this._onError)),0!=this._audioHoldDelay&&this._showAudioHoldMessage())},_onError:function(e){ms.trace([e,e.title,e.message,e.data],{fileName:"awe6/core/drivers/createjs/Preloader.hx",lineNumber:148,className:"awe6.core.drivers.createjs.Preloader",methodName:"_onError"})},_showAudioHoldMessage:function(){},_updater:function(e){null==e&&(e=0),Ee.prototype._updater.call(this,e),this._isComplete&&(this._completedDelay-=e,(this._audioHoldDelay>=0&&this._completedDelay<=0||this._kernel.inputs.keyboard.getIsKeyRelease(this._kernel.factory.keyNext)||this._kernel.inputs.mouse.getIsButtonRelease())&&(this._assets=[]))},_getIsStockAndroidBrowser:function(){var e=this._system.userAgent.indexOf("Android")>-1&&this._system.userAgent.indexOf("Mozilla/5.0")>-1&&this._system.userAgent.indexOf("AppleWebKit")>-1,t=new a("AppleWebKit/([\\d.]+)",""),s=t.match(this._system.userAgent),i=s?parseFloat(t.matched(1)):0,n=new a("Chrome/([\\d.]+)",""),r=n.match(this._system.userAgent),_=r?parseFloat(n.matched(1)):0;return!!e&&(!!(s&&i<537)||!!r&&_<37)},_getAudioHoldDelay:function(){if(this._isSoundDisabled)return 0;try{if("[WebAudioPlugin]"!=createjs.Sound.activePlugin||"suspended"!=createjs.Sound.activePlugin.context.state)return 0}catch(e){}var e=-1;Object.prototype.hasOwnProperty.call(this._kernel.factory.config.h,"settings.audioHoldDelay")&&(e=l.parseInt(this._kernel.factory.config.h["settings.audioHoldDelay"]));try{var t=this._kernel.factory._context.getStage().canvas.getAttribute("audioHoldDelay");null!=t&&""!=t&&(e=l.parseInt(t))}catch(e){}return e},__class__:Le});var Fe=function(e){xe.call(this,e)};s["awe6.core.drivers.createjs.Profiler"]=Fe,Fe.__name__="awe6.core.drivers.createjs.Profiler",Fe.__super__=xe,Fe.prototype=r(xe.prototype,{_init:function(){xe.prototype._init.call(this),this._isMemoryEnabled=null!=window.performance&&null!=window.performance.memory,this._width=75,this._height=24,this._marginHeight=12;var e=new createjs.Shape;this._context.addChild(e),e.alpha=.25,this._isMemoryEnabled&&(e.graphics.beginFill("#"+u.hex(this._backgroundColor,6)),e.graphics.drawRect(0,0,this._width,this._height),e.graphics.endFill()),e.graphics.beginFill("#"+u.hex(this._marginColor,6)),e.graphics.drawRect(0,0,this._width,this._marginHeight),e.graphics.endFill(),e.cache(0,0,this._width,this._height),this._fpsTextField=new createjs.Text("","","#"+u.hex(this._fpsColor,6)),this._context.addChild(this._fpsTextField),this._isMemoryEnabled&&(this._memoryTextField=new createjs.Text("","","#"+u.hex(this._memoryColor,6)),this._memoryTextField.y=12,this._context.addChild(this._memoryTextField))},_driverUpdate:function(){var e=0|this._kernel.getFramerate(!0);Math.min(this._height,this._height/this._kernel.factory.targetFramerate*e);if(this._fpsTextField.text=this._fpsLabel+": "+e+" / "+this._kernel.factory.targetFramerate,this._isMemoryEnabled&&this._updates%this._kernel.factory.targetFramerate==0){var t=Math.round(window.performance.memory.usedJSHeapSize/1024/1024),s=Math.round(window.performance.memory.jsHeapSizeLimit/1024/1024);this._memoryTextField.text=this._memoryLabel+": "+t+" / "+s}},__class__:Fe});var Ye=function(e,t){Se.call(this,e,t)};s["awe6.core.drivers.createjs.SceneTransition"]=Ye,Ye.__name__="awe6.core.drivers.createjs.SceneTransition",Ye.__super__=Se,Ye.prototype=r(Se.prototype,{_init:function(){Se.prototype._init.call(this),this._kernel.scenes.get_scene().get_view().context.cache(0,0,this._kernel.factory.width,this._kernel.factory.height);var e=new createjs.Bitmap(this._kernel.scenes.get_scene().get_view().context.cacheCanvas);this._kernel.scenes.get_scene().get_view().context.uncache(),this._context.mouseEnabled=!1,this._context.addChild(e)},_updater:function(e){if(null==e&&(e=0),Se.prototype._updater.call(this,e),!this.isDisposed){var t=this.get_progress();this._context.alpha=1-t}},__class__:Ye});var He=function(e,t){ke.call(this,e,t)};s["awe6.core.drivers.createjs.Session"]=He,He.__name__="awe6.core.drivers.createjs.Session",He.__super__=ke,He.prototype=r(ke.prototype,{_init:function(){var e=!0;null!=this._kernel.getConfig("settings.sessionSaved")&&(e="false"!=this._kernel.getConfig("settings.sessionSaved")),this._storage=e?js.getLocalStorage():js.getSessionStorage(),ke.prototype._init.call(this)},_driverLoad:function(){if(this._savedData={},null!=window.document.cookie&&Gs.exists(this._kernel.factory.id)&&(this._savedData=this._tools.unserialize(Gs.get(this._kernel.factory.id)),this._driverSave(),Gs.remove(this._kernel.factory.id)),null!=this._storage)try{var e=this._storage.getItem(this._kernel.factory.id);null!=e&&(this._savedData=this._tools.unserialize(e))}catch(e){}},_driverReset:function(){if(null!=this._storage)try{this._storage.removeItem(this._kernel.factory.id)}catch(e){}this._savedData={}},_driverSave:function(){if(null!=this._storage)try{this._storage.setItem(this._kernel.factory.id,this._tools.serialize(this._savedData))}catch(e){}},__class__:He});var Ve=function(t){this._kernel=t,this.isRotated=!1,this.isAndroid=this.isChromeOs=this.isIos=this.isLinux=this.isMacOs=this.isSilk=this.isWindows=this.isWindowsPhone=this.isDesktop=!1,this.userAgent=e.navigator.userAgent,this.isSilk=new a("Silk","").match(this.userAgent),this.isKaiOs=new a("KAIOS","").match(this.userAgent),this.isCrosswalk=new a("Crosswalk","").match(this.userAgent),this.isCordova=null!=window.cordova,new a("Android","").match(this.userAgent)?this.isAndroid=!0:new a("CrOS","").match(this.userAgent)?this.isChromeOs=!0:new a("iP[ao]d|iPhone","i").match(this.userAgent)?this.isIos=!0:new a("Linux","").match(this.userAgent)?this.isLinux=!0:new a("Mac OS","").match(this.userAgent)?this.isMacOs=!0:new a("Windows","").match(this.userAgent)&&(this.isWindows=!0,new a("Windows Phone","i").match(this.userAgent)&&(this.isWindowsPhone=!0)),(this.isWindows||this.isMacOs||this.isLinux&&!this.isSilk)&&(this.isDesktop=!0),this.isWindowsPhone&&(this.isDesktop=!1)};s["awe6.core.drivers.createjs.System"]=Ve,Ve.__name__="awe6.core.drivers.createjs.System",Ve.prototype={get_isWebGL:function(){return!1},get_isFullScreenSupported:function(){try{var e=window.document.documentElement;if(null!=e.requestFullscreen)return!0;if(null!=e.msRequestFullscreen)return!0;if(null!=e.mozRequestFullScreen)return!0;if(null!=e.webkitRequestFullscreen)return!0}catch(e){}return!1},requestFullScreen:function(){try{var e=window.document.documentElement;null!=e.requestFullscreen?e.requestFullscreen():null!=e.msRequestFullscreen?e.msRequestFullscreen():null!=e.mozRequestFullScreen?e.mozRequestFullScreen():null!=e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}catch(e){}},requestExitFullScreen:function(){try{var e=window.document;null!=e.exitFullscreen?e.exitFullscreen():null!=e.msExitFullscreen?e.msExitFullscreen():null!=e.mozCancelFullScreen?e.mozCancelFullScreen():null!=e.webkitExitFullscreen&&e.webkitExitFullscreen()}catch(e){}},requestLockScreen:function(){if(!this.isDesktop)try{var e=this._kernel.factory.width<this._kernel.factory.height?"portrait-primary":"landscape-primary",t=window.screen;null!=t.orientation?null!=t.orientation.lock?t.orientation.lock(e):null!=t.orientation.lockOrientation&&t.orientation.lockOrientation(e):null!=t.mozOrientation?t.mozLockOrientation(e):null!=t.msOrientation&&t.msLockOrientation(e)}catch(e){}},requestDeviceOrientation:function(){if(!this.isDesktop)try{null!=window.DeviceMotionEvent&&null!=window.DeviceMotionEvent.requestPermission&&window.DeviceMotionEvent.requestPermission()}catch(e){}},__class__:Ve,__properties__:{get_isFullScreenSupported:"get_isFullScreenSupported",get_isWebGL:"get_isWebGL"}};var ze=function(e,t,s,i){Ie.call(this,e,t,s,i)};s["awe6.core.drivers.createjs.View"]=ze,ze.__name__="awe6.core.drivers.createjs.View",ze.__super__=Ie,ze.prototype=r(Ie.prototype,{_init:function(){null==this.context&&(this.context=new createjs.Container),Ie.prototype._init.call(this)},_driverDisposer:function(){if(null!=this.context&&null!=this.context.parent)try{this.context.parent.removeChild(this.context)}catch(e){}},_driverDraw:function(){null!=this._container&&null!=this._container.parent&&this._container.parent.removeChild(this._container),this._container=new createjs.Container,this._container.mouseEnabled=!1,this.context.addChild(this._container);for(var e=this._children,t=0;t<e.length;){var s=e[t];++t,s.isVisible&&this._container.addChild(s.context)}},set_x:function(e){return this.context.x=e,Ie.prototype.set_x.call(this,e)},set_y:function(e){return this.context.y=e,Ie.prototype.set_y.call(this,e)},__class__:ze});var je=function(e,t,s,i){if(null==i&&(i=!0),null==s&&(s=100),null==t&&(t=100),this.isFlippedX=!1,this.isFlippedY=!1,this.width=t,this.height=s,this._context=new createjs.Container,this.setPosition(0,0),i){var n=new createjs.Shape;n.graphics.beginFill("#FF0000"),n.graphics.drawRect(0,0,this.width,this.height),n.graphics.endFill(),n.visible=!1,this._context.addChild(n),this._context.mask=n}k.call(this,e,null,this._context)};s["awe6.core.drivers.createjs.extras.gui.GuiEntity"]=je,je.__name__="awe6.core.drivers.createjs.extras.gui.GuiEntity",je.__interfaces__=[T],je.__super__=k,je.prototype=r(k.prototype,{setPosition:function(e,t){this.set_x(e),this.set_y(t)},set_x:function(e){return this.x=e,this._context.x=this.x,this.x},set_y:function(e){return this.y=e,this._context.y=this.y,this.y},__class__:je,__properties__:r(k.prototype.__properties__,{set_y:"set_y",set_x:"set_x"})});var Ge=function(e,t,s,i,n,r,a){null==a&&(a=!1),null==r&&(r=!1),null==i&&(i=""),this.textStyle=n,this._isMultiline=r,this._isCached=a,je.call(this,e,t,s,!1),this.set_text(i)};s["awe6.core.drivers.createjs.extras.gui.Text"]=Ge,Ge.__name__="awe6.core.drivers.createjs.extras.gui.Text",Ge.__super__=je,Ge.prototype=r(je.prototype,{_init:function(){je.prototype._init.call(this),this._textField=new createjs.Text,this._textField.text=this.text,this._draw(),this._context.addChild(this._textField),this._isDirty=!1,this._prevTextStyle=this.textStyle.toString()},_updater:function(e){null==e&&(e=0),je.prototype._updater.call(this,e),this._isDirty=this._isDirty||this._prevTextStyle!=this.textStyle.toString(),this._isDirty&&this._draw(),this._prevTextStyle=this.textStyle.toString()},_draw:function(){if(this._textField.lineWidth=this.width,this._prevTextStyle!=this.textStyle.toString()){switch(this.textStyle.align._hx_index){case 0:case 1:this._textField.textAlign="left";break;case 2:this._textField.textAlign="center",this._textField.x=.5*this.width;break;case 3:this._textField.textAlign="right",this._textField.x=this.width}var e=u.hex(this.textStyle.color,6);if(this._textField.color="#"+e,this._textField.font=(this.textStyle.isBold?"bold ":"")+(this.textStyle.isItalic?"italic ":"")+this.textStyle.size+"px '"+this.textStyle.font+"'",this._textField.lineHeight=this.textStyle.spacingVertical,null!=this.textStyle.filters){var t=this._textField;t.shadow=null;var s=this.textStyle.filters.slice();if(null!=this._textFieldOutline&&null!=this._textFieldOutline.parent&&this._textFieldOutline.parent.removeChild(this._textFieldOutline),this._textFieldOutline=null,2==s.length||6==s.length){this._textFieldOutline=this._textField.clone();e=u.hex(s.shift(),6);this._textFieldOutline.color="#"+e;e=s.shift();this._textFieldOutline.outline=2*e,this._context.addChildAt(this._textFieldOutline,0),t=this._textFieldOutline}4==s.length&&(t.shadow=new createjs.Shadow("#"+u.hex(s[0],6),s[1],s[2],s[3]))}}this._isCached&&this._context.cache(0,0,this.width,this.height),this._isDirty=!1},set_text:function(e){return null==e&&(e=""),this.text==e?this.text:(this.text=e,this._textField.text=this.text,null!=this._textFieldOutline&&(this._textFieldOutline.text=this.text),this._isDirty=!0,this.text)},__class__:Ge,__properties__:r(je.prototype.__properties__,{set_text:"set_text"})});var Ke=function(e,t,s,i){Ie.call(this,e,t,s,i)};s["awe6.core.drivers.flash.View"]=Ke,Ke.__name__="awe6.core.drivers.flash.View",Ke.__super__=Ie,Ke.prototype=r(Ie.prototype,{_init:function(){null==this.context&&(this.context=new createjs.Container),Ie.prototype._init.call(this)},_driverDisposer:function(){null!=this.context.parent&&this.context.parent.removeChild(this.context)},_driverDraw:function(){null!=this._container&&null!=this._container.parent&&this._container.parent.removeChild(this._container),this._container=new createjs.Container,this._container.mouseEnabled=!1,this.context.addChild(this._container);for(var e=this._children,t=0;t<e.length;){var s=e[t];++t,s.isVisible&&this._container.addChild(s.context)}},set_x:function(e){return this.context.x=e,Ie.prototype.set_x.call(this,e)},set_y:function(e){return this.context.y=e,Ie.prototype.set_y.call(this,e)},__class__:Ke});var We=function(e,t,s){null==s&&(s=1e3),this._callbackFunction=t,this._duration=s,k.call(this,e)};s["awe6.extras.Delay"]=We,We.__name__="awe6.extras.Delay",We.__super__=k,We.prototype=r(k.prototype,{_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e),this._duration-=e,this._duration<=0&&(null!=this._callbackFunction&&this._callbackFunction(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:We});var Xe=function(e,t,s,i,n,r,a,_,o,h,l){null==h&&(h=!1),null==o&&(o=!1),null==_&&(_=!1),null==s&&(s=1e3),null==t&&(t=0),this._delay=t,this._duration=s,this._object=i,this._field=n,this._originalValue=r,this._newValue=a,this._isRelative=_,this._isEaseIn=o,this._isEaseOut=h,this._callback=l,this._prevProgress=0,k.call(this,e),this._updater()};s["awe6.extras.Easer"]=Xe,Xe.__name__="awe6.extras.Easer",Xe.__super__=k,Xe.prototype=r(k.prototype,{_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e);var t=(this._age-this._delay)/this._duration,s=t>1?1:t<0?0:t;if(this._isEaseIn&&(s=1-Math.cos(.5*s*Math.PI)),this._isEaseOut&&(s=Math.sin(.5*s*Math.PI)),s>=.99999&&(s=1),this._isRelative){var i=this._prevProgress,n=this._originalValue*(1-i)+this._newValue*i,r=this._originalValue*(1-s)+this._newValue*s-n;h.setProperty(this._object,this._field,h.getProperty(this._object,this._field)+r)}else h.setProperty(this._object,this._field,this._originalValue*(1-s)+this._newValue*s);this._prevProgress=s,1==s&&(null!=this._callback&&this._callback(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:Xe});var Qe=n["awe6.interfaces.EAgenda"]={__ename__:"awe6.interfaces.EAgenda",__constructs__:["ALWAYS","BIRTH","DEATH","STANDARD","ATTACK","DEFEND","SUB_TYPE"],ALWAYS:{_hx_index:0,__enum__:"awe6.interfaces.EAgenda",toString:i},BIRTH:{_hx_index:1,__enum__:"awe6.interfaces.EAgenda",toString:i},DEATH:{_hx_index:2,__enum__:"awe6.interfaces.EAgenda",toString:i},STANDARD:{_hx_index:3,__enum__:"awe6.interfaces.EAgenda",toString:i},ATTACK:{_hx_index:4,__enum__:"awe6.interfaces.EAgenda",toString:i},DEFEND:{_hx_index:5,__enum__:"awe6.interfaces.EAgenda",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:6,value:e,__enum__:"awe6.interfaces.EAgenda",toString:i}},t.__params__=["value"],t)},Je=n["awe6.interfaces.EAudioChannel"]={__ename__:"awe6.interfaces.EAudioChannel",__constructs__:["DEFAULT","EFFECTS","INTERFACE","MUSIC","SUB_TYPE"],DEFAULT:{_hx_index:0,__enum__:"awe6.interfaces.EAudioChannel",toString:i},EFFECTS:{_hx_index:1,__enum__:"awe6.interfaces.EAudioChannel",toString:i},INTERFACE:{_hx_index:2,__enum__:"awe6.interfaces.EAudioChannel",toString:i},MUSIC:{_hx_index:3,__enum__:"awe6.interfaces.EAudioChannel",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:4,value:e,__enum__:"awe6.interfaces.EAudioChannel",toString:i}},t.__params__=["value"],t)},Ze=n["awe6.interfaces.EFullScreen"]={__ename__:"awe6.interfaces.EFullScreen",__constructs__:["DISABLED","NO_SCALE","SCALE_ASPECT_RATIO_IGNORE","SCALE_ASPECT_RATIO_PRESERVE","SCALE_NEAREST_MULTIPLE","SUB_TYPE"],DISABLED:{_hx_index:0,__enum__:"awe6.interfaces.EFullScreen",toString:i},NO_SCALE:{_hx_index:1,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_ASPECT_RATIO_IGNORE:{_hx_index:2,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_ASPECT_RATIO_PRESERVE:{_hx_index:3,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_NEAREST_MULTIPLE:{_hx_index:4,__enum__:"awe6.interfaces.EFullScreen",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EFullScreen",toString:i}},t.__params__=["value"],t)},qe=n["awe6.interfaces.EJoypadButton"]={__ename__:"awe6.interfaces.EJoypadButton",__constructs__:["FIRE","UP","RIGHT","DOWN","LEFT","PRIMARY","SECONDARY"],FIRE:{_hx_index:0,__enum__:"awe6.interfaces.EJoypadButton",toString:i},UP:{_hx_index:1,__enum__:"awe6.interfaces.EJoypadButton",toString:i},RIGHT:{_hx_index:2,__enum__:"awe6.interfaces.EJoypadButton",toString:i},DOWN:{_hx_index:3,__enum__:"awe6.interfaces.EJoypadButton",toString:i},LEFT:{_hx_index:4,__enum__:"awe6.interfaces.EJoypadButton",toString:i},PRIMARY:{_hx_index:5,__enum__:"awe6.interfaces.EJoypadButton",toString:i},SECONDARY:{_hx_index:6,__enum__:"awe6.interfaces.EJoypadButton",toString:i}},$e=n["awe6.interfaces.EJoypadTouch"]={__ename__:"awe6.interfaces.EJoypadTouch",__constructs__:["DISABLED","DPAD","JOYSTICK","SWIPE"],DISABLED:{_hx_index:0,__enum__:"awe6.interfaces.EJoypadTouch",toString:i},DPAD:{_hx_index:1,__enum__:"awe6.interfaces.EJoypadTouch",toString:i},JOYSTICK:(t=function(e){return{_hx_index:2,distance:e,__enum__:"awe6.interfaces.EJoypadTouch",toString:i}},t.__params__=["distance"],t),SWIPE:(t=function(e){return{_hx_index:3,speed:e,__enum__:"awe6.interfaces.EJoypadTouch",toString:i}},t.__params__=["speed"],t)},et=n["awe6.interfaces.EKey"]={__ename__:"awe6.interfaces.EKey",__constructs__:["NUM_LOCK","CLEAR","HELP","ALT","BACKSPACE","CAPS_LOCK","CONTROL","DELETE","DOWN","END","ENTER","ESCAPE","F1","F10","F11","F12","F13","F14","F15","F2","F3","F4","F5","F6","F7","F8","F9","HOME","INSERT","LEFT","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","NUMPAD_ADD","NUMPAD_DECIMAL","NUMPAD_DIVIDE","NUMPAD_ENTER","NUMPAD_MULTIPLY","NUMPAD_SUBTRACT","PAGE_DOWN","PAGE_UP","RIGHT","SHIFT","SPACE","TAB","UP","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NUMBER_0","NUMBER_1","NUMBER_2","NUMBER_3","NUMBER_4","NUMBER_5","NUMBER_6","NUMBER_7","NUMBER_8","NUMBER_9","COLON","EQUALS","HYPHEN","SLASH","TILDE","SQUARELEFT","SQUARERIGHT","BACKSLASH","APOSTROPHE","TOPLEFT","SUB_TYPE"],NUM_LOCK:{_hx_index:0,__enum__:"awe6.interfaces.EKey",toString:i},CLEAR:{_hx_index:1,__enum__:"awe6.interfaces.EKey",toString:i},HELP:{_hx_index:2,__enum__:"awe6.interfaces.EKey",toString:i},ALT:{_hx_index:3,__enum__:"awe6.interfaces.EKey",toString:i},BACKSPACE:{_hx_index:4,__enum__:"awe6.interfaces.EKey",toString:i},CAPS_LOCK:{_hx_index:5,__enum__:"awe6.interfaces.EKey",toString:i},CONTROL:{_hx_index:6,__enum__:"awe6.interfaces.EKey",toString:i},DELETE:{_hx_index:7,__enum__:"awe6.interfaces.EKey",toString:i},DOWN:{_hx_index:8,__enum__:"awe6.interfaces.EKey",toString:i},END:{_hx_index:9,__enum__:"awe6.interfaces.EKey",toString:i},ENTER:{_hx_index:10,__enum__:"awe6.interfaces.EKey",toString:i},ESCAPE:{_hx_index:11,__enum__:"awe6.interfaces.EKey",toString:i},F1:{_hx_index:12,__enum__:"awe6.interfaces.EKey",toString:i},F10:{_hx_index:13,__enum__:"awe6.interfaces.EKey",toString:i},F11:{_hx_index:14,__enum__:"awe6.interfaces.EKey",toString:i},F12:{_hx_index:15,__enum__:"awe6.interfaces.EKey",toString:i},F13:{_hx_index:16,__enum__:"awe6.interfaces.EKey",toString:i},F14:{_hx_index:17,__enum__:"awe6.interfaces.EKey",toString:i},F15:{_hx_index:18,__enum__:"awe6.interfaces.EKey",toString:i},F2:{_hx_index:19,__enum__:"awe6.interfaces.EKey",toString:i},F3:{_hx_index:20,__enum__:"awe6.interfaces.EKey",toString:i},F4:{_hx_index:21,__enum__:"awe6.interfaces.EKey",toString:i},F5:{_hx_index:22,__enum__:"awe6.interfaces.EKey",toString:i},F6:{_hx_index:23,__enum__:"awe6.interfaces.EKey",toString:i},F7:{_hx_index:24,__enum__:"awe6.interfaces.EKey",toString:i},F8:{_hx_index:25,__enum__:"awe6.interfaces.EKey",toString:i},F9:{_hx_index:26,__enum__:"awe6.interfaces.EKey",toString:i},HOME:{_hx_index:27,__enum__:"awe6.interfaces.EKey",toString:i},INSERT:{_hx_index:28,__enum__:"awe6.interfaces.EKey",toString:i},LEFT:{_hx_index:29,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_0:{_hx_index:30,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_1:{_hx_index:31,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_2:{_hx_index:32,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_3:{_hx_index:33,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_4:{_hx_index:34,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_5:{_hx_index:35,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_6:{_hx_index:36,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_7:{_hx_index:37,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_8:{_hx_index:38,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_9:{_hx_index:39,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_ADD:{_hx_index:40,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_DECIMAL:{_hx_index:41,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_DIVIDE:{_hx_index:42,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_ENTER:{_hx_index:43,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_MULTIPLY:{_hx_index:44,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_SUBTRACT:{_hx_index:45,__enum__:"awe6.interfaces.EKey",toString:i},PAGE_DOWN:{_hx_index:46,__enum__:"awe6.interfaces.EKey",toString:i},PAGE_UP:{_hx_index:47,__enum__:"awe6.interfaces.EKey",toString:i},RIGHT:{_hx_index:48,__enum__:"awe6.interfaces.EKey",toString:i},SHIFT:{_hx_index:49,__enum__:"awe6.interfaces.EKey",toString:i},SPACE:{_hx_index:50,__enum__:"awe6.interfaces.EKey",toString:i},TAB:{_hx_index:51,__enum__:"awe6.interfaces.EKey",toString:i},UP:{_hx_index:52,__enum__:"awe6.interfaces.EKey",toString:i},A:{_hx_index:53,__enum__:"awe6.interfaces.EKey",toString:i},B:{_hx_index:54,__enum__:"awe6.interfaces.EKey",toString:i},C:{_hx_index:55,__enum__:"awe6.interfaces.EKey",toString:i},D:{_hx_index:56,__enum__:"awe6.interfaces.EKey",toString:i},E:{_hx_index:57,__enum__:"awe6.interfaces.EKey",toString:i},F:{_hx_index:58,__enum__:"awe6.interfaces.EKey",toString:i},G:{_hx_index:59,__enum__:"awe6.interfaces.EKey",toString:i},H:{_hx_index:60,__enum__:"awe6.interfaces.EKey",toString:i},I:{_hx_index:61,__enum__:"awe6.interfaces.EKey",toString:i},J:{_hx_index:62,__enum__:"awe6.interfaces.EKey",toString:i},K:{_hx_index:63,__enum__:"awe6.interfaces.EKey",toString:i},L:{_hx_index:64,__enum__:"awe6.interfaces.EKey",toString:i},M:{_hx_index:65,__enum__:"awe6.interfaces.EKey",toString:i},N:{_hx_index:66,__enum__:"awe6.interfaces.EKey",toString:i},O:{_hx_index:67,__enum__:"awe6.interfaces.EKey",toString:i},P:{_hx_index:68,__enum__:"awe6.interfaces.EKey",toString:i},Q:{_hx_index:69,__enum__:"awe6.interfaces.EKey",toString:i},R:{_hx_index:70,__enum__:"awe6.interfaces.EKey",toString:i},S:{_hx_index:71,__enum__:"awe6.interfaces.EKey",toString:i},T:{_hx_index:72,__enum__:"awe6.interfaces.EKey",toString:i},U:{_hx_index:73,__enum__:"awe6.interfaces.EKey",toString:i},V:{_hx_index:74,__enum__:"awe6.interfaces.EKey",toString:i},W:{_hx_index:75,__enum__:"awe6.interfaces.EKey",toString:i},X:{_hx_index:76,__enum__:"awe6.interfaces.EKey",toString:i},Y:{_hx_index:77,__enum__:"awe6.interfaces.EKey",toString:i},Z:{_hx_index:78,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_0:{_hx_index:79,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_1:{_hx_index:80,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_2:{_hx_index:81,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_3:{_hx_index:82,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_4:{_hx_index:83,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_5:{_hx_index:84,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_6:{_hx_index:85,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_7:{_hx_index:86,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_8:{_hx_index:87,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_9:{_hx_index:88,__enum__:"awe6.interfaces.EKey",toString:i},COLON:{_hx_index:89,__enum__:"awe6.interfaces.EKey",toString:i},EQUALS:{_hx_index:90,__enum__:"awe6.interfaces.EKey",toString:i},HYPHEN:{_hx_index:91,__enum__:"awe6.interfaces.EKey",toString:i},SLASH:{_hx_index:92,__enum__:"awe6.interfaces.EKey",toString:i},TILDE:{_hx_index:93,__enum__:"awe6.interfaces.EKey",toString:i},SQUARELEFT:{_hx_index:94,__enum__:"awe6.interfaces.EKey",toString:i},SQUARERIGHT:{_hx_index:95,__enum__:"awe6.interfaces.EKey",toString:i},BACKSLASH:{_hx_index:96,__enum__:"awe6.interfaces.EKey",toString:i},APOSTROPHE:{_hx_index:97,__enum__:"awe6.interfaces.EKey",toString:i},TOPLEFT:{_hx_index:98,__enum__:"awe6.interfaces.EKey",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:99,value:e,__enum__:"awe6.interfaces.EKey",toString:i}},t.__params__=["value"],t)},tt=n["awe6.interfaces.EMessage"]={__ename__:"awe6.interfaces.EMessage",__constructs__:["DISPOSE","INIT","PAUSE","RESUME","SUB_TYPE"],DISPOSE:{_hx_index:0,__enum__:"awe6.interfaces.EMessage",toString:i},INIT:{_hx_index:1,__enum__:"awe6.interfaces.EMessage",toString:i},PAUSE:{_hx_index:2,__enum__:"awe6.interfaces.EMessage",toString:i},RESUME:{_hx_index:3,__enum__:"awe6.interfaces.EMessage",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:4,value:e,__enum__:"awe6.interfaces.EMessage",toString:i}},t.__params__=["value"],t)},st=n["awe6.interfaces.EMouseButton"]={__ename__:"awe6.interfaces.EMouseButton",__constructs__:["LEFT","MIDDLE","RIGHT"],LEFT:{_hx_index:0,__enum__:"awe6.interfaces.EMouseButton",toString:i},MIDDLE:{_hx_index:1,__enum__:"awe6.interfaces.EMouseButton",toString:i},RIGHT:{_hx_index:2,__enum__:"awe6.interfaces.EMouseButton",toString:i}},it=n["awe6.interfaces.EMouseCursor"]={__ename__:"awe6.interfaces.EMouseCursor",__constructs__:["ARROW","AUTO","BUTTON","HAND","IBEAM","SUB_TYPE"],ARROW:{_hx_index:0,__enum__:"awe6.interfaces.EMouseCursor",toString:i},AUTO:{_hx_index:1,__enum__:"awe6.interfaces.EMouseCursor",toString:i},BUTTON:{_hx_index:2,__enum__:"awe6.interfaces.EMouseCursor",toString:i},HAND:{_hx_index:3,__enum__:"awe6.interfaces.EMouseCursor",toString:i},IBEAM:{_hx_index:4,__enum__:"awe6.interfaces.EMouseCursor",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EMouseCursor",toString:i}},t.__params__=["value"],t)},nt=n["awe6.interfaces.EOverlayButton"]={__ename__:"awe6.interfaces.EOverlayButton",__constructs__:["BACK","MUTE","UNMUTE","PAUSE","UNPAUSE","SUB_TYPE"],BACK:{_hx_index:0,__enum__:"awe6.interfaces.EOverlayButton",toString:i},MUTE:{_hx_index:1,__enum__:"awe6.interfaces.EOverlayButton",toString:i},UNMUTE:{_hx_index:2,__enum__:"awe6.interfaces.EOverlayButton",toString:i},PAUSE:{_hx_index:3,__enum__:"awe6.interfaces.EOverlayButton",toString:i},UNPAUSE:{_hx_index:4,__enum__:"awe6.interfaces.EOverlayButton",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EOverlayButton",toString:i}},t.__params__=["value"],t)},rt=n["awe6.interfaces.EScene"]={__ename__:"awe6.interfaces.EScene",__constructs__:["SPLASH","INTRO","SELECT_SESSION","SELECT_STORY","SELECT_LEVEL","INSTRUCTIONS","SETTINGS","MENU","AVATAR","SHOP","REWARDS","LEADERBOARD","GAME","INTERSTITIAL","CINEMATIC","RESULTS","EXIT","TEST","SUB_TYPE"],SPLASH:{_hx_index:0,__enum__:"awe6.interfaces.EScene",toString:i},INTRO:{_hx_index:1,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_SESSION:{_hx_index:2,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_STORY:{_hx_index:3,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_LEVEL:{_hx_index:4,__enum__:"awe6.interfaces.EScene",toString:i},INSTRUCTIONS:{_hx_index:5,__enum__:"awe6.interfaces.EScene",toString:i},SETTINGS:{_hx_index:6,__enum__:"awe6.interfaces.EScene",toString:i},MENU:{_hx_index:7,__enum__:"awe6.interfaces.EScene",toString:i},AVATAR:{_hx_index:8,__enum__:"awe6.interfaces.EScene",toString:i},SHOP:{_hx_index:9,__enum__:"awe6.interfaces.EScene",toString:i},REWARDS:{_hx_index:10,__enum__:"awe6.interfaces.EScene",toString:i},LEADERBOARD:{_hx_index:11,__enum__:"awe6.interfaces.EScene",toString:i},GAME:{_hx_index:12,__enum__:"awe6.interfaces.EScene",toString:i},INTERSTITIAL:{_hx_index:13,__enum__:"awe6.interfaces.EScene",toString:i},CINEMATIC:{_hx_index:14,__enum__:"awe6.interfaces.EScene",toString:i},RESULTS:{_hx_index:15,__enum__:"awe6.interfaces.EScene",toString:i},EXIT:{_hx_index:16,__enum__:"awe6.interfaces.EScene",toString:i},TEST:{_hx_index:17,__enum__:"awe6.interfaces.EScene",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:18,value:e,__enum__:"awe6.interfaces.EScene",toString:i}},t.__params__=["value"],t)},at=n["awe6.interfaces.ETextAlign"]={__ename__:"awe6.interfaces.ETextAlign",__constructs__:["JUSTIFY","LEFT","CENTER","RIGHT"],JUSTIFY:{_hx_index:0,__enum__:"awe6.interfaces.ETextAlign",toString:i},LEFT:{_hx_index:1,__enum__:"awe6.interfaces.ETextAlign",toString:i},CENTER:{_hx_index:2,__enum__:"awe6.interfaces.ETextAlign",toString:i},RIGHT:{_hx_index:3,__enum__:"awe6.interfaces.ETextAlign",toString:i}},_t=n["awe6.interfaces.ETextStyle"]={__ename__:"awe6.interfaces.ETextStyle",__constructs__:["BUTTON","BODY","HEADLINE","SUBHEAD","SMALLPRINT","OVERSIZED","SUB_TYPE"],BUTTON:{_hx_index:0,__enum__:"awe6.interfaces.ETextStyle",toString:i},BODY:{_hx_index:1,__enum__:"awe6.interfaces.ETextStyle",toString:i},HEADLINE:{_hx_index:2,__enum__:"awe6.interfaces.ETextStyle",toString:i},SUBHEAD:{_hx_index:3,__enum__:"awe6.interfaces.ETextStyle",toString:i},SMALLPRINT:{_hx_index:4,__enum__:"awe6.interfaces.ETextStyle",toString:i},OVERSIZED:{_hx_index:5,__enum__:"awe6.interfaces.ETextStyle",toString:i},SUB_TYPE:(t=function(e){return{_hx_index:6,value:e,__enum__:"awe6.interfaces.ETextStyle",toString:i}},t.__params__=["value"],t)},ot=function(e){this._context=new createjs.Container,this._session=e.get_session(),this._assets=e.assets,this._factory=e.factory,this._system=e.system,this._context.mouseChildren=!1,this._context.mouseEnabled=!1,k.call(this,e,null,this._context)};s["b10gph.AEntity"]=ot,ot.__name__="b10gph.AEntity",ot.__super__=k,ot.prototype=r(k.prototype,{__class__:ot});var ht=function(e){this._kernel=e,this._tools=this._kernel.tools,this._session=this._kernel.get_session(),this._assets=this._kernel.assets,this._factory=e.factory};s["b10gph.AVo"]=ht,ht.__name__="b10gph.AVo",ht.prototype={__class__:ht};var lt=function(e){Re.call(this,e)};s["b10gph.AssetManager"]=lt,lt.__name__="b10gph.AssetManager",lt.__super__=Re,lt.prototype=r(Re.prototype,{_init:function(){Re.prototype._init.call(this),this._factory=this._kernel.factory,this.overlayPauseUp=this._createView(ct.OVERLAY_PAUSE_UP),this.overlayPauseOver=this._createView(ct.OVERLAY_PAUSE_OVER)},get_buttonOver:function(){return this._createView(ct.BUTTON_OVER)},get_buttonUp:function(){return this._createView(ct.BUTTON_UP)},get_buttonTwitterOver:function(){return this._createView(ct.BUTTON_TWITTER_OVER)},get_buttonTwitterUp:function(){return this._createView(ct.BUTTON_TWITTER_UP)},get_buttonFacebookOver:function(){return this._createView(ct.BUTTON_FACEBOOK_OVER)},get_buttonFacebookUp:function(){return this._createView(ct.BUTTON_FACEBOOK_UP)},get_buttonSmallOver:function(){return this._createView(ct.BUTTON_SMALL_OVER)},get_buttonSmallUp:function(){return this._createView(ct.BUTTON_SMALL_UP)},_createView:function(e){var t,s=new createjs.Container,i=new createjs.Bitmap(this.getAsset("assets/gui/Buttons.png"));switch(e._hx_index){case 0:t=new createjs.Rectangle(0,0,200,65);break;case 1:t=new createjs.Rectangle(200,0,200,65);break;case 2:t=new createjs.Rectangle(400,65,100,30);break;case 3:t=new createjs.Rectangle(400,95,100,30);break;case 4:t=new createjs.Rectangle(0,65,65,65);break;case 5:t=new createjs.Rectangle(65,65,65,65);break;case 6:t=new createjs.Rectangle(130,65,65,65);break;case 7:t=new createjs.Rectangle(195,65,65,65);break;case 8:t=new createjs.Rectangle(400,0,50,50);break;case 9:t=new createjs.Rectangle(450,0,50,50)}return i.sourceRect=t,i.cache(0,0,i.sourceRect.width,i.sourceRect.height),s.addChild(i),new ze(this._kernel,s)},__class__:lt,__properties__:r(Re.prototype.__properties__,{get_buttonFacebookUp:"get_buttonFacebookUp",get_buttonFacebookOver:"get_buttonFacebookOver",get_buttonTwitterUp:"get_buttonTwitterUp",get_buttonTwitterOver:"get_buttonTwitterOver",get_buttonSmallUp:"get_buttonSmallUp",get_buttonSmallOver:"get_buttonSmallOver",get_buttonUp:"get_buttonUp",get_buttonOver:"get_buttonOver"})});var ct=n["b10gph.EAsset"]={__ename__:"b10gph.EAsset",__constructs__:["BUTTON_UP","BUTTON_OVER","BUTTON_SMALL_UP","BUTTON_SMALL_OVER","BUTTON_TWITTER_UP","BUTTON_TWITTER_OVER","BUTTON_FACEBOOK_UP","BUTTON_FACEBOOK_OVER","OVERLAY_PAUSE_UP","OVERLAY_PAUSE_OVER"],BUTTON_UP:{_hx_index:0,__enum__:"b10gph.EAsset",toString:i},BUTTON_OVER:{_hx_index:1,__enum__:"b10gph.EAsset",toString:i},BUTTON_SMALL_UP:{_hx_index:2,__enum__:"b10gph.EAsset",toString:i},BUTTON_SMALL_OVER:{_hx_index:3,__enum__:"b10gph.EAsset",toString:i},BUTTON_TWITTER_UP:{_hx_index:4,__enum__:"b10gph.EAsset",toString:i},BUTTON_TWITTER_OVER:{_hx_index:5,__enum__:"b10gph.EAsset",toString:i},BUTTON_FACEBOOK_UP:{_hx_index:6,__enum__:"b10gph.EAsset",toString:i},BUTTON_FACEBOOK_OVER:{_hx_index:7,__enum__:"b10gph.EAsset",toString:i},OVERLAY_PAUSE_UP:{_hx_index:8,__enum__:"b10gph.EAsset",toString:i},OVERLAY_PAUSE_OVER:{_hx_index:9,__enum__:"b10gph.EAsset",toString:i}},ut=function(e,t,s){this.COLOR_GREY=5789784,this.COLOR_WHITE=16777215,this.TEXTSTYLE_HUD_COINS=_t.SUB_TYPE("HUD_COINS"),this.TEXTSTYLE_HUD_SCORE=_t.SUB_TYPE("HUD_SCORE"),this.TEXTSTYLE_HUD_MESSAGE=_t.SUB_TYPE("HUD_MESSAGE"),this.MESSAGE_FINISH_LINE=tt.SUB_TYPE("FINISH_LINE"),Ne.call(this,e,t,s)};s["b10gph.Factory"]=ut,ut.__name__="b10gph.Factory",ut.__super__=Ne,ut.prototype=r(Ne.prototype,{_configurer:function(e){if(null==e&&(e=!1),e){this.id="b10gph";var t="1";null!=ws.getString("revision")&&(t=ws.getString("revision").split("\r\n")[0]),this.version="1.2."+t+"-pok",this.author="b10b.com",this.isDecached=!1,this.width=720,this.height=405,this.joypadTouchType=$e.JOYSTICK(30),this.bgColor=1644825,this.startingSceneType=rt.INTRO,this.targetFramerate=30,this.isFixedUpdates=!0}},_launchKernel:function(){Ne.prototype._launchKernel.call(this),this._kernel.set_session(this.createSession("defaultSessionId")),"true"==this._kernel.getConfig("settings.disableEyeCandy")&&this._kernel.set_isEyeCandy(!1)},createAssetManager:function(){return null==this._assets&&(this._assets=new lt(this._kernel)),this._assets},createLogger:function(){var e=l.string(this._kernel.getConfig("settings.googleAnalytics.id"));return""!=e?new dt(this._kernel,e):Ne.prototype.createLogger.call(this)},createOverlay:function(){return new qt(this._kernel)},createPreloader:function(){return new gt(this._kernel,this._getAssetUrls(),this.isDecached)},createScene:function(e){switch(this._kernel.log("scene: "+l.string(e)),e._hx_index){case 1:return new ls(this._kernel,e);case 4:return new ps(this._kernel,e);case 5:return new os(this._kernel,e);case 7:return new cs(this._kernel,e);case 9:return new gs(this._kernel,e);case 12:return new _s(this._kernel,e);case 13:return new hs(this._kernel,e);case 15:return new us(this._kernel,e)}return Ne.prototype.createScene.call(this,e)},createSceneTransition:function(e,t){return new ds(this._kernel)},createSession:function(e){return new ft(this._kernel,e)},createTextStyle:function(e){null==e&&(e=_t.BODY);var t,s=this._kernel.getConfig("settings.font.name");if(null==e)t=new X(s,12,8421504);else switch(e._hx_index){case 0:t=new X(s,20,this.COLOR_WHITE,!1,!0,at.CENTER,100,0,0,[]);break;case 1:t=new X(s,16,this.COLOR_WHITE,!1,!0,at.LEFT,0,18,0,[]);break;case 2:t=new X(s,24,this.COLOR_WHITE,!1,!0,at.LEFT,0,0,0,[]);break;case 3:t=new X(s,18,this.COLOR_WHITE,!1,!0,at.LEFT,0,20,0,[]);break;case 4:t=new X(s,11,this.COLOR_GREY,!1,!0,at.LEFT,0,0,0,[]);break;case 5:t=new X(s,24,this.COLOR_WHITE,!1,!0,at.RIGHT,0,0,0,[]);break;case 6:switch(e.value){case"HUD_COINS":t=new X(s,24,this.COLOR_WHITE,!1,!0,at.RIGHT,0,0,0,[]);break;case"HUD_MESSAGE":t=new X(s,30,this.COLOR_WHITE,!1,!0,at.CENTER,0,0,0,[]);break;case"HUD_SCORE":t=new X(s,24,this.COLOR_WHITE,!1,!0,at.LEFT,0,0,0,[]);break;case"PRELOADER":t=new X(s,14,this.COLOR_WHITE,!1,!0,at.CENTER,0,0,0,[0,2,2,0]);break;default:t=null}}return t},getBackSceneType:function(e){switch(e._hx_index){case 4:case 5:case 9:case 12:case 13:case 15:return rt.MENU}return Ne.prototype.getBackSceneType.call(this,e)},getNextSceneType:function(e){switch(e._hx_index){case 1:return rt.MENU;case 4:return rt.GAME;case 5:case 7:case 9:return rt.SELECT_LEVEL;case 12:return rt.RESULTS;case 13:case 15:return rt.SHOP}return Ne.prototype.getNextSceneType.call(this,e)},createCanvas:function(e,t){var s=window.document.createElement("canvas");return s.width=e,s.height=t,s},__class__:ut});var dt=function(e,t){if(this._kernel=e,this._id=t,this._factory=this._kernel.factory,this._isTrackerEnabled=!e.isLocal&&"true"==e.getConfig("settings.googleAnalytics.enabled"),this._isTrackerEnabled)try{this._gaLib=ga,this._gaLib("create",this._id,"auto"),this._gaLib("send","pageview"),ms.trace("Google Analytics enabled with property ID "+this._id,{fileName:"src/b10gph/LoggerGoogleAnalytics.hx",lineNumber:40,className:"b10gph.LoggerGoogleAnalytics",methodName:"new"})}catch(e){this._isTrackerEnabled=!1,ms.trace("Google Analytics failed with property ID "+this._id,{fileName:"src/b10gph/LoggerGoogleAnalytics.hx",lineNumber:45,className:"b10gph.LoggerGoogleAnalytics",methodName:"new"})}};s["b10gph.LoggerGoogleAnalytics"]=dt,dt.__name__="b10gph.LoggerGoogleAnalytics",dt.__interfaces__=[ue],dt.prototype={log:function(e){_.substr(l.string(e),0,25);var t=l.string(e).split(": ");this._isTrackerEnabled?this._gaLib("send",{hitType:"event",eventCategory:t[0],eventAction:t[1],eventLabel:t[2]}):ms.trace("Logger:"+l.string([t[0],t[1],t[2]]),{fileName:"src/b10gph/LoggerGoogleAnalytics.hx",lineNumber:65,className:"b10gph.LoggerGoogleAnalytics",methodName:"log"})},__class__:dt};var pt=function(){};s["b10gph.Main"]=pt,pt.__name__="b10gph.Main",pt.main=function(){var e=window.document.getElementById("gameCanvas"),t=pt.getParams().h.lang;if(null!=t){var s="assets/__Config_"+t+".xml";e.setAttribute("config",s)}var i=new createjs.Stage(e),n=new createjs.Container;i.addChild(n),pt.factory=new ut(n,!1,ws.getString("config"))},pt.getParams=function(){for(var t=_.substr(e.location.search,1,null),s=new Bs,i=0,n=new a("[&;]","g").split(t);i<n.length;){var r=n[i];++i;var o=r.split("=");if(!(o.length<2)){var h=o.shift(),l=decodeURIComponent(h.split("+").join(" ")),c=o.join("="),u=decodeURIComponent(c.split("+").join(" "));s.h[l]=u}}return s};var gt=function(e,t,s){Le.call(this,e,t,s)};s["b10gph.Preloader"]=gt,gt.__name__="b10gph.Preloader",gt.__super__=Le,gt.prototype=r(Le.prototype,{_init:function(){this._factory=this._kernel.factory,this._session=this._kernel.get_session(),this._proprietaryAudioFormat="m4a";var e=new createjs.Bitmap("assets/__PreloaderFg.png"),t=new createjs.Bitmap("assets/__PreloaderBg.png");Le.prototype._init.call(this);var s=this._kernel.factory.width-40;this._bg=new createjs.Shape,this._bg.graphics.beginFill("#ffffff"),this._bg.graphics.drawRoundRect(-2,-2,s+2+2,14,4),this._bg.graphics.endFill(),this._fg=new createjs.Shape,this._fg.graphics.beginFill("#cd040b"),this._fg.graphics.drawRoundRect(0,0,s,10,4),this._fg.graphics.endFill(),this._bg.x=this._fg.x=.5*(this._kernel.factory.width-s),this._bg.y=this._fg.y=this._kernel.factory.height-20-10-2,this._context.addChild(t),this._context.addChild(e),this._context.addChild(this._bg),this._context.addChild(this._fg),this._session.get_poki().loadingStart()},_updater:function(e){null==e&&(e=0),Le.prototype._updater.call(this,e),this._fg.scaleX=this.get_progress()},_showAudioHoldMessage:function(){var e=new ss(this._kernel,this._kernel.factory.width,20,l.string(this._kernel.getConfig("gui.audioHoldMessage")).toUpperCase(),this._kernel.factory.createTextStyle(_t.SUB_TYPE("PRELOADER")));e.setPosition(0,this._bg.y-10),this.get_view().addChild(e.get_view()),this._context.removeChild(this._bg),this._context.removeChild(this._fg)},_onComplete:function(e){this._session.get_poki().loadingStop(),Le.prototype._onComplete.call(this,e)},__class__:gt});var ft=function(e,t){He.call(this,e,t)};s["b10gph.Session"]=ft,ft.__name__="b10gph.Session",ft.__super__=He,ft.prototype=r(He.prototype,{get_poki:function(){return ft._poki},_init:function(){this._version=1,He.prototype._init.call(this)},_getter:function(){He.prototype._getter.call(this),this.level=this._getValidatedInteger(this._data.level),this.upgradeSpeed=this._getValidatedInteger(this._data.upgradeSpeed),this.upgradeSteering=this._getValidatedInteger(this._data.upgradeSteering),this.upgradeAcceleration=this._getValidatedInteger(this._data.upgradeAcceleration),this.upgradeBoost=this._getValidatedInteger(this._data.upgradeBoost),this.scoreLevel0=this._getValidatedInteger(this._data.scoreLevel0),this.scoreLevel1=this._getValidatedInteger(this._data.scoreLevel1),this.scoreLevel2=this._getValidatedInteger(this._data.scoreLevel2),this.scoreLevel3=this._getValidatedInteger(this._data.scoreLevel3),this.highScore=this._getValidatedInteger(this._data.highScore),this.coins=this._getValidatedInteger(this._data.coins)},_getValidatedInteger:function(e){return null==e||isNaN(e)?0:e},_setter:function(){He.prototype._setter.call(this),this._data.level=this.level,this._data.upgradeSpeed=this.upgradeSpeed,this._data.upgradeSteering=this.upgradeSteering,this._data.upgradeAcceleration=this.upgradeAcceleration,this._data.upgradeBoost=this.upgradeBoost,this._data.scoreLevel0=this.scoreLevel0,this._data.scoreLevel1=this.scoreLevel1,this._data.scoreLevel2=this.scoreLevel2,this._data.scoreLevel3=this.scoreLevel3,this._data.highScore=this.highScore,this._data.coins=this.coins},_resetter:function(){He.prototype._resetter.call(this),this.cache=new yt(this._kernel),null==ft._poki&&(ft._poki=new mt(this._kernel)),this.level=0|this._tools.limit(l.parseInt(this._kernel.getConfig("settings.startingLevel")),0,3),this.highScore=0,this.upgradeSpeed=0,this.upgradeSteering=0,this.upgradeAcceleration=0,this.upgradeBoost=0,this.coins=0,this.resetGame()},resetGame:function(){this.scoreLevel0=0,this.scoreLevel1=0,this.scoreLevel2=0,this.scoreLevel3=0},setScore:function(e,t){switch(e){case 0:this.scoreLevel0=t;break;case 1:this.scoreLevel1=t;break;case 2:this.scoreLevel2=t;break;case 3:this.scoreLevel3=t;break;default:this.scoreLevel3=t}},getScore:function(e){switch(e){case 0:return this.scoreLevel0;case 1:return this.scoreLevel1;case 2:return this.scoreLevel2;case 3:default:return this.scoreLevel3}},setUpgrade:function(e,t){switch(t<0&&(t=0),t>4&&(t=4),e._hx_index){case 0:this.upgradeSpeed=t;break;case 1:this.upgradeSteering=t;break;case 2:this.upgradeAcceleration=t;break;case 3:this.upgradeBoost=t}},getUpgrade:function(e){switch(e._hx_index){case 0:return this.upgradeSpeed;case 1:return this.upgradeSteering;case 2:return this.upgradeAcceleration;case 3:return this.upgradeBoost}},getUpgradeBias:function(e,t,s){var i=s-t;return t+this.getUpgrade(e)/4*i},setIsTester:function(e){this._isTester=e},get_isTester:function(){return!!this._kernel.isDebug||this._isTester},getPercentageComplete:function(){return(this.upgradeSpeed+this.upgradeSteering+this.upgradeAcceleration+this.upgradeBoost)/16},__class__:ft,__properties__:{get_poki:"get_poki"}});var yt=function(e){this._kernel=e,this.totalPlays=0,this.benchmark=0,this.debugMessage=""};s["b10gph._Session._HelperCache"]=yt,yt.__name__="b10gph._Session._HelperCache",yt.prototype={__class__:yt};var mt=function(e){this._wasMute=!1,this.isEnabled=!1,this._kernel=e;try{this._sdk=window.PokiSDK,null!=this._sdk&&(this._sdk.init(),this._sdk.setDebug(!1),this.isEnabled=!0)}catch(e){var t=ys.caught(e).unwrap();this.isEnabled=!1,ms.trace(t,{fileName:"src/b10gph/Session.hx",lineNumber:228,className:"b10gph._Session._HelperPoki",methodName:"new"})}ms.trace("Poki SDK is "+(this.isEnabled?"enabled":"disabled"),{fileName:"src/b10gph/Session.hx",lineNumber:230,className:"b10gph._Session._HelperPoki",methodName:"new"})};s["b10gph._Session._HelperPoki"]=mt,mt.__name__="b10gph._Session._HelperPoki",mt.prototype={loadingStart:function(){ms.trace("loadingStart",{fileName:"src/b10gph/Session.hx",lineNumber:235,className:"b10gph._Session._HelperPoki",methodName:"loadingStart"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameLoadingStart&&this._sdk.gameLoadingStart()},loadingStop:function(){ms.trace("loadingStop",{fileName:"src/b10gph/Session.hx",lineNumber:243,className:"b10gph._Session._HelperPoki",methodName:"loadingStop"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameLoadingFinished&&this._sdk.gameLoadingFinished()},gameplayStart:function(){ms.trace("gameplayStart",{fileName:"src/b10gph/Session.hx",lineNumber:251,className:"b10gph._Session._HelperPoki",methodName:"gameplayStart"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameplayStart&&this._sdk.gameplayStart()},gameplayStop:function(){ms.trace("gameplayStop",{fileName:"src/b10gph/Session.hx",lineNumber:259,className:"b10gph._Session._HelperPoki",methodName:"gameplayStop"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameplayStop&&this._sdk.gameplayStop()},happyTime:function(e){ms.trace("happyTime",{fileName:"src/b10gph/Session.hx",lineNumber:267,className:"b10gph._Session._HelperPoki",methodName:"happyTime"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.happyTime&&this._sdk.happyTime(e)},commercialBreak:function(e){var t=this;if(ms.trace("commercialBreak",{fileName:"src/b10gph/Session.hx",lineNumber:275,className:"b10gph._Session._HelperPoki",methodName:"commercialBreak"}),this.isEnabled)if(null!=this._sdk&&null!=this._sdk.commercialBreak){this._wasMute=this._kernel.audio.isMute,this._kernel.audio.set_isMute(!0),createjs.Ticker.setPaused(!0),ms.trace("Commercial break starting",{fileName:"src/b10gph/Session.hx",lineNumber:281,className:"b10gph._Session._HelperPoki",methodName:"commercialBreak"});var s=function(){t._kernel.audio.set_isMute(t._wasMute),createjs.Ticker.setPaused(!1),null!=e&&e()};this._sdk.commercialBreak().then(function(e){ms.trace("Commercial break finished, proceeding to game",{fileName:"src/b10gph/Session.hx",lineNumber:291,className:"b10gph._Session._HelperPoki",methodName:"commercialBreak"}),s()}).catch(function(e){ms.trace("Commercial break FAILED, proceeding to game",{fileName:"src/b10gph/Session.hx",lineNumber:296,className:"b10gph._Session._HelperPoki",methodName:"commercialBreak"}),s()})}else e();else e()},__class__:mt};var wt=function(e,t){this._trackLength=t,ot.call(this,e)};s["b10gph.game.Camera"]=wt,wt.__name__="b10gph.game.Camera",wt.__super__=ot,wt.prototype=r(ot.prototype,{_init:function(){ot.prototype._init.call(this),this.drawDistance=80,this.fieldOfView=120,this.fogDensity=5,this.height=1440,this.depth=1/Math.tan(this.fieldOfView/2*Math.PI/180),this.position=0,this.angle=.135},_updater:function(e){null==e&&(e=0),ot.prototype._updater.call(this,e),1==this._updates&&(this.height=5e3),this.height=.95*this.height+72|0},increasePosition:function(e,t){null==t&&(t=0),null==e&&(e=0),this.position+=e;this._tools;var s,i=this.angle+t,n=i;s=n-1*Math.floor(n/1),this.angle=s},__class__:wt});var vt=function(e,t,s,i){this.type=e,this.offset=t,this.z=s,this.speed=i,this.percent=0,this.steer=0};s["b10gph.game.Car"]=vt,vt.__name__="b10gph.game.Car",vt.prototype={__class__:vt};var Et=function(t){if(this._kernel=t,this.isEnabled=!1,this.motionRelative=0,this._parentOrientation="",this._isIos=new a("iP[ao]d|iPhone","i").match(e.navigator.userAgent),this._isWindows=new a("Windows","").match(e.navigator.userAgent),this._isOrientationApproximation="true"==this._kernel.getConfig("settings.orientationApproximation"),"true"!=this._kernel.getConfig("settings.disableDeviceMotion"))try{this._orientation=this._getOrientation(),window.MessageEvent&&window.addEventListener("message",oi(this,this._onMessage),!1),window.DeviceMotionEvent&&window.addEventListener("devicemotion",oi(this,this._onDeviceMotion),!1),this.isEnabled=!0}catch(e){this.isEnabled=!1}};s["b10gph.game.DeviceMotion"]=Et,Et.__name__="b10gph.game.DeviceMotion",Et.prototype={dispose:function(){this.isEnabled=!1;try{window.MessageEvent&&window.removeEventListener("message",oi(this,this._onMessage),!1),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",oi(this,this._onDeviceMotion),!1)}catch(e){}},_onMessage:function(e){null!=e.data.orientation&&(this._parentOrientation=e.data.orientation)},_onDeviceMotion:function(e){this._orientation=this._getOrientation(),this.motionRelative=0,"landscape"==this._orientation||"landscape-primary"==this._orientation||"90"==this._orientation?(this.motionRelative=e.accelerationIncludingGravity.y,this._isWindows&&(this.motionRelative=-e.accelerationIncludingGravity.x)):"landscape-secondary"==this._orientation||"-90"==this._orientation?(this.motionRelative=-e.accelerationIncludingGravity.y,this._isWindows&&(this.motionRelative=e.accelerationIncludingGravity.x)):"portrait"==this._orientation||"portrait-primary"==this._orientation||"0"==this._orientation?(this.motionRelative=-e.accelerationIncludingGravity.x,this._isWindows&&(this.motionRelative=-e.accelerationIncludingGravity.y)):"portrait-secondary"==this._orientation||"180"==this._orientation?(this.motionRelative=e.accelerationIncludingGravity.x,this._isWindows&&(this.motionRelative=e.accelerationIncludingGravity.y)):this.motionRelative=-e.accelerationIncludingGravity.y,this.motionRelative=Math.max(Math.min(this.motionRelative/3,1),-1)*(this._isIos?-1:1)},_getOrientation:function(){var e="";return""==(e=this._getWindowOrientation(window.top))&&(e=""!=this._parentOrientation?this._parentOrientation:this._isOrientationApproximation?window.innerWidth>window.innerHeight?"90":"0":this._getWindowOrientation(window)),e},_getWindowOrientation:function(e){var t="";try{null!=e.screen.orientation?(t=e.screen.orientation,null!=e.screen.orientation.type&&(t=e.screen.orientation.type)):null!=e.screen.mozOrientation?t=e.screen.mozOrientation:null!=e.screen.msOrientation?t=e.screen.msOrientation:null!=e.orientation&&(t=e.orientation)}catch(e){}return t},__class__:Et};var xt=n["b10gph.game.ECar"]={__ename__:"b10gph.game.ECar",__constructs__:["CAR_A","CAR_B","CAR_C","CAR_D","CAR_E"],CAR_A:{_hx_index:0,__enum__:"b10gph.game.ECar",toString:i},CAR_B:{_hx_index:1,__enum__:"b10gph.game.ECar",toString:i},CAR_C:{_hx_index:2,__enum__:"b10gph.game.ECar",toString:i},CAR_D:{_hx_index:3,__enum__:"b10gph.game.ECar",toString:i},CAR_E:{_hx_index:4,__enum__:"b10gph.game.ECar",toString:i}},bt=n["b10gph.game.EColor"]={__ename__:"b10gph.game.EColor",__constructs__:["COLOR_FOG","COLOR_LIGHT","COLOR_DARK","COLOR_START","COLOR_FINISH"],COLOR_FOG:{_hx_index:0,__enum__:"b10gph.game.EColor",toString:i},COLOR_LIGHT:{_hx_index:1,__enum__:"b10gph.game.EColor",toString:i},COLOR_DARK:{_hx_index:2,__enum__:"b10gph.game.EColor",toString:i},COLOR_START:{_hx_index:3,__enum__:"b10gph.game.EColor",toString:i},COLOR_FINISH:{_hx_index:4,__enum__:"b10gph.game.EColor",toString:i}},St=n["b10gph.game.ELocation"]={__ename__:"b10gph.game.ELocation",__constructs__:["LOCATION_A","LOCATION_B","LOCATION_C","LOCATION_D"],LOCATION_A:{_hx_index:0,__enum__:"b10gph.game.ELocation",toString:i},LOCATION_B:{_hx_index:1,__enum__:"b10gph.game.ELocation",toString:i},LOCATION_C:{_hx_index:2,__enum__:"b10gph.game.ELocation",toString:i},LOCATION_D:{_hx_index:3,__enum__:"b10gph.game.ELocation",toString:i}},Ct=n["b10gph.game.ERoad"]={__ename__:"b10gph.game.ERoad",__constructs__:["ROAD_NONE","ROAD_LEFT_SHORT","ROAD_LEFT_MEDIUM","ROAD_LEFT_LONG","ROAD_RIGHT_SHORT","ROAD_RIGHT_MEDIUM","ROAD_RIGHT_LONG"],ROAD_NONE:{_hx_index:0,__enum__:"b10gph.game.ERoad",toString:i},ROAD_LEFT_SHORT:{_hx_index:1,__enum__:"b10gph.game.ERoad",toString:i},ROAD_LEFT_MEDIUM:{_hx_index:2,__enum__:"b10gph.game.ERoad",toString:i},ROAD_LEFT_LONG:{_hx_index:3,__enum__:"b10gph.game.ERoad",toString:i},ROAD_RIGHT_SHORT:{_hx_index:4,__enum__:"b10gph.game.ERoad",toString:i},ROAD_RIGHT_MEDIUM:{_hx_index:5,__enum__:"b10gph.game.ERoad",toString:i},ROAD_RIGHT_LONG:{_hx_index:6,__enum__:"b10gph.game.ERoad",toString:i}},kt=n["b10gph.game.EScenery"]={__ename__:"b10gph.game.EScenery",__constructs__:["SCENERY_COIN","SCENERY_AFTERBURNER","SCENERY_TIRE_1","SCENERY_TIRE_2","SCENERY_BOOST","SCENERY_TREE_1","SCENERY_TREE_2","SCENERY_TREE_3","SCENERY_TREE_4","SCENERY_TREE_5","SCENERY_TREE_6","SCENERY_TREE_7","SCENERY_TREE_8","SCENERY_FLOODLIGHT","SCENERY_TUNNEL_LEFT","SCENERY_TUNNEL_RIGHT","SCENERY_FINISH_LEFT","SCENERY_FINISH_RIGHT","SCENERY_SIDING_LEFT","SCENERY_SIDING_RIGHT","SCENERY_STADIUM_LEFT","SCENERY_STADIUM_RIGHT"],SCENERY_COIN:{_hx_index:0,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_AFTERBURNER:{_hx_index:1,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TIRE_1:{_hx_index:2,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TIRE_2:{_hx_index:3,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_BOOST:{_hx_index:4,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_1:{_hx_index:5,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_2:{_hx_index:6,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_3:{_hx_index:7,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_4:{_hx_index:8,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_5:{_hx_index:9,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_6:{_hx_index:10,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_7:{_hx_index:11,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TREE_8:{_hx_index:12,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_FLOODLIGHT:{_hx_index:13,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TUNNEL_LEFT:{_hx_index:14,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_TUNNEL_RIGHT:{_hx_index:15,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_FINISH_LEFT:{_hx_index:16,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_FINISH_RIGHT:{_hx_index:17,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_SIDING_LEFT:{_hx_index:18,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_SIDING_RIGHT:{_hx_index:19,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_STADIUM_LEFT:{_hx_index:20,__enum__:"b10gph.game.EScenery",toString:i},SCENERY_STADIUM_RIGHT:{_hx_index:21,__enum__:"b10gph.game.EScenery",toString:i}},Tt=n["b10gph.game.EUpgrade"]={__ename__:"b10gph.game.EUpgrade",__constructs__:["UPGRADE_SPEED","UPGRADE_STEERING","UPGRADE_ACCELERATION","UPGRADE_BOOST"],UPGRADE_SPEED:{_hx_index:0,__enum__:"b10gph.game.EUpgrade",toString:i},UPGRADE_STEERING:{_hx_index:1,__enum__:"b10gph.game.EUpgrade",toString:i},UPGRADE_ACCELERATION:{_hx_index:2,__enum__:"b10gph.game.EUpgrade",toString:i},UPGRADE_BOOST:{_hx_index:3,__enum__:"b10gph.game.EUpgrade",toString:i}},At=function(e,t,s,i){null==i&&(i=1),this._kernel=e,this._width=t,this._height=s,this._brightness=i,this._x=0,this._y=0,this._dirtAlpha=0,this._hyp=1.75*Math.sqrt(this._width*this._width+this._height*this._height),this._lenses=[];for(var n=[.75,0,.25,.35,.55,.65,.75,.9,1],r=0,a=n.length;r<a;){var _=r++,o={deviation:n[_],sprite:this._getSprite(_)};this._lenses.push(o)}var h=new createjs.Bitmap(this._kernel.assets.getAsset("assets/location/LensFlares.jpg"));this._spriteSource=h.image;h=new createjs.Bitmap(this._kernel.assets.getAsset("assets/location/LensDirt.jpg"));this._dirtSource=h.image};s["b10gph.game.Lensflare"]=At,At.__name__="b10gph.game.Lensflare",At.prototype={_getSprite:function(e){var t,s={x:0,y:0,w:256,h:256,isFlip:!1};switch(e){case 1:case 5:t=256;break;case 2:case 6:t=512;break;case 3:case 7:t=768;break;case 0:case 4:t=0;break;default:t=0}switch(s.x=t,e){case 4:case 5:case 6:case 7:t=256;break;default:t=0}return s.y=t,s},draw:function(e,t,s){this._x=(t+512)%1024,this._y=s;var i=2*(this._x-.5*this._width),n=2*(this._y-.5*this._height),r=Math.sqrt(i*i+n*n)/this._hyp,a=this._brightness-2.5*r*this._brightness;if(a>.25&&(a=.25),a<0&&(a=0),e.save(),e.globalCompositeOperation="lighter",a>0){e.globalAlpha=a;for(var _=0,o=this._lenses;_<o.length;){var h=o[_];++_;var l=Math.round(this._x+Math.round(h.deviation*-i)-128),c=Math.round(this._y+Math.round(.9*h.deviation*-n)-128);e.drawImage(this._spriteSource,h.sprite.x,h.sprite.y,h.sprite.w,h.sprite.h,l,c,256,256)}}this._dirtAlpha=.5*this._dirtAlpha+.5*a,e.globalAlpha=this._dirtAlpha,e.drawImage(this._dirtSource,0,0,this._dirtSource.width,this._dirtSource.height,0,0,this._width,this._height),e.restore()},__class__:At};var It=function(e,t){this.type=t,ot.call(this,e)};s["b10gph.game.Location"]=It,It.__name__="b10gph.game.Location",It.__super__=ot,It.prototype=r(ot.prototype,{_init:function(){ot.prototype._init.call(this),this.vo=new Rt(this._kernel,this.type),this.addEntity(this._track=new Ut(this._kernel,this.vo)),this.addEntity(this._camera=new wt(this._kernel,this._track.totalDistance)),this.addEntity(this._player=new Dt(this._kernel,this._track,this._camera));var e=.0013*(this._session.cache.benchmark-200)+.6,t=e>1?1:e<.6?.6:e,s=Math.ceil(this._factory.width*t),i=Math.ceil(this._factory.height*t);this.addEntity(this._renderer=new Nt(this._kernel,this._track,this._camera,this._player,s,i),null,!0),this._renderer._context.scaleX=this._factory.width/s,this._renderer._context.scaleY=this._factory.height/i},getScore:function(){return this._player.score+1},getCars:function(){for(var e=[],t=0,s=this._track.cars;t<s.length;){var i=s[t];++t,e.push({type:i.type,position:i.z/(this._track.maxSegments*this._track.segmentDistance),offset:i.offset})}return e.push({type:xt.CAR_A,position:this._camera.position/(this._track.maxSegments*this._track.segmentDistance),offset:this._player.x}),e},__class__:It});var Rt=function(e,t){ht.call(this,e),this.type=t,this.imageHorizon=this._getImageHorizon(),this.imageRoad=this._getImageRoad(),this.bgColor=this._getBgColor(),this.trees=this._getTrees(),this.sidingDistance=this._getSidingDistance(),this.isBowl=!1,this.title=this._getTitle(),this.altTitle=this._getAltTitle()};s["b10gph.game.LocationVo"]=Rt,Rt.__name__="b10gph.game.LocationVo",Rt.__super__=ht,Rt.prototype=r(ht.prototype,{_getImageHorizon:function(){var e;switch(this.type._hx_index){case 0:e="assets/location/HorizonA.jpg";break;case 1:e="assets/location/HorizonB.jpg";break;case 2:e="assets/location/HorizonC.jpg";break;case 3:e="assets/location/HorizonD.jpg"}return this._assets.getAsset(e)},_getImageRoad:function(){var e;switch(this.type._hx_index){case 0:e="assets/location/RoadA.jpg";break;case 1:e="assets/location/RoadB.jpg";break;case 2:e="assets/location/RoadC.jpg";break;case 3:e="assets/location/RoadD.jpg"}return this._assets.getAsset(e)},_getBgColor:function(){switch(this.type._hx_index){case 0:return"#537341";case 1:return"#7e8368";case 2:return"#394d36";case 3:return"#b8ac97"}},_getTrees:function(){switch(this.type._hx_index){case 0:return[kt.SCENERY_TREE_1,kt.SCENERY_TREE_2,kt.SCENERY_TREE_3];case 1:return[kt.SCENERY_TREE_1,kt.SCENERY_TREE_3,kt.SCENERY_TREE_8];case 2:return[kt.SCENERY_TREE_1,kt.SCENERY_TREE_4,kt.SCENERY_TREE_8];case 3:return[kt.SCENERY_TREE_5,kt.SCENERY_TREE_6,kt.SCENERY_TREE_7]}},_getSidingDistance:function(){switch(this.type._hx_index){case 0:case 1:case 2:return 6;case 3:return 4}},_getTitle:function(){var e;switch(this.type._hx_index){case 0:e="gui.locations.a";break;case 1:e="gui.locations.b";break;case 2:e="gui.locations.c";break;case 3:e="gui.locations.d"}return this._kernel.getConfig(e)},_getAltTitle:function(){var e;switch(this.type._hx_index){case 0:e="gui.locations.a.alt";break;case 1:e="gui.locations.b.alt";break;case 2:e="gui.locations.c.alt";break;case 3:e="gui.locations.d.alt"}return l.string(this._kernel.getConfig(e))+" "+l.string(this._kernel.getConfig("gui.scenes.selectLevel.altTitle"))},__class__:Rt});var Dt=function(e,t,s){this._track=t,this._camera=s,ot.call(this,e)};s["b10gph.game.Player"]=Dt,Dt.__name__="b10gph.game.Player",Dt.__super__=ot,Dt.prototype=r(ot.prototype,{_init:function(){ot.prototype._init.call(this),this.x=0,this.y=0,this.z=this._camera.height*this._camera.depth,this.speedPerc=0,this.segment=null,this.percent=0,this._speed=0,this._boost=0,this.steer=0,this._width=.36,this._carsAheadOfPlayer=this._track.cars.length,this._prevQuarter=0,this._biasSpeed=this._session.getUpgradeBias(Tt.UPGRADE_SPEED,.85,1),this._biasSteering=this._session.getUpgradeBias(Tt.UPGRADE_STEERING,.9,1.1),this._biasAcceleration=this._session.getUpgradeBias(Tt.UPGRADE_ACCELERATION,.95,1.25),this._biasBoost=this._session.getUpgradeBias(Tt.UPGRADE_BOOST,.985,1.02),this._maxSpeed=this._factory.targetFramerate*this._track.segmentDistance*.9|0,this._forceAcceleration=this._maxSpeed/10,this._forceBraking=-this._maxSpeed,this._forceCoasting=-this._maxSpeed/10,this._forceOffRoadDeceleration=-this._maxSpeed/1.5,this._forceOffRoadLimit=this._maxSpeed/2,this._deviceMotion=new Et(this._kernel),this._deviceMotion.isEnabled=this._deviceMotion.isEnabled&&!this._system.isDesktop},_disposer:function(){this._deviceMotion.dispose(),ot.prototype._disposer.call(this)},_updater:function(e){null==e&&(e=0),ot.prototype._updater.call(this,e),this._move(e),this._updateCars(e),this._collision(),this._boost*=.925*this._biasBoost,this._boost<.05&&(this._boost=0),this.isRaceComplete||(this._camera.position+this.z<this._track.totalDistance?this.score=this._carsAheadOfPlayer:(this.isRaceComplete=!0,this._kernel.messenger.sendMessage(this._factory.MESSAGE_FINISH_LINE,this,!1,!1,!0)))},_move:function(e){null==e&&(e=0);var t=e/1e3;this.speedPerc=this._speed/this._maxSpeed;var s=3.25*t*this.speedPerc;this._deviceMotion.isEnabled&&0!=this._deviceMotion.motionRelative&&!this._kernel.inputs.mouse.getIsButtonDown()&&this._kernel.inputs.mouse.getButtonUpDuration()>1e3?this.speedPerc>.05&&(this.steer=.5*this.steer+.5*this._deviceMotion.motionRelative):(this.steer*=.75,this._kernel.inputs.joypad.getIsButtonDown(qe.LEFT)?this.speedPerc>.05&&(this.steer-=.25):this._kernel.inputs.joypad.getIsButtonDown(qe.RIGHT)&&this.speedPerc>.05&&(this.steer+=.25)),this.x+=s*this._biasSteering*this.steer;var i=this.steer;this.steer=i>1?1:i<-1?-1:i,this._age>500||this._kernel.inputs.joypad.getIsButtonDown(qe.UP)?this._speed=Lt.accelerate(this._speed,this._biasAcceleration*this._forceAcceleration,t):this._kernel.inputs.joypad.getIsButtonDown(qe.DOWN)?this._speed=Lt.accelerate(this._speed,this._forceBraking,t):this._speed=Lt.accelerate(this._speed,this._forceCoasting,t),(this.x<-1||this.x>1)&&this._speed>this._forceOffRoadLimit&&(this._speed=Lt.accelerate(this._speed,this._forceOffRoadDeceleration,t));i=this.x-=s*this.speedPerc*this._track.findSegment(this._camera.position).curve*.05;this.x=i>1.25?1.25:i<-1.25?-1.25:i;i=this._speed;var n=this._biasSpeed*this._maxSpeed;this._speed=i>n?n:i<0?0:i,this._speed+=(this._boost>0?.1:0)*this._maxSpeed,this.segment=this._track.findSegment(this._camera.position+this.z),this.percent=Lt.percentRemaining(this._camera.position+this.z,this._track.segmentDistance),this.y=Lt.interpolate(this.segment.position1.worldY,this.segment.position2.worldY,this.percent),this._camera.increasePosition(t*this._speed,-.04*t*this.segment.curve*.25*this.speedPerc);var r=Math.round(3.25*(this.segment.index+this.percent)/this._track.maxSegments);r>this._prevQuarter&&(this._kernel.audio.start("VocalProgress"+r,Je.INTERFACE,0,0,1,0,!0),this._prevQuarter=r)},_updateCars:function(e){null==e&&(e=0);var t,s=Math.min(this._age/7e3,1),i=s*e/1e3,n=this._carsAheadOfPlayer;this._carsAheadOfPlayer=0;for(var r=0,a=this._track.cars;r<a.length;){var o=a[r];++r;var h=this._track.findSegment(o.z);o.z=Math.round(Math.min(o.z+i*o.speed*this._maxSpeed*.83,this._track.segments.length*this._track.segmentDistance));var c=this._track.findSegment(o.z);if(h!=c&&(_.remove(h.cars,o),c.cars.push(o)),h.index-this.segment.index<=this._camera.drawDistance&&h.index-this.segment.index>-5){this._tools;o.steer=s*(.925*o.steer+.075*this._updateCarOffset(o,h));var u=o.offset+o.steer;if(o.offset=u>.8?.8:u<-.8?-.8:u,o.percent=Lt.percentRemaining(o.z,this._track.segmentDistance),this._kernel.isEyeCandy&&h!=c)for(var d=Math.round(4*(1-(h.index-this.segment.index)/this._camera.drawDistance)),p=0,g=d;p<g;){var f=p++;null!=(t=this._track.getNextAfterburner()).owner&&_.remove(t.owner.scenery,t),t.configure(t.type,o.offset,(f+1)/d,1,h),h.scenery.push(t)}}o.z>this._camera.position+this.z&&this._carsAheadOfPlayer++}this._carsAheadOfPlayer!=n&&this._kernel.audio.start("Driveby"+(l.random(4)+1),Je.EFFECTS,0,0,.5,0,!1)},_updateCarOffset:function(e,t){for(var s=this._width,i=0,n=null,r=1;r<10;){var a=r++;if(i+=(n=this._track.segments[(t.index+a)%this._track.segments.length]).curve,n==this.segment&&e.speed>this.speedPerc&&Lt.overlap(this.x,s,e.offset,s,1.2))return(this.x>.5?-1:this.x<-.5?1:e.offset>this.x?1:-1)*(1/a)*(e.speed-this.speedPerc);for(var _=0,o=n.cars;_<o.length;){var h=o[_];++_;var l=h;if(e.speed>l.speed&&Lt.overlap(e.offset,s,l.offset,s,1.2))return(l.offset>.5?-1:l.offset<-.5?1:e.offset>l.offset?1:-1)*(1/a)*(e.speed-l.speed)}}return i<0?-.01:.01},_collision:function(){for(var e=this._track.segments[this.segment.index+1],t=0,s=e.scenery;t<s.length;){var i=s[t];++t,i.isBoost&&(_.remove(e.scenery,i),Math.abs(this.x-i.offset)<.35&&this._activateBoost()),i.isCoin&&(_.remove(e.scenery,i),Math.abs(this.x-i.offset)<.165&&this._activateCoin())}if(this.segment.index<this._track.segments.length-3){var n=this._track.segments,r=this.segment.index+1,a=[].concat(this.segment.cars).concat(n[r].cars);if(this.percent>.5)for(t=0,s=this._track.segments[this.segment.index+2].cars;t<s.length;){i=s[t];++t,1-this.percent+i.percent<.5&&a.push(i)}for(t=0;t<a.length;){i=a[t];++t,Math.abs(this.x-i.offset)<.7*this._width&&(this._speed=Math.min(i.speed*this._maxSpeed*.8,.85*this._speed),this._boost=0,this.steer=0,this._kernel.audio.start("Collision"+(l.random(2)+1),Je.EFFECTS,0,0,.25*this.speedPerc,0,!1))}}},_activateBoost:function(){this._boost>0||(this._kernel.overlay.flash(200,!0,1,this._factory.COLOR_WHITE),this._boost=1,this._speed=this._maxSpeed+this._boost*this._maxSpeed*.1,this._kernel.audio.start("Boost"+(l.random(2)+1),Je.EFFECTS,0,0,.65,0,!1))},_activateCoin:function(){this._session.coins+=20},__class__:Dt});var Pt=function(e,t){this.worldX=0,this.worldY=e,this.worldZ=t,this.cameraX=this.cameraY=this.cameraZ=0,this.screenScale=1,this.screenX=this.screenY=0,this.screenWidth=1};s["b10gph.game.Position"]=Pt,Pt.__name__="b10gph.game.Position",Pt.prototype={__class__:Pt};var Nt=function(e,t,s,i,n,r){this._track=t,this._camera=s,this._player=i,this._width=n,this._height=r,ot.call(this,e)};s["b10gph.game.Renderer"]=Nt,Nt.__name__="b10gph.game.Renderer",Nt.__super__=ot,Nt.prototype=r(ot.prototype,{_init:function(){ot.prototype._init.call(this),this._context.cache(0,0,this._width,this._height);var e=this._context.cacheCanvas;this._canvasBuffer=this._factory.createCanvas(this._width,this._height),this._context2dBuffer=this._canvasBuffer.getContext("2d",null),this._context2d=e.getContext("2d",null),this._context2d.imageSmoothingEnabled=this._system.isDesktop&&this._session.cache.benchmark>200,this._imageCars=this._assets.getAsset("assets/location/Cars.png"),this._imageScenery=this._assets.getAsset("assets/location/Scenery.png"),this._imageRoad=this._track.locationVo.imageRoad,this._imageFinishLine=this._assets.getAsset("assets/location/FinishLine.png"),this._imageBoost=this._assets.getAsset("assets/location/Boost.png"),this._imageHorizon=this._track.locationVo.imageHorizon,this._isDrawImageUsingCanvas=this._session.cache.isDrawImageUsingCanvas,this._isDrawImageUsingCanvas&&(this._canvasCars=this._factory.createCanvas(this._imageCars.width,this._imageCars.height),this._canvasCars.getContext("2d",null).drawImage(this._imageCars,0,0),this._imageCars=null,this._canvasScenery=this._factory.createCanvas(this._imageScenery.width,this._imageScenery.height),this._canvasScenery.getContext("2d",null).drawImage(this._imageScenery,0,0),this._imageScenery=null,this._canvasRoad=this._factory.createCanvas(this._imageRoad.width,this._imageRoad.height),this._canvasRoad.getContext("2d",null).drawImage(this._imageRoad,0,0),this._imageRoad=null,this._canvasFinishLine=this._factory.createCanvas(this._imageFinishLine.width,this._imageFinishLine.height),this._canvasFinishLine.getContext("2d",null).drawImage(this._imageFinishLine,0,0),this._imageFinishLine=null,this._canvasBoost=this._factory.createCanvas(this._imageBoost.width,this._imageBoost.height),this._canvasBoost.getContext("2d",null).drawImage(this._imageBoost,0,0),this._imageBoost=null,this._canvasHorizon=this._factory.createCanvas(this._imageHorizon.width,this._imageHorizon.height),this._canvasHorizon.getContext("2d",null).drawImage(this._imageHorizon,0,0),this._imageHorizon=null),this._framerateBiasTotal=0,this._roadLanes=4,this._roadWidth=2e3,this._resolution=this._height/405,this._horizonY=0,this._horizonPattern=this._context2d.createPattern(this._isDrawImageUsingCanvas?this._canvasHorizon:this._imageHorizon,"repeat");var t=8*this._session.cache.benchmark/100;this._maxScanlines=Math.round(t>16?16:t<6?6:t),this._cameraRotation=0,this._lensflare=new At(this._kernel,this._width,this._height),this._streaks=new Mt(this._kernel,this._width,this._height),this._isLensEffectsEnabled=this._kernel.isEyeCandy&&this._session.cache.benchmark>400,this.c_textureRatio=512/this._track.segmentDistance/16,this._coinSprites=[];for(var s=0;s<32;){var i=s++;this._coinSprites.push({x:i%32*32,y:630,w:32,h:32,isFlip:!1})}},_updater:function(e){(null==e&&(e=0),ot.prototype._updater.call(this,e),this._updates>10)&&(this._framerateBiasTotal+=this._kernel.getFramerate(!0),this._age>1e3&&(this._framerateBiasTotal/(this._updates-10)/this._factory.targetFramerate>.8?this._maxScanlines++:this._maxScanlines=Math.round(.8*this._maxScanlines)));var t=this._maxScanlines;this._maxScanlines=0|(t>16?16:t<6?6:t);var s,i,n=this._track.findSegment(this._camera.position),r=Lt.percentRemaining(this._camera.position,this._track.segmentDistance),a=this._height,o=0,h=-n.curve*r,l=this._camera.position,c=this._camera.drawDistance,u=this._camera.fogDensity,d=this._tools,p=t=this._camera.angle-this._player.x/50;i=p-1*Math.floor(p/1),this._context2d.globalAlpha=1,this._drawHorizon(i,this._horizonY);for(var g=0,f=c;g<f;){var y=g++;(s=this._track.segments[(n.index+y)%this._track.segments.length]).fog=1/Math.pow(Math.exp(1),Math.pow(y/c,7)*u),s.clip=a;d=s.position1;var m=this._width,w=this._height;d.cameraX=d.worldX-(this._player.x*this._roadWidth-o),d.cameraY=d.worldY-(this._player.y+this._camera.height),d.cameraZ=d.worldZ-l,d.screenScale=this._camera.depth/d.cameraZ,d.screenX=Math.round(m/2+d.screenScale*d.cameraX*m/2),d.screenY=Math.round(w/2-d.screenScale*d.cameraY*w/2),d.screenWidth=Math.round(d.screenScale*this._roadWidth*m/2);var v=s.position2,E=this._width,x=this._height;if(v.cameraX=v.worldX-(this._player.x*this._roadWidth-o-h),v.cameraY=v.worldY-(this._player.y+this._camera.height),v.cameraZ=v.worldZ-l,v.screenScale=this._camera.depth/v.cameraZ,v.screenX=Math.round(E/2+v.screenScale*v.cameraX*E/2),v.screenY=Math.round(x/2-v.screenScale*v.cameraY*x/2),v.screenWidth=Math.round(v.screenScale*this._roadWidth*E/2),o+=h,h+=s.curve,!(s.position1.cameraZ<=this._camera.depth||s.position2.screenY>=s.position1.screenY||s.position2.screenY>=a)){a=s.position2.screenY;var b=s.position1.worldZ,S=(s.position2.worldZ,s.position1.screenWidth),C=s.position2.screenY,k=s.position2.screenWidth,T=s.isFinishLine,A=s.isBoost,I=s.boostPosition;if(null==I&&(I=0),null==A&&(A=!1),null==T&&(T=!1),C>this._height&&(C=this._height),S=1.3*S|0,k=1.3*k|0,this.c_startX=s.position1.screenX-S,this.c_endX=s.position2.screenX-k,this.c_dx=this.c_endX-this.c_startX,this.c_startY=s.position1.screenY,this.c_endY=C,this.c_endY<=this.c_startY){this.c_dy=0|Math.abs(this.c_endY-this.c_startY),this.c_startW=2*S,this.c_dw=2*(k-S),this.c_startZ=b,this.c_dz=this._track.segmentDistance,this.c_sourceX=0,this.c_sourceY=0,this.c_sourceW=512,this.c_sourceH=1,this.c_destX=0,this.c_destY=this.c_startY,this.c_destW=1,this.c_destH=1,this.c_steps=0|Math.min(this.c_dy,this._maxScanlines),this.c_perc=0,this.c_destHF=Math.floor(this.c_dy/this.c_steps),this.c_destHC=Math.ceil(this.c_dy/this.c_steps),this.c_mod=1,this.c_destHC!=this.c_destHF&&(this.c_mod=Math.round(1/(this.c_destHC-this.c_dy/this.c_steps))),this.c_destH=this.c_destHC,this.c_source=this._isDrawImageUsingCanvas?this._canvasRoad:this._imageRoad,this._context2d.globalAlpha=s.fog;for(var R=0,D=this.c_steps;R<D;){var P=R++;this.c_perc=P/this.c_steps,this.c_sourceY=511-Math.floor((b+150+this.c_perc*this.c_dz)*this.c_textureRatio)%512,this.c_destX=this.c_startX+this.c_perc*this.c_dx|0,P==this.c_steps-1&&(this.c_destH=0|Math.max(this.c_destH,this.c_destY-this.c_endY)),this.c_destY-=this.c_destH,this.c_destW=this.c_startW+this.c_perc*this.c_dw|0,this.c_sourceH=this.c_sourceY>512-this.c_destH?1:this.c_destH,this.c_destW>2048&&(this.c_destX+=.5*(this.c_destW-2048)|0,this.c_destW=2048),this.c_destY<this._height&&this.c_destY>-this.c_destH&&(this._context2d.drawImage(this.c_source,this.c_sourceX,this.c_sourceY,this.c_sourceW,this.c_sourceH,this.c_destX,this.c_destY,this.c_destW,this.c_destH),T&&this._context2d.drawImage(this._isDrawImageUsingCanvas?this._canvasFinishLine:this._imageFinishLine,this.c_sourceX,(this.c_sourceY+16)%64,this.c_sourceW,this.c_sourceH,this.c_destX,this.c_destY,this.c_destW,this.c_destH),A&&this._context2d.drawImage(this._isDrawImageUsingCanvas?this._canvasBoost:this._imageBoost,0,(this.c_sourceY+16)%64,64,this.c_sourceH,this.c_destX+(this.c_destW*(.5+.5*I/1.3)-.125*this.c_destW|0),this.c_destY,.25*this.c_destW|0,this.c_destH)),this.c_destH=P%this.c_mod==0?this.c_destHF:this.c_destHC}this._context2d.globalAlpha=1}}}this._horizonY=a;var N,O,B=0,M=0,U=0,L=0,F=null,Y=this._isDrawImageUsingCanvas?this._canvasScenery:this._imageScenery,H=this._isDrawImageUsingCanvas?this._canvasCars:this._imageCars,V=(t=1-this._player.speedPerc/2)>1?1:t<.95?.95:t;for(g=0,f=c;g<f;){B=c-g++;for(R=0,D=(s=this._track.segments[(n.index+B)%this._track.segments.length]).scenery;R<D.length;){y=D[R];if(++R,M=s.position1.screenScale,U=s.position1.screenX+M*y.offset*this._roadWidth*(.5*this._width),L=s.position1.screenY,F=y.sprite,O=Y,y.isAfterburner){if(!this._isLensEffectsEnabled)continue;if(y.life*=V,y.life<.2){_.remove(s.scenery,y);continue}N=Math.pow(y.perc,1.2),U=Lt.interpolate(U,s.position2.screenX+s.position2.screenScale*y.offset*this._roadWidth*(.5*this._width),N),L=Lt.interpolate(s.position1.screenY,s.position2.screenY,N)}y.isCoin&&(O=H,F=this._coinSprites[(this._updates+y.seed)%32]),y.isBoost||this._drawSprite(O,F,M*y.scale,U,L,-.5,-1,s.clip,s.fog,y.isAdd,y.life)}O=H;for(var z=0,j=s.cars;z<j.length;){P=j[z];++z,N=Math.pow(P.percent,.8),M=Lt.interpolate(s.position1.screenScale,s.position2.screenScale,N),U=Lt.interpolate(s.position1.screenX,s.position2.screenX,N)+M*P.offset*this._roadWidth*(.5*this._width),L=Lt.interpolate(s.position1.screenY,s.position2.screenY,N),F=this._getCarSprite(P.type,-((U-this._width/2)*M*4e3-5*s.curve)/(.125*this._width)),this._drawSprite(O,F,.8*M,U,L,-.5,-1,s.clip,s.fog)}s==this._player.segment&&this._drawPlayer(O)}this._isLensEffectsEnabled&&(this._streaks.draw(this._context2d,this._player.isRaceComplete?0:Math.min(.35*Math.pow(this._player.speedPerc-.1,2),.35)),this._cameraRotation=.95*this._cameraRotation+.15*-this._player.steer*this._player.speedPerc*.05,Math.abs(this._cameraRotation)<1e-4&&(this._cameraRotation=0),this._drawRotation(this._cameraRotation),this._lensflare.draw(this._context2d,1024*i,this._horizonY-80))},_drawSprite:function(e,t,s,i,n,r,a,_,o,h,l){null==l&&(l=1),null==h&&(h=!1),null==o&&(o=1),null==_&&(_=0),null==a&&(a=0),null==r&&(r=0),s>.002||(this.c_destW=Math.round(t.w*s*this._width*.5*(.003*this._roadWidth)),this.c_destH=Math.round(t.h*s*this._width*.5*(.003*this._roadWidth)),this.c_destW>768||this.c_destH>768||(i=(i+this.c_destW*(r*(t.isFlip?-1:1)))*(t.isFlip?-1:1),n+=this.c_destH*a,this.c_clipH=Math.round(Math.max(0,n+this.c_destH-_+1)),0==_&&(this.c_clipH=0),this.c_clipH<this.c_destH&&(this._context2d.globalAlpha=Math.pow(o,.4)*l,h&&(this._context2d.globalCompositeOperation="lighter"),t.isFlip&&this._context2d.scale(-1,1),this._context2d.drawImage(e,t.x,t.y,t.w,t.h-t.h*this.c_clipH/this.c_destH,i,n,this.c_destW,this.c_destH-this.c_clipH),t.isFlip&&this._context2d.scale(-1,1),this._context2d.globalAlpha=1,h&&(this._context2d.globalCompositeOperation="source-over"))))},_drawHorizon:function(e,t){null==t&&(t=0),null==e&&(e=0);var s=Math.round(1024*e),i=Math.round(Math.min(t,224));this._context2d.fillStyle=this._horizonPattern,this._context2d.translate(s,i),this._context2d.fillRect(-s,-i,this._width,i),this._context2d.translate(-s,-i),this._context2d.fillStyle=this._track.locationVo.bgColor,this._context2d.fillRect(0,i,this._width,this._height-i)},_drawRotation:function(e,t){null==t&&(t=120),null==e&&(e=0),e>.35?e=.35:e<-.35&&(e=-.35);var s=.5*this._width,i=.75*this._height;this._context2dBuffer.drawImage(this._context.cacheCanvas,0,0);var n=this._canvasBuffer;this._context2d.translate(s,i),this._context2d.rotate(-e),this._context2d.translate(-s,-i),this._context2d.drawImage(n,0,0,this._width,this._height,0,0,this._width,this._height),this._context2d.drawImage(n,0,0,this._width,1,0,1-t,this._width,t),this._context2d.drawImage(n,0,this._height-1,this._width,1,0,this._height-1,this._width,t),this._context2d.drawImage(n,1,0,1,this._height,2-t,0,t,this._height),this._context2d.drawImage(n,this._width-1,0,1,this._height,this._width-1,0,t,this._height),this._context2d.drawImage(n,0,0,1,1,-t,-t,t,t),this._context2d.drawImage(n,this._width-1,0,1,1,this._width,-t,t,t),this._context2d.drawImage(n,0,this._height-1,1,1,-t,this._height-1,t,t),this._context2d.drawImage(n,this._width-1,this._height-1,1,1,this._width,this._height-1,t,t),this._context2d.translate(s,i),this._context2d.rotate(e),this._context2d.translate(-s,-i)},_drawPlayer:function(e){var t=this._camera.depth/this._player.z,s=.5*this._width,i=.5*this._height-t*Lt.interpolate(this._player.segment.position1.cameraY,this._player.segment.position2.cameraY,this._player.percent)*(.5*this._height),n=this._player.steer,r=Math.random()*this._player.speedPerc*this._resolution*(Math.random()<.5?-1:1);this._drawSprite(e,this._getCarSprite(xt.CAR_A,n),.8*t,s,i+r,-.5,-1)},_getCarSprite:function(e,t){var s,i={x:0,y:270,w:200,h:90,isFlip:!1};switch(t<-.2&&(i.y=360),t<-.75&&(i.y=450),t>.2&&(i.y=180),t>.75&&(i.y=90),t<-.95&&(i.y=540),t>.95&&(i.y=0),e._hx_index){case 0:s=0;break;case 1:s=200;break;case 2:s=400;break;case 3:s=600;break;case 4:s=800}return i.x=s,i},__class__:Nt});var Ot=function(e,t,s,i,n){null==i&&(i=1),null==s&&(s=0),this.configure(e,t,s,i,n),this.seed=l.random(32)};s["b10gph.game.Scenery"]=Ot,Ot.__name__="b10gph.game.Scenery",Ot.prototype={_getWidth:function(){return 0},_getScale:function(){switch(this.type._hx_index){case 0:return 2;case 1:return 2.2;case 2:case 3:return 1.5;case 4:return 1.25;case 5:return 4*Math.pow(Math.random(),.1);case 6:case 7:case 8:return 4*Math.pow(Math.random(),.2);case 9:return 4*Math.pow(Math.random(),.1);case 10:case 11:case 12:return 4*Math.pow(Math.random(),.2);case 13:return 2;case 14:case 15:case 16:case 17:return 2.6;case 18:case 19:return 2;case 20:case 21:return 10}},_getSprite:function(){var e=Math.random()<.5;switch(this.type._hx_index){case 0:return{x:0,y:0,w:32,h:42,isFlip:!1};case 1:return{x:768+32*l.random(4),y:512,w:32,h:32,isFlip:!1};case 2:return{x:768,y:544,w:64,h:64,isFlip:e};case 3:return{x:832,y:544,w:64,h:64,isFlip:e};case 4:return{x:896,y:512,w:128,h:128,isFlip:!1};case 5:return{x:20,y:0,w:196,h:256,isFlip:e};case 6:return{x:279,y:0,w:210,h:256,isFlip:e};case 7:return{x:512,y:0,w:256,h:256,isFlip:e};case 8:return{x:832,y:0,w:128,h:256,isFlip:e};case 9:return{x:20,y:256,w:196,h:256,isFlip:e};case 10:return{x:279,y:256,w:210,h:256,isFlip:e};case 11:return{x:512,y:256,w:256,h:256,isFlip:e};case 12:return{x:788,y:256,w:196,h:256,isFlip:e};case 13:return{x:18,y:512,w:92,h:512,isFlip:!1};case 14:return{x:128,y:562,w:256,h:206,isFlip:!1};case 15:return{x:384,y:562,w:256,h:206,isFlip:!1};case 16:return{x:128,y:818,w:256,h:206,isFlip:!1};case 17:return{x:384,y:818,w:256,h:206,isFlip:!1};case 18:return{x:640,y:512,w:128,h:256,isFlip:!1};case 19:return{x:640,y:768,w:128,h:256,isFlip:!1};case 20:return{x:768,y:896,w:128,h:128,isFlip:!1};case 21:return{x:896,y:896,w:128,h:128,isFlip:!1}}},_getIsAdd:function(){return!1},configure:function(e,t,s,i,n){null==i&&(i=1),null==s&&(s=0),this.offset=t,this.life=i,this.perc=s,this.owner=n,this.type!=e&&(this.type=e,this.scale=this._getScale(),this.width=this._getWidth(),this.isBoost=this.type==kt.SCENERY_BOOST,this.isAfterburner=this.type==kt.SCENERY_AFTERBURNER,this.isCoin=this.type==kt.SCENERY_COIN,this.isAdd=this._getIsAdd(),this.sprite=this._getSprite())},__class__:Ot};var Bt=function(e,t,s,i,n,r){this.index=e,this.position1=t,this.position2=s,this.curve=i,this.color=n,this.scenery=null!=r?r:[],this.cars=[],this.fog=0,this.clip=0,this.isFinishLine=!1,this.isBoost=!1,this.boostPosition=0};s["b10gph.game.Segment"]=Bt,Bt.__name__="b10gph.game.Segment",Bt.prototype={setBoost:function(e){this.isBoost=!0,this.boostPosition=e},__class__:Bt};var Mt=function(e,t,s){this._TEXTURE_HEIGHT=405,this._TEXTURE_WIDTH=720,this._kernel=e,this._width=t,this._height=s,this._texture=this._kernel.assets.getAsset("assets/location/Streaks.png")};s["b10gph.game.Streaks"]=Mt,Mt.__name__="b10gph.game.Streaks",Mt.prototype={draw:function(e,t){if(null==t&&(t=1),!(t<=.25)){var s=t*(.5*Math.random()+.5);e.save(),e.globalAlpha=s,Math.random()<.5&&(e.translate(this._width,0),e.scale(-1,1)),Math.random()<.5&&(e.translate(0,this._height),e.scale(1,-1)),e.scale(this._width/this._TEXTURE_WIDTH,this._height/this._TEXTURE_HEIGHT),e.drawImage(this._texture,0,0),e.globalAlpha=1,e.restore()}},__class__:Mt};var Ut=function(e,t){this.locationVo=t,ot.call(this,e)};s["b10gph.game.Track"]=Ut,Ut.__name__="b10gph.game.Track",Ut.__super__=ot,Ut.prototype=r(ot.prototype,{_init:function(){for(ot.prototype._init.call(this),this.maxSegments=820,this.maxSegments%2==0&&this.maxSegments++,this._kernel.isDebug&&(this.maxSegments=100),this.segmentDistance=300,this.segments=[],this._addRoad(0,50,0,0,0);this.segments.length<this.maxSegments;){var e=this._tools.getRandomType(Ct);this.locationVo.isBowl&&(e=[Ct.ROAD_LEFT_LONG,Ct.ROAD_LEFT_MEDIUM,Ct.ROAD_NONE][l.random(3)]);var t=this._getRoadLength(e),s=this._getRoadCurve(e),i=t*Math.random()*3;this.locationVo.isBowl&&(i=.1*Math.abs(s*t)),this.segments.length+2*t<this.maxSegments?this._addRoad(t,t,t,s,i):this._addRoad(0,this.maxSegments-this.segments.length,0,0,0)}this.maxSegments=this.segments.length;i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);i=30*Math.random()*.4;this._addRoad(0,30,0,0,i);for(var n=0,r=this.segments.length;n<r;){var a=n++;if(Math.abs(a-this.maxSegments)>10){if(a>50&&a<this.maxSegments-32&&a%128==8){var _=Math.random()-.5;this._addScenery(a,kt.SCENERY_BOOST,_);for(var o=a-2,h=a+2;o<h;){var c=o++;this.segments[c].setBoost(_)}}a>25&&a<this.maxSegments+140&&Math.random()<(a<this.maxSegments?.03:.2)&&this._addScenery(a,kt.SCENERY_COIN,2*Math.random()-1)}this._createDefaultScenery(this.segments[a])}this._addScenery(30,kt.SCENERY_TUNNEL_LEFT,-1),this._addScenery(30,kt.SCENERY_TUNNEL_RIGHT,1),this._addScenery(this.maxSegments,kt.SCENERY_FINISH_LEFT,-1),this._addScenery(this.maxSegments,kt.SCENERY_FINISH_RIGHT,1),this.segments[this.maxSegments].isFinishLine=!0,this.segments[this.maxSegments+(this.maxSegments%2==0?1:-1)].isFinishLine=!0,this.totalDistance=this.maxSegments*this.segmentDistance,this._totalCars=11,this._createCars(),this._createAfterburners()},findSegment:function(e){return this.segments[Math.floor(e/this.segmentDistance)%this.segments.length]},_getRoadLength:function(e){switch(e._hx_index){case 0:return 10;case 1:case 4:return 10;case 2:case 5:return 20;case 3:case 6:return 50}},_getRoadCurve:function(e){var t;switch(e._hx_index){case 0:t=0;break;case 1:t=-10;break;case 2:t=-15;break;case 3:t=-20;break;case 4:t=10;break;case 5:t=15;break;case 6:t=20}return Math.round(t*(this._session.level+2)/5)},_addRoad:function(e,t,s,i,n){null==n&&(n=0);for(var r=this._getLastY(),a=r+n*this.segmentDistance,_=e+t+s,o=0,h=e;o<h;){var l=o++;this._addSegment(Math.round(Lt.easeIn(0,i,l/e)),Lt.easeInOut(r,a,l/_))}for(o=0,h=t;o<h;){l=o++;this._addSegment(i,Lt.easeInOut(r,a,(e+l)/_))}for(o=0,h=s;o<h;){l=o++;this._addSegment(Math.round(Lt.easeInOut(i,0,l/s)),Lt.easeInOut(r,a,(e+t+l)/_))}},_addSegment:function(e,t){var s=this.segments.length,i=this.segments,n=new Pt(this._getLastY(),s*this.segmentDistance),r=Math.floor(s/2)%2==0?bt.COLOR_DARK:bt.COLOR_LIGHT;i.push(new Bt(s,n,new Pt(t,(s+1)*this.segmentDistance),e,r))},_getLastY:function(){return 0==this.segments.length?0:this.segments[this.segments.length-1].position2.worldY},_createDefaultScenery:function(e){var t=e.index;t%10==0&&((s=Math.random())<.4&&((e.curve>2||t>this.maxSegments||t<50)&&this._addScenery(t,kt.SCENERY_STADIUM_LEFT,-7.5),(this.locationVo.isBowl||e.curve<-2||t>this.maxSegments||t<50)&&this._addScenery(t,kt.SCENERY_STADIUM_RIGHT,7.5)));t%2==0&&((this.locationVo.isBowl||e.curve>2||t>this.maxSegments||t<50)&&this._addScenery(t,kt.SCENERY_SIDING_LEFT,-this.locationVo.sidingDistance),(this.locationVo.isBowl||e.curve<-2||t>this.maxSegments||t<50)&&this._addScenery(t,kt.SCENERY_SIDING_RIGHT,this.locationVo.sidingDistance)),(s=Math.random())<.2&&e.curve>2&&this._addScenery(t,Math.random()<.5?kt.SCENERY_TIRE_2:kt.SCENERY_TIRE_1,-1.5),(s=Math.random())<.2&&e.curve<-2&&this._addScenery(t,Math.random()<.5?kt.SCENERY_TIRE_2:kt.SCENERY_TIRE_1,1.5);var s=Math.random();t>50&&t%32==0&&s<.4&&(this._addScenery(t,kt.SCENERY_TUNNEL_LEFT,-1),this._addScenery(t,kt.SCENERY_TUNNEL_RIGHT,1)),t%32==8&&this._addScenery(t,kt.SCENERY_FLOODLIGHT,-2),t%32==24&&this._addScenery(t,kt.SCENERY_FLOODLIGHT,2);s=Math.random();if(t%2==0&&s<(this._system.isDesktop?.5:.2)){var i=this.locationVo.trees[l.random(this.locationVo.trees.length)];null!=i&&this._addScenery(t,i,(Math.random()<.5?-1:1)*(Math.random()+2.5))}},_addScenery:function(e,t,s){this.segments[e].scenery.push(new Ot(t,s))},_createCars:function(){this.cars=[];for(var e=l.random(3)+2,t=0,s=this._totalCars;t<s;){var i,n=t++,r=1-n/this._totalCars,a=Math.ceil(50*r*2*this.segmentDistance);switch(n%3){case 0:i=0;break;case 2:i=.5;break;default:i=-.5}var _=[xt.CAR_B,xt.CAR_C,xt.CAR_D,xt.CAR_E][l.random(4)],o=.9*Math.pow(Math.random(),Math.max(.1,r))+.2,h=.9*Math.pow(Math.pow(Math.random(),.5),Math.max(.1,r))+.275,c=(this._tools,this._session.getPercentageComplete()),u=o*(1-c)+h*c;n%e==0&&(u=.7*Math.pow(r,Math.max(.3,r))+.3),0==n&&(u=1),1==n&&(u=.99);var d=new vt(_,i,a,u);this.findSegment(a).cars.push(d),this.cars.push(d)}},_createAfterburners:function(){this._afterburners=[];for(var e=0;e<100;){e++;var t=new Ot(kt.SCENERY_AFTERBURNER,0,0);this._afterburners.push(t)}this._afterburnerIndex=0},getNextAfterburner:function(){return this._afterburners[this._afterburnerIndex++%100]},__class__:Ut});var Lt=function(){};s["b10gph.game.Util"]=Lt,Lt.__name__="b10gph.game.Util",Lt.percentRemaining=function(e,t){return e%t/t},Lt.accelerate=function(e,t,s){return e+t*s},Lt.interpolate=function(e,t,s){return e+(t-e)*s},Lt.easeIn=function(e,t,s){return e+(t-e)*Math.pow(s,2)},Lt.easeInOut=function(e,t,s){return e+(t-e)*(-Math.cos(s*Math.PI)/2+.5)},Lt.overlap=function(e,t,s,i,n){null==n&&(n=1);var r=n/2;return!(e+t*r<s-i*r||e-t*r>s+i*r)};var Ft=function(e,t,s,i){null==i&&(i=!1),null==s&&(s=100),null==t&&(t=100),this._assets=zs.__cast(e.assets,lt),this._factory=zs.__cast(e.factory,ut),this._session=zs.__cast(e.get_session(),ft),this._system=e.system,je.call(this,e,t,s,i)};s["b10gph.gui.AGuiEntity"]=Ft,Ft.__name__="b10gph.gui.AGuiEntity",Ft.__super__=je,Ft.prototype=r(je.prototype,{__class__:Ft});var Yt=function(e,t,s,i){null==i&&(i=1),null==s&&(s=!1),this._imageElement=t,this._isAdd=s,Ft.call(this,e,this._imageElement.width,this._imageElement.height,!1),this.set_alpha(i)};s["b10gph.gui.Image"]=Yt,Yt.__name__="b10gph.gui.Image",Yt.__super__=Ft,Yt.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._context.mouseEnabled=!1,this._bitmap=new createjs.Bitmap(this._imageElement),this._context.addChild(this._bitmap),this._bitmap.compositeOperation=this._isAdd?"lighter":"source-over"},set_alpha:function(e){return this._bitmap.alpha=e},__class__:Yt,__properties__:r(Ft.prototype.__properties__,{set_alpha:"set_alpha"})});var Ht=function(e,t){this._imageData=t,Yt.call(this,e,e.assets.getAsset("assets/gui/SceneBg.png"),!1)};s["b10gph.gui.Bg"]=Ht,Ht.__name__="b10gph.gui.Bg",Ht.__super__=Yt,Ht.prototype=r(Yt.prototype,{_init:function(){Yt.prototype._init.call(this),this._image=new createjs.Bitmap(this._imageData),this._context.addChild(this._image)},_updater:function(e){null==e&&(e=0),Yt.prototype._updater.call(this,e),this._image.x=10*Math.sin(this._kernel.scenes._age/1e3)-10},__class__:Ht});var Vt=function(e,t,s,i,n,r,a,_,o){null==n&&(n=0),null==i&&(i=0);var h=new Ke(e),l=new Ke(e);A.call(this,e,h,l,t,s,i,n,r,a,_,o)};s["b10gph.gui.BlankButton"]=Vt,Vt.__name__="b10gph.gui.BlankButton",Vt.__super__=A,Vt.prototype=r(A.prototype,{_updater:function(e){null==e&&(e=0);var t=this.get_view().context.localToGlobal(0,0);this.get_view().globalX=t.x,this.get_view().globalY=t.y,A.prototype._updater.call(this,e)},__class__:Vt});var zt=function(e,t,s,i,n,r,a,_){null==i&&(i=0),null==s&&(s=0),null==t&&(t=""),this._assets=e.assets,this._factory=e.factory,this._title=t.toUpperCase(),A.call(this,e,this._assets.get_buttonUp(),this._assets.get_buttonOver(),200,65,s,i,n,r,a,_)};s["b10gph.gui.Button"]=zt,zt.__name__="b10gph.gui.Button",zt.__super__=A,zt.prototype=r(A.prototype,{_init:function(){A.prototype._init.call(this);var e=this.width-10,t=this.height-18,s=this._kernel.factory.createTextStyle(_t.BUTTON);this._textUp=new ss(this._kernel,e,t,this._title,s),(s=this._kernel.factory.createTextStyle(_t.BUTTON)).color=this._factory.COLOR_GREY,this._textOver=new ss(this._kernel,e,t,this._title,s),this._textUp.set_x(this._textOver.set_x(5)),this._textUp.set_y(this._textOver.set_y(18)),this._stateUp.addEntity(this._textUp,null,!0,2),this._stateOver.addEntity(this._textOver,null,!0,2)},setTitle:function(e){this._title!=e&&(this._title=e.toUpperCase(),this._textUp.set_text(this._textOver.set_text(this._title)))},onRollOver:function(){A.prototype.onRollOver.call(this),this._kernel.audio.start("ButtonOver",Je.INTERFACE,0,0,.25)},__class__:zt});var jt=function(e,t,s,i,n,r,a,_){null==i&&(i=0),null==s&&(s=0),null==t&&(t=!1),this._isFacebook=t,this._assets=e.assets,this._factory=e.factory,A.call(this,e,this._isFacebook?this._assets.get_buttonFacebookUp():this._assets.get_buttonTwitterUp(),this._isFacebook?this._assets.get_buttonFacebookOver():this._assets.get_buttonTwitterOver(),65,65,s,i,n,r,a,_)};s["b10gph.gui.ButtonIcon"]=jt,jt.__name__="b10gph.gui.ButtonIcon",jt.__super__=A,jt.prototype=r(A.prototype,{_init:function(){A.prototype._init.call(this)},onRollOver:function(){A.prototype.onRollOver.call(this),this._kernel.audio.start("ButtonOver",Je.INTERFACE,0,0,.25)},__class__:jt});var Gt=function(e,t,s,i,n,r,a,_){null==i&&(i=0),null==s&&(s=0),null==t&&(t=""),this._assets=e.assets,this._factory=e.factory,A.call(this,e,this._assets.get_buttonSmallUp(),this._assets.get_buttonSmallOver(),100,30,s,i,n,r,a,_),this.setTitle(t)};s["b10gph.gui.ButtonSmall"]=Gt,Gt.__name__="b10gph.gui.ButtonSmall",Gt.__super__=A,Gt.prototype=r(A.prototype,{_init:function(){A.prototype._init.call(this);var e,t=this.width-10,s=this.height-7;(e=this._kernel.factory.createTextStyle(_t.BUTTON)).size=12,this._textUp=new ss(this._kernel,t,s,this._title,e),(e=this._kernel.factory.createTextStyle(_t.BUTTON)).size=12,e.color=this._factory.COLOR_GREY,this._textOver=new ss(this._kernel,t,s,this._title,e),this._textUp.set_x(this._textOver.set_x(5)),this._textUp.set_y(this._textOver.set_y(7)),this._stateUp.addEntity(this._textUp,null,!0,2),this._stateOver.addEntity(this._textOver,null,!0,2)},_updater:function(e){null==e&&(e=0);var t=this.get_view().context.localToGlobal(0,0);this.get_view().globalX=t.x,this.get_view().globalY=t.y,A.prototype._updater.call(this,e)},setTitle:function(e){this._title=e,this._title=this._title.toUpperCase(),this._textUp.set_text(this._title),this._textOver.set_text(this._title)},onRollOver:function(){A.prototype.onRollOver.call(this),this._kernel.audio.start("ButtonOver",Je.INTERFACE,0,0,.25)},onClick:function(){A.prototype.onClick.call(this),this.isOver=!1},__class__:Gt});var Kt=function(e,t){null==t&&(t=!0),this._isAnimated=t,Ft.call(this,e,120,32,!1)};s["b10gph.gui.Coins"]=Kt,Kt.__name__="b10gph.gui.Coins",Kt.__super__=Ft,Kt.prototype=r(Ft.prototype,{_init:function(){var e=this;Ft.prototype._init.call(this),this._displayValue=this._prevCoins=this._session.coins,this._isAnimated?(this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/location/Cars.png")),this._bitmap.sourceRect=new createjs.Rectangle(0,630,32,32),this._bitmap.y=3):(this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/HudProgress.png")),this._bitmap.sourceRect=new createjs.Rectangle(160,80,32,32),this._bitmap.cache(0,0,32,32)),this._bitmap.x=this.width-32,this._context.addChild(this._bitmap),this._text=new ss(this._kernel,this.width-32-5,35,l.string(this._displayValue),this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_COINS)),this._text.setPosition(.85*this._text.width-10,.5*this._text.height+1),this._text._context.regX=.85*this._text.width,this._text._context.regY=.5*this._text.height,this._session.get_isTester()&&this.addEntity(new Vt(this._kernel,0|this.width,0|this.height,0,0,null,function(){e._session.coins+=100}),null,!0,10),this.addEntity(this._text,null,!0,1)},_updater:function(e){null==e&&(e=0);var t=this;if(Ft.prototype._updater.call(this,e),this._isAnimated&&(this._bitmap.sourceRect.x=this._updates%32*32),!(this._age<3e3)){if(this._prevCoins!=this._session.coins){if(this._kernel.audio.start("Coin",Je.INTERFACE,0,0,.65,null,!1),null!=this._tweezer){var s=this._tweezer;s.isDisposed||(s.isDisposed=!0,s.set_isActive(!1),s._disposer())}this.addEntity(this._tweezer=new Qs(this._kernel,function(e){t._text._context.scaleX=t._text._context.scaleY=e},1.75,1,0,1e3,null,Ks.EASE_OUT,Ws.QUARTIC))}this._prevCoins=this._session.coins,this._displayValue!=this._session.coins&&(this._displayValue=Math.round(.8*this._displayValue+.2*this._session.coins),Math.abs(this._displayValue-this._session.coins)<5&&(this._displayValue=this._session.coins),this._text.set_text(l.string(this._displayValue)))}},__class__:Kt});var Wt=function(e,t,s,i,n){this._delay=t,this._duration=s,this._text=i,this._callback=n,ot.call(this,e)};s["b10gph.gui.Countdown"]=Wt,Wt.__name__="b10gph.gui.Countdown",Wt.__super__=ot,Wt.prototype=r(ot.prototype,{_updater:function(e){null==e&&(e=0),ot.prototype._updater.call(this,e);var t=(this._age-this._delay)/this._duration,s=t>1?1:t<0?0:t;if(s>0){var i=l.string(this._kernel.getConfig("gui.buttons.countdown"))+" "+Math.ceil((this._duration-this._age+this._delay)/1e3);i=i.toUpperCase(),this._text.set_text(i)}1==s&&(null!=this._callback&&this._callback(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:Wt});var Xt=function(e){Ft.call(this,e,e.factory.width,e.factory.height,!1)};s["b10gph.gui.Hud"]=Xt,Xt.__name__="b10gph.gui.Hud",Xt.__super__=Ft,Xt.prototype=r(Ft.prototype,{_init:function(){var e=this;Ft.prototype._init.call(this);var t=new createjs.Bitmap(this._assets.getAsset("assets/gui/Hud.png"));this._context.addChild(t),this._coins=new Kt(this._kernel,!1),this.addEntity(this._coins,null,!0,10),this._coins.setPosition(30,12),this.addEntity(this._score=new ss(this._kernel,60,35,"",this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_SCORE),!1,!1,1),null,!0,10),this._score.setPosition(.35*this._score.width+570,.5*this._score.height+13),this._score._context.regX=.35*this._score.width,this._score._context.regY=.5*this._score.height,this.addEntity(this._message=new ss(this._kernel,this.width,50,"",this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_MESSAGE),!1,!1,10),null,!0,10),this._message.setPosition(0,(this._factory.height+90)/2),this._message.get_view().set_isVisible(!1),this.addEntity(this._instructions=new Yt(this._kernel,this._assets.getAsset(this._system.isDesktop?"assets/gui/InstructionsA.png":"assets/gui/InstructionsB.png"),!1,this._instructionsAlpha),null,!0,9),this._instructions.setPosition((this._factory.width-300)/2,this._factory.height-200),this.addEntity(this._progress=new Qt(this._kernel),null,!0,10),this._progress.setPosition((this._kernel.factory.width-this._progress.width)/2,9),this.configureScore(12);var s=function(t){e._instructions.set_y(t)};this.addEntity(new Qs(this._kernel,s,this._factory.height,this._instructions.y,0,1e3,1e3,Ks.EASE_OUT,Ws.QUARTIC,function(){e.addEntity(new Qs(e._kernel,s,e._instructions.y,e._factory.height,0,1e3,0,Ks.EASE_IN,Ws.BACK(),function(){e._instructions.get_view().set_isVisible(!1)}))})),this.addEntity(new Qs(this._kernel,function(t){e._progress.set_y(t)},-this._progress.height,this._progress.y,4e3,1e3,0,Ks.EASE_OUT,Ws.QUARTIC)),this.addEntity(new Qs(this._kernel,function(t){e._score.set_y(t)},-this._progress.height,this._score.y,4e3,1e3,0,Ks.EASE_OUT,Ws.QUARTIC)),this.addEntity(new Qs(this._kernel,function(t){e._coins.set_y(t)},-this._progress.height,this._coins.y,4e3,1e3,0,Ks.EASE_OUT,Ws.QUARTIC))},_updater:function(e){null==e&&(e=0),Ft.prototype._updater.call(this,e)},configureScore:function(e){var t=this;if(this._prevScore!=e){var s;switch(this._prevScore=e,e){case 1:s="st";break;case 2:s="nd";break;case 3:s="rd";break;default:s="th"}var i=e+s;if(i=i.toUpperCase(),this._score.set_text(i),null!=this._scoreTweezer){var n=this._scoreTweezer;n.isDisposed||(n.isDisposed=!0,n.set_isActive(!1),n._disposer())}this.addEntity(this._scoreTweezer=new Qs(this._kernel,function(e){t._score._context.scaleX=t._score._context.scaleY=e},1.75,1,0,1e3,null,Ks.EASE_OUT,Ws.QUARTIC))}},configureProgress:function(e){this._progress.configure(e)},configureMessage:function(e){var t=this;e=e.toUpperCase(),this.addEntity(new Qs(this._kernel,function(e){t._message.set_y(e)},this._factory.height,this._message.y,0,2e3,0,Ks.EASE_OUT,Ws.ELASTIC())),this._message.set_text(e),this._message.get_view().set_isVisible(!0)},__class__:Xt});var Qt=function(e){Ft.call(this,e,420,40,!1)};s["b10gph.gui.HudProgress"]=Qt,Qt.__name__="b10gph.gui.HudProgress",Qt.__super__=Ft,Qt.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._context.cache(0,0,this.width,this.height);var e=this._context.cacheCanvas;this._context2d=e.getContext("2d",null),this._source=this._assets.getAsset("assets/gui/HudProgress.png")},_drawNeedle:function(e,t,s){var i;switch(e._hx_index){case 0:i=0;break;case 1:i=32;break;case 2:i=64;break;case 3:i=96;break;case 4:i=128}this._context2d.drawImage(this._source,i+8,88,16,16,this._getX(t)+74-8,Math.round(6*s)+12,16,16)},_getX:function(e){return Math.round(Math.min(268*e,328))},configure:function(e){this._context2d.clearRect(0,0,this.width,this.height),this._context2d.fillStyle="#cd040b",this._context2d.globalAlpha=.85;var t=Math.min(268*e[e.length-1].position,268),s=this._context2d.createLinearGradient(74+t,0,74+t+10,3);s.addColorStop(0,"rgba(205, 4, 11, 1)"),s.addColorStop(1,"rgba(205, 4, 11, 0)"),this._context2d.fillStyle=s,this._context2d.beginPath(),this._context2d.moveTo(82,8),this._context2d.lineTo(74+t+20,8),this._context2d.lineTo(74+t-5+20,33),this._context2d.lineTo(77,33),this._context2d.fill(),this._context2d.globalAlpha=1,this._context2d.drawImage(this._source,0,0,420,40,0,0,420,40);for(var i=0;i<e.length;){var n=e[i];++i,this._drawNeedle(n.type,n.position,n.offset)}this._context2d.drawImage(this._source,0,40,420,40,0,0,420,40)},__class__:Qt});var Jt=function(e,t,s,i){null==i&&(i=!1),null==s&&(s=0),this._type=t,this._isSelected=i,Ft.call(this,e,200,405,!1),this.set_x(s)};s["b10gph.gui.LocationPreview"]=Jt,Jt.__name__="b10gph.gui.LocationPreview",Jt.__super__=Ft,Jt.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._vo=new Rt(this._kernel,this._type),this._mask=this._assets.getAsset("assets/gui/LocationPreviewMask.png"),this._image=this._assets.getAsset("assets/gui/LocationPreview.png"),this._bitmap=new createjs.Bitmap(this._mask),this._bitmap.cache(0,0,this.width,this.height),this._context.addChild(this._bitmap);var e=this._factory.createTextStyle(_t.SUBHEAD);e.align=at.CENTER,this._text=new ss(this._kernel,110,30,this._vo.altTitle.toUpperCase(),e),this._text.setPosition(58,100),this.addEntity(this._text,null,!0,10),this._shine=new es(this._kernel,this._mask),this._draw()},_draw:function(){var e,t=0|this.width;switch(this._type._hx_index){case 0:e=0;break;case 1:e=1;break;case 2:e=2;break;case 3:e=3}var s=t*e,i=this._bitmap.cacheCanvas.getContext("2d",null);i.clearRect(0,0,this.width,this.height),i.globalAlpha=1,i.globalCompositeOperation="source-out",i.drawImage(this._mask,0,0),i.globalCompositeOperation="source-in",i.drawImage(this._image,s,0,this.width,this.height,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",i.fillStyle="#191919",i.globalAlpha=this._isSelected?0:.85,i.fillRect(0,0,this.width,this.height),this._text.set_alpha(this._isSelected?1:.15),this._shine.remove(!0),this._isSelected&&this.addEntity(this._shine,null,!0,15)},configure:function(e){this._isSelected!=e&&(this._isSelected=e,this._draw()),this._isSelected=e},__class__:Jt});var Zt=function(e){Ft.call(this,e,450,105,!1)};s["b10gph.gui.Logo"]=Zt,Zt.__name__="b10gph.gui.Logo",Zt.__super__=Ft,Zt.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this.addEntity(new es(this._kernel,this._assets.getAsset("assets/gui/LogoShine.png")),null,!0,1),this._context.addChild(new createjs.Bitmap(this._assets.getAsset("assets/gui/Logo.png")))},__class__:Zt});var qt=function(e){this._assetManager=zs.__cast(e.assets,lt),this._buttonSize=50,Ue.call(this,e,this._buttonSize,this._buttonSize,null,null,null,null,null,null,null,this._assetManager.overlayPauseUp,this._assetManager.overlayPauseOver,null,null,4,0,.85)};s["b10gph.gui.Overlay"]=qt,qt.__name__="b10gph.gui.Overlay",qt.__super__=Ue,qt.prototype=r(Ue.prototype,{_init:function(){Ue.prototype._init.call(this);var e=this._kernel.factory.width-this._buttonSize-5;this.positionButton(nt.PAUSE,e,4),this.positionButton(nt.UNPAUSE,-this._buttonSize-10,4),this.positionButton(nt.BACK,-this._buttonSize-10,4),this.positionButton(nt.MUTE,-this._buttonSize-10,4),this.positionButton(nt.UNMUTE,-this._buttonSize-10,4),this._flashView.set_isVisible(!0),this._pauseMenu=new $t(this._kernel),this.set_pauseEntity(this._pauseMenu)},flash:function(e,t,s,i){null==i&&(i=16777215),null==s&&(s=1),null==t&&(t=!0),this._flashContext.compositeOperation=0==i?"source-over":"lighter",Ue.prototype.flash.call(this,e,t,s,i)},_drawPause:function(e){null==e&&(e=!0),Ue.prototype._drawPause.call(this,e),this._pauseMenu.pauseHandler(e)},__class__:qt});var $t=function(e){ot.call(this,e)};s["b10gph.gui.PauseMenu"]=$t,$t.__name__="b10gph.gui.PauseMenu",$t.__super__=ot,$t.prototype=r(ot.prototype,{_init:function(){var e=this;ot.prototype._init.call(this),this.addEntity(this._debugText=new ss(this._kernel,this._factory.width-20,20,"",this._factory.createTextStyle(_t.SMALLPRINT),!0,!1,1),null,!0,2),this._debugText.setPosition(10,this._factory.height-this._debugText.height);var t=(this._kernel.factory.width-200)/2,s=(this._kernel.factory.height-65*(this._isFullScreenSupported()?4:3))/2;this.addEntity(this._logo=new Yt(this._kernel,this._kernel.assets.getAsset("assets/gui/PauseBg.png")),null,!0,0),this.addEntity(new zt(this._kernel,this._kernel.getConfig("gui.buttons.unpause"),t,s,null,function(){e._kernel.overlay.activateButton(nt.UNPAUSE)}),Qe.ALWAYS,!0,1),this.addEntity(this._audioButton=new zt(this._kernel,this._kernel.getConfig("gui.buttons.audioOff"),t,s+=65,null,function(){e._kernel.overlay._wasMute=!e._kernel.overlay._wasMute,e._kernel.overlay.activateButton(nt.UNPAUSE)}),Qe.ALWAYS,!0,1),this._isFullScreenSupported()&&this.addEntity(this._fullScreenButton=new zt(this._kernel,this._kernel.getConfig("gui.buttons.fullScreenOn"),t,s+=65,null,function(){e._stageClick(),e._kernel.overlay.activateButton(nt.UNPAUSE)}),Qe.ALWAYS,!0,1),this.addEntity(new zt(this._kernel,this._kernel.getConfig("gui.buttons.back"),t,s+=65,null,function(){e._kernel.overlay.activateButton(nt.UNPAUSE),e._kernel.scenes.back()}),Qe.DEFEND,!0,1),this.addEntity(new zt(this._kernel,this._kernel.getConfig("gui.buttons.instructions"),t,s,null,function(){e._kernel.overlay.activateButton(nt.UNPAUSE),e._pressInstructions()}),Qe.STANDARD,!0,1)},_isFullScreenSupported:function(){return!1},_isFullScreenEnabled:function(){try{var e=window.document;return!!e.fullscreenElement||(!!e.mozFullScreenElement||(!!e.webkitFullscreenElement||e.msFullscreenElement))}catch(e){}return!1},_disposer:function(){this._kernel._stage.removeEventListener("click",oi(this,this._stageClick),!0),ot.prototype._disposer.call(this)},_pressInstructions:function(){try{this._kernel.scenes.get_scene()._pressInstructions()}catch(e){this._kernel.scenes.setScene(rt.INSTRUCTIONS)}},_updater:function(e){null==e&&(e=0),ot.prototype._updater.call(this,e),this._isFullScreenClicked=!1},pauseHandler:function(e){var t=this;e?(this._audioButton.setTitle(this._kernel.getConfig(this._kernel.audio.isMute?"gui.buttons.audioOn":"gui.buttons.audioOff")),null!=this._fullScreenButton&&this._fullScreenButton.setTitle(this._kernel.getConfig(this._isFullScreenEnabled()?"gui.buttons.fullScreenOff":"gui.buttons.fullScreenOn")),this._kernel._stage.addEventListener("click",oi(this,this._stageClick),!0),this._debugText.set_text(this._factory.id.toLowerCase()+" v"+this._factory.version+" @ "+Math.round(this._kernel.getFramerate())+"fps : "+this._session.cache.debugMessage),this.addEntity(new Qs(this._kernel,function(e){t._context.y=e},this._factory.height,0,0,500,null,Ks.EASE_OUT,Ws.QUARTIC)),this.addEntity(new Qs(this._kernel,function(e){t._logo.set_alpha(e)},0,1,2e3,2e3,null,Ks.EASE_OUT,Ws.QUARTIC))):this._kernel._stage.removeEventListener("click",oi(this,this._stageClick),!0)},_stageClick:function(e){this._kernel.isActive||null!=this._fullScreenButton&&(this._isFullScreenClicked||this._fullScreenButton.isOver&&(this._isFullScreenEnabled()?this._kernel.system.requestExitFullScreen():(this._kernel.system.requestFullScreen(),this._kernel.system.requestLockScreen()),this._isFullScreenClicked=!0,null!=e&&e.stopPropagation(),this._kernel.overlay.activateButton(nt.UNPAUSE)))},__class__:$t});var es=function(e,t,s){null==s&&(s=1),this._context=new createjs.Container,this._alphaMask=t,this._speed=s,k.call(this,e,null,this._context)};s["b10gph.gui.Shine"]=es,es.__name__="b10gph.gui.Shine",es.__super__=k,es.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this),this.width=this._alphaMask.width,this.height=this._alphaMask.height,this._context.compositeOperation="lighter",this._context.cache(0,0,this.width,this.height),this._canvas=this._context.cacheCanvas,this._context2d=this._canvas.getContext("2d",null),this._context.alpha=.35},_updater:function(e){null==e&&(e=0),k.prototype._updater.call(this,e),this._draw()},_draw:function(){if(this._kernel.isEyeCandy){this._context2d.clearRect(0,0,this.width,this.height),this._context2d.globalCompositeOperation="source-out",this._context2d.drawImage(this._alphaMask,0,0);var e=this._speed*this._age,t=this._rotatePoint(.5*this.width*Math.sin(e/900),.5*this.height,e/1e3,.5*this.width,.5*this.height),s=this._rotatePoint(this.width,.5*this.height+.5*this.height*Math.sin(e/1300),e/1e3,.5*this.width,.5*this.height),i=this._context2d.createLinearGradient(t.x,t.y,s.x,s.y);i.addColorStop(.15,"#000000"),i.addColorStop(.3,"#FFFFFF"),i.addColorStop(.5,"#333333"),i.addColorStop(.78,"#a6a6a6"),i.addColorStop(.82,"#bfbfbf"),i.addColorStop(.86,"#a6a6a6"),i.addColorStop(.88,"#FFFFFF"),i.addColorStop(.98,"#000000"),this._context2d.fillStyle=i,this._context2d.globalCompositeOperation="source-in",this._context2d.fillRect(0,0,this.width,this.height)}},_rotatePoint:function(e,t,s,i,n){var r=Math.sin(s),a=Math.cos(s),_=(e-=i)*a-(t-=n)*r,o=e*r+t*a;return{x:_+=i,y:o+=n}},__class__:es});var ts=function(e,t,s,i,n){null==n&&(n=""),null==i&&(i=""),null==s&&(s=""),null==t&&(t=1),this._bgColor=t,Ft.call(this,e,230,25,!1),this._column1.set_text(s.toUpperCase()),this._column2.set_text(i.toUpperCase()),this._column3.set_text(n.toUpperCase())};s["b10gph.gui.TableRow"]=ts,ts.__name__="b10gph.gui.TableRow",ts.__super__=Ft,ts.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this);var e,t,s=new createjs.Bitmap(this._assets.getAsset("assets/gui/HudProgress.png"));switch(this._bgColor){case 1:e=112;break;case 2:e=137;break;default:e=162}s.sourceRect=new createjs.Rectangle(0,e,230,25),this._context.addChild(s),this._column1=new ss(this._kernel,110,20,"",this._factory.createTextStyle(_t.BODY),!1,!1,1),this._column1.setPosition(7,2),this.addEntity(this._column1,null,!0,1),(t=this._factory.createTextStyle(_t.BODY)).align=at.CENTER,this._column2=new ss(this._kernel,70,20,"",t,!1,!1,1),this._column2.setPosition(100,2),this.addEntity(this._column2,null,!0,1),(t=this._factory.createTextStyle(_t.BODY)).align=at.RIGHT,this._column3=new ss(this._kernel,50,20,"",t,!1,!1,1),this._column3.setPosition(173,2),this.addEntity(this._column3,null,!0,1)},__class__:ts});var ss=function(e,t,s,i,n,r,a,_){null==_&&(_=1),null==a&&(a=!1),null==r&&(r=!1),null==i&&(i=""),i=u.replace(i,"<BR/>","\n"),i=u.replace(i,"<br/>","\n"),Ge.call(this,e,t,s,i,n,r,a),this.set_alpha(_)};s["b10gph.gui.Text"]=ss,ss.__name__="b10gph.gui.Text",ss.__super__=Ge,ss.prototype=r(Ge.prototype,{_init:function(){Ge.prototype._init.call(this),this._textField.textBaseline="alphabetic",this._textField.y+=1.05*this.textStyle.size},set_alpha:function(e){return this._context.alpha=e},__class__:ss,__properties__:r(Ge.prototype.__properties__,{set_alpha:"set_alpha"})});var is=function(e,t){this._title=t,Ft.call(this,e,470,100,!1)};s["b10gph.gui.Title"]=is,is.__name__="b10gph.gui.Title",is.__super__=Ft,is.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._context.addChild(new createjs.Bitmap(this._assets.getAsset("assets/gui/Title.png"))),this._text=new ss(this._kernel,460,30,"",this._factory.createTextStyle(_t.HEADLINE),!1,!1,1),this._text.setPosition(10,54),this.addEntity(this._text,null,!0,1),this.set_x(this._factory.width-this.width),this.configure(this._title)},configure:function(e){this._title=e,this._title=this._title.toUpperCase(),this._text.set_text(this._title)},__class__:is});var ns=function(e,t){this._type=t,Ft.call(this,e,470,40,!1)};s["b10gph.gui.Upgrade"]=ns,ns.__name__="b10gph.gui.Upgrade",ns.__super__=Ft,ns.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._prevCoins=this._session.coins;var e,t=new createjs.Bitmap(this._assets.getAsset("assets/gui/HudProgress.png"));switch(t.x=150,t.sourceRect=new createjs.Rectangle(0,188,200,40),t.cache(0,0,200,40),this._context.addChild(t),this._type._hx_index){case 0:e="gui.upgrades.speed";break;case 1:e="gui.upgrades.steering";break;case 2:e="gui.upgrades.acceleration";break;case 3:e="gui.upgrades.boost"}var s,i,n=l.string(this._kernel.getConfig(e)).toUpperCase(),r=new createjs.Bitmap(this._assets.getAsset("assets/gui/HudProgress.png"));switch(r.x=110,this._type._hx_index){case 0:s=230;break;case 1:s=270;break;case 2:s=310;break;case 3:s=350}r.sourceRect=new createjs.Rectangle(s,112,40,40),r.cache(0,0,40,40),this._context.addChild(r),(i=this._factory.createTextStyle(_t.BODY)).align=at.RIGHT,this._title=new ss(this._kernel,100,20,n,i),this._title.setPosition(0,8),this.addEntity(this._title,null,!0,1),this._bars=new createjs.Container,this._bars.x=t.x,this._context.addChild(this._bars),this._button=new Gt(this._kernel,"",340,4,null,oi(this,this.buy)),this._session.get_isTester()&&this.addEntity(new Vt(this._kernel,173,25,this._bars.x+10,5,null,oi(this,this._reduce)),null,!0,1),(i=this._factory.createTextStyle(_t.BODY)).align=at.CENTER,this._message=new ss(this._kernel,100,20,"",i,null,null,.5),this._message.setPosition(340,8),this.addEntity(this._message,null,!0,29),this.configure(this._session.getUpgrade(this._type))},_updater:function(e){null==e&&(e=0),Ft.prototype._updater.call(this,e),this._prevCoins!=this._session.coins&&(this._prevCoins=this._session.coins,this.configure(this._session.getUpgrade(this._type)))},_createBar:function(e,t){var s=new createjs.Bitmap(this._assets.getAsset("assets/gui/HudProgress.png"));return s.x=t,s.sourceRect=new createjs.Rectangle(230+50*(e-1),152,55,40),s.cache(0,0,55,40),s},configure:function(e){this._bars.removeAllChildren();var t=this._getPrice(e+1),s=t<=this._session.coins;this._button.setTitle(l.string(this._kernel.getConfig("gui.buttons.buy"))+" "+t),4==e?(this._button.remove(!0),this._message.set_text(l.string(this._kernel.getConfig("gui.scenes.shop.maxed")).toUpperCase())):s?(this._message.set_text(""),this.addEntity(this._button,null,!0,30)):(this._button.remove(!0),this._message.set_text(null==t?"null":""+t)),this._bars.addChild(this._createBar(0<e?1:0==e&&s?2:3,8)),this._bars.addChild(this._createBar(1<e?1:1==e&&s?2:3,49)),this._bars.addChild(this._createBar(2<e?1:2==e&&s?2:3,90)),this._bars.addChild(this._createBar(3<e?1:3==e&&s?2:3,131))},_getPrice:function(e){e<0&&(e=0),e>4&&(e=4);return[0,100,300,600,1200][e]},buy:function(){var e=this._session.getUpgrade(this._type),t=this._getPrice(e+1);t<=this._session.coins&&(this._session.coins-=t,this._session.setUpgrade(this._type,e+1),this.configure(this._session.getUpgrade(this._type)),this._kernel.audio.start("Upgrade",Je.INTERFACE,0,0,.5))},_reduce:function(){this._session.setUpgrade(this._type,this._session.getUpgrade(this._type)-1),this.configure(this._session.getUpgrade(this._type))},__class__:ns});var rs=function(e,t){null==t&&(t=1),Ft.call(this,e,null,null,!1),this.set_alpha(t)};s["b10gph.gui.Vignette"]=rs,rs.__name__="b10gph.gui.Vignette",rs.__super__=Ft,rs.prototype=r(Ft.prototype,{_init:function(){Ft.prototype._init.call(this),this._context.mouseEnabled=!1,this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/Vignette.png")),this._context.addChild(this._bitmap)},set_alpha:function(e){return this._bitmap.alpha=e},__class__:rs,__properties__:r(Ft.prototype.__properties__,{set_alpha:"set_alpha"})});var as=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),this._session=e.get_session(),this._assets=e.assets,this._factory=e.factory,this._system=e.system,j.call(this,e,t,s=!0,i,n)};s["b10gph.scenes.AScene"]=as,as.__name__="b10gph.scenes.AScene",as.__super__=j,as.prototype=r(j.prototype,{_init:function(){j.prototype._init.call(this),this._easyTweezers=[],this._kernel.overlay.get_pauseEntity().setAgenda(Qe.STANDARD),this._factory.preventDefaultForKeys([et.SPACE]),this._kernel.audio.start("MusicMenu",Je.MUSIC,-1,0,.5,null,!0)},_disposer:function(){this._factory.allowDefaultForKeys([et.SPACE]),j.prototype._disposer.call(this)},_pressContinue:function(){this._kernel.log("button: continue: "+l.string(this.type));var e=this._factory.getNextSceneType(this.type);this.type==rt.RESULTS&&4==this._session.level&&(e=rt.INTERSTITIAL),this._kernel.inputs.keyboard.getIsKeyDown(et.SQUARELEFT)&&this._kernel.inputs.keyboard.getIsKeyDown(et.SQUARERIGHT)&&this._session.setIsTester(!this._session.get_isTester());var s=oi(t=this._kernel.scenes,t.setScene),i=e;this._outro(function(){s(i)})},_pressReset:function(){this._kernel.log("button: reset: "+l.string(this.type));var e=this._session;e._data={},e._resetter(),e._setter();var s=oi(t=this._kernel.scenes,t.setScene),i=rt.MENU;this._outro(function(){s(i)})},_pressInstructions:function(){this._kernel.log("button: instructions");var e=oi(t=this._kernel.scenes,t.setScene),s=rt.INSTRUCTIONS;this._outro(function(){e(s)})},_pressAuthor:function(){var e=this;this._kernel.log("button: author"),Es.delay(function(){var t=e._kernel.getConfig("settings.urls.author");window.top.location.href=l.string(t)},500)},_outro:function(e){this._isOutroCalled||(this._isOutroCalled=!0,null!=e&&e())},_addBg:function(e,t,s){null==s&&(s=!1),null==t&&(t=!0),null==e&&(e=1),this.addEntity(new Ht(this._kernel,this._assets.getAsset(s?"assets/gui/SceneBgC.jpg":t?"assets/gui/SceneBgA.png":"assets/gui/SceneBgB.png")),null,!0,e),this.addEntity(new rs(this._kernel,.5),null,!0,e+1)},_addFg:function(e,t){null==t&&(t=!0),null==e&&(e=100);var s=this;this._fgHorizontal=new Yt(this._kernel,this._assets.getAsset("assets/gui/SceneFgHorizontal.png")),this._fgVertical=new Yt(this._kernel,this._assets.getAsset("assets/gui/SceneFgVertical.png")),this.addEntity(this._fgVertical,null,!0,e+1),this.addEntity(new Qs(this._kernel,function(e){s._fgVertical.set_y(e)},this._factory.height,this._fgVertical.y,750,1e3,null,Ks.EASE_OUT,Ws.EXPONENTIAL)),t&&(this.addEntity(this._fgHorizontal,null,!0,e),this.addEntity(new Qs(this._kernel,function(e){s._fgHorizontal.set_x(e)},-this._factory.width,this._fgHorizontal.x,500,1e3,null,Ks.EASE_OUT,Ws.EXPONENTIAL)))},_addButtons:function(e,t,s,i,n){null==n&&(n=0),null==i&&(i=0),null==e&&(e=110);var r=this;this._buttonRight=t,this._buttonLeft=s,this._buttonRight.setPosition(this._factory.width-200-30,this._factory.height-65-18),this.addEntity(this._buttonRight,null,!0,e),this.addEntity(new Qs(this._kernel,function(e){r._buttonRight.set_y(e)},this._factory.height+60,this._buttonRight.y,i+1200,2e3,null,Ks.EASE_OUT,Ws.ELASTIC())),null!=this._buttonLeft&&(this._buttonLeft.setPosition(this._buttonRight.x-210,this._factory.height-65-18),this.addEntity(this._buttonLeft,null,!0,e+1),this.addEntity(new Qs(this._kernel,function(e){r._buttonLeft.set_y(e)},this._factory.height+60,this._buttonLeft.y,n+1400,2e3,null,Ks.EASE_OUT,Ws.ELASTIC())))},_defaultOutro:function(e){var t=this;if(!this._isOutroCalled){this._isOutroCalled=!0;for(var s=0,i=this.getEntitiesByClass(Qs);s<i.length;){var n=i[s];++s,n.remove()}this._easyTweez(!1),null!=this._buttonLeft&&this.addEntity(new Qs(this._kernel,function(e){t._buttonLeft.set_y(e)},this._buttonLeft.y,this._factory.height,0,1e3,null,Ks.EASE_IN,Ws.BACK())),this.addEntity(new Qs(this._kernel,function(e){t._buttonRight.set_y(e)},this._buttonRight.y,this._factory.height,100,1e3,null,Ks.EASE_IN,Ws.BACK(),e)),this.addEntity(new Qs(this._kernel,function(e){t._fgHorizontal.set_x(e)},this._fgHorizontal.x,-this._factory.width,250,500,null,Ks.EASE_IN,Ws.EXPONENTIAL)),this.addEntity(new Qs(this._kernel,function(e){t._fgVertical.set_y(e)},this._fgVertical.y,this._factory.height,500,500,null,Ks.EASE_IN,Ws.EXPONENTIAL)),this._kernel.audio.start("Transition",Je.INTERFACE,0,0,.25),this._kernel.isDebug&&e()}},_easyTweez:function(e){null==e&&(e=!0);for(var t=0,s=this._easyTweezers;t<s.length;){var i=[s[t]];++t,e?i[0].isVerticalIn?this.addEntity(new Qs(this._kernel,function(e){return function(t){e[0].guiEntity.set_y(t)}}(i),-this._factory.height+i[0].guiEntity.y,i[0].guiEntity.y,500+100*i[0].sequence,2e3,null,Ks.EASE_OUT,Ws.QUARTIC)):this.addEntity(new Qs(this._kernel,function(e){return function(t){e[0].guiEntity.set_x(t)}}(i),this._factory.width+i[0].guiEntity.x,i[0].guiEntity.x,500+100*i[0].sequence,2e3,null,Ks.EASE_OUT,Ws.QUARTIC)):this.addEntity(new Qs(this._kernel,function(e){return function(t){e[0].guiEntity.set_x(t)}}(i),i[0].guiEntity.x,-1.5*this._factory.width+i[0].guiEntity.x,50*i[0].sequence,500,null,Ks.EASE_IN,Ws.BACK()))}},_addEasyTweez:function(e,t,s){null==s&&(s=!0),this._easyTweezers.push({guiEntity:e,sequence:t,isVerticalIn:s})},_getLocationType:function(e){return p.createEnumIndex(St,e%St.__constructs__.slice().length)},_getPoints:function(e){var t=[0,50,40,35,32,30,28,26,24,22,20,19,18];return t[e%t.length]},_getRank:function(e){var t;switch(e){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break;default:t="th"}switch(e){case 1:return{rank:"good",message:l.string(this._kernel.getConfig("gui.rank.good")),ending:t};case 2:case 3:return{rank:"ok",message:l.string(this._kernel.getConfig("gui.rank.ok")),ending:t};default:return{rank:"poor",message:l.string(this._kernel.getConfig("gui.rank.poor")),ending:t}}},__class__:as});var _s=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Game"]=_s,_s.__name__="b10gph.scenes.Game",_s.__super__=as,_s.prototype=r(as.prototype,{_init:function(){var e=this;if(as.prototype._init.call(this),this.isPauseable=!0,this._kernel.overlay.get_pauseEntity().setAgenda(Qe.DEFEND),this._session.cache.totalPlays++,this.addEntity(this._hud=new Xt(this._kernel),null,!0,100),this.addEntity(this._location=new It(this._kernel,this._getLocationType(this._session.level)),null,!0,10),this._session.get_isTester()){var t=oi(this,this._handleFinishLine),s=new zt(this._kernel,this._kernel.getConfig("gui.buttons.testMode.finish"),.15*(this._kernel.factory.width-200),this._kernel.factory.height-80,null,function(){return t(null,null)}),i=new zt(this._kernel,this._kernel.getConfig("gui.buttons.testMode.skip"),.85*(this._kernel.factory.width-200),this._kernel.factory.height-80,null,oi(this,this._gameOver));this._addButtons(null,i,s,1e3,1e3)}this._kernel.messenger.addSubscriber(this._entity,this._factory.MESSAGE_FINISH_LINE,oi(this,this._handleFinishLine),null,null,!0),this._kernel.audio.stop(null,Je.MUSIC),this._kernel.audio.start("MusicGame",Je.MUSIC,-1,0,.05,0),this._kernel.audio.start("Engines",Je.EFFECTS,0,0,1,null,!0),this._kernel.audio.start("VocalStart",Je.INTERFACE,0,0,1,null,!0),this.addEntity(new Qs(this._kernel,function(t){e._kernel.audio.transform("MusicGame",Je.MUSIC,t)},.05,.75,2e3,8e3)),this._kernel.log((this._session.cache.totalPlays>1?"replay":"play")+": "+l.string(this._location.type)),this._session.get_poki().gameplayStart()},_createDelay:function(e,t){null==t&&(t=1e3),null==this._delay&&this.addEntity(this._delay=new We(this._kernel,e,t))},_handleFinishLine:function(e,t){for(var s=0,i=this.getEntitiesByClass(zt);s<i.length;){var n=i[s];++s,n.isDisposed||(n.isDisposed=!0,n.set_isActive(!1),n._disposer())}var r=this._location.getScore();this._hud.configureMessage(this._getRank(r).message),this._session.setScore(this._session.level,r),this._session.level++;var a=this._getRank(r).rank;this._kernel.log("rank: "+a+": "+l.string(this._location.type)),this._createDelay(oi(this,this._gameOver),5e3),this._kernel.overlay.flash(500,!0,.5,16777215),this._kernel.audio.stop("MusicGame",Je.MUSIC),this._kernel.audio.start("Driveby1",Je.MUSIC,1,0,.5),this._kernel.audio.start("Engines",Je.EFFECTS,0,0,.5);this._tools;return this._kernel.audio.start("VocalRank"+(a.charAt(0).toUpperCase()+_.substr(a,1,null).toLowerCase()),Je.INTERFACE,0,0,1,null,!0),this._kernel.audio.start(r<=3?"MusicWin":"MusicLose",Je.INTERFACE,1,0,.5),this.addEntity(new rs(this._kernel,.65),null,!0,90),!1},_gameOver:function(){this._kernel.scenes.next()},_updater:function(e){null==e&&(e=0),as.prototype._updater.call(this,e),this._hud.configureScore(this._location.getScore()),this._hud.configureProgress(this._location.getCars())},_disposer:function(){this._kernel.audio.stop(null,Je.MUSIC);var e=this._session;e.saveCount++,e._setter(),e._savedData._____VERSION=e._version,e._savedData[e.id]=e._data,e._driverSave(),this._session.get_poki().gameplayStop(),as.prototype._disposer.call(this)},__class__:_s});var os=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Instructions"]=os,os.__name__="b10gph.scenes.Instructions",os.__super__=as,os.prototype=r(as.prototype,{_init:function(){as.prototype._init.call(this),this._kernel.overlay.get_pauseEntity().setAgenda(Qe.DEFEND),this._addBg(null,!1),this._addFg();var e=new is(this._kernel,this._kernel.getConfig("gui.scenes.instructions.title"));this.addEntity(e,null,!0,19);var t=new zt(this._kernel,this._kernel.getConfig("gui.buttons.play"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue));this._addButtons(null,t);var s=new Yt(this._kernel,this._assets.getAsset(this._system.isDesktop?"assets/gui/InstructionsA.png":"assets/gui/InstructionsB.png"));this.addEntity(s,null,!0,20),s.setPosition((this._factory.width-s.width)/2,(this._factory.height-s.height)/2);var i=new ss(this._kernel,200,300,l.string(this._kernel.getConfig("gui.scenes.instructions.message")),this._factory.createTextStyle(_t.BODY),!0,!1,.5);i.setPosition(this._kernel.factory.width-i.width-20,140),this.addEntity(i,null,!0,21),this._addEasyTweez(e,0),this._addEasyTweez(s,1,!1),this._addEasyTweez(i,2,!1),this._easyTweez(!0)},_outro:function(e){this._defaultOutro(e)},__class__:os});var hs=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Interstitial"]=hs,hs.__name__="b10gph.scenes.Interstitial",hs.__super__=as,hs.prototype=r(as.prototype,{_init:function(){var e=this;as.prototype._init.call(this),this._kernel.audio.stop("MusicMenu",Je.MUSIC),this._addBg(null,!1,!0),this._addFg(null,!1),this._logo=new Zt(this._kernel),this._logo.setPosition(270,220),this.addEntity(this._logo,null,!0,100),this.addEntity(new Qs(this._kernel,function(t){e._logo.set_x(t)},-this._factory.width,this._logo.x,1e3,2e3,null,Ks.EASE_OUT,Ws.ELASTIC())),this.addEntity(new We(this._kernel,function(){e._kernel.audio.start("Driveby2",Je.EFFECTS,0,0,1)},1e3));var t=new zt(this._kernel,this._kernel.getConfig("gui.buttons.replay"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue));this._addButtons(null,t,null,4e3);var s=this._getPoints(this._session.scoreLevel0)+this._getPoints(this._session.scoreLevel1)+this._getPoints(this._session.scoreLevel2)+this._getPoints(this._session.scoreLevel3),i=new ss(this._kernel,270,300,l.string(l.string(this._kernel.getConfig("gui.scenes.interstitial.total"))+" "+s+" / 200").toUpperCase(),this._factory.createTextStyle(_t.OVERSIZED),!0,!1,1);i.setPosition(this._kernel.factory.width-i.width-40,85),this.addEntity(i,null,!0,21);var n=new ss(this._kernel,270,300,l.string(l.string(this._kernel.getConfig("gui.scenes.interstitial.personalBest"))+" "+this._session.highScore+" / 200").toUpperCase(),this._factory.createTextStyle(_t.OVERSIZED),!0,!1,1);n.setPosition(this._kernel.factory.width-n.width-40,i.y+25),this.addEntity(n,null,!0,21),this._addEasyTweez(i,3,!1),this._addEasyTweez(n,4,!1),this._easyTweez(),this._session.get_poki().happyTime(s/200)},_outro:function(e){var t=this;this._defaultOutro(e),this._kernel.audio.start("Driveby1",Je.INTERFACE,0,0,.5,0,!0),this.addEntity(new Qs(this._kernel,function(e){t._logo.set_x(e)},this._logo.x,this._factory.width,0,1e3,null,Ks.EASE_IN,Ws.BACK()))},__class__:hs});var ls=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Intro"]=ls,ls.__name__="b10gph.scenes.Intro",ls.__super__=as,ls.prototype=r(as.prototype,{_init:function(){as.prototype._init.call(this);var e=this._factory.createCanvas(this._factory.width,this._factory.height);this._destinationContext2d=e.getContext("2d",null),this._sourceImage=this._assets.getAsset("assets/location/RoadA.jpg"),this._sourceCanvas=this._factory.createCanvas(this._sourceImage.width,this._sourceImage.height),this._sourceCanvas.getContext("2d",null).drawImage(this._sourceImage,0,0)},_updater:function(e){if(null==e&&(e=0),as.prototype._updater.call(this,e),1==this._updates){var t=this._stressTest(this._sourceImage),s=this._stressTest(this._sourceCanvas),i=this._stressTest(this._sourceCanvas),n=this._stressTest(this._sourceImage),r=t+n,a=s+i,_=Math.round(100*r/a)/100,o=_<1.7,h=Math.round(100*(o?a:r)/300);this._session.cache.isDrawImageUsingCanvas=o,this._session.cache.benchmark=Math.round(h),this._session.cache.debugMessage=(null==_?"null":""+_)+" | "+this._session.cache.benchmark;"Image1: "+t+"\n","Canvas2: "+s+"\n","Image2: "+n+"\n","Canvas2: "+i+"\n","Ratio: "+_+"\n","\nTherefore ... isDrawImageUsingCanvas = "+(null==o?"null":""+o),"\n\nWith a benchmark of "+h}this._kernel.scenes.next()},_stressTest:function(e){var t=0,s=Math.round(_.now()/1e3*1e3);this._destinationContext2d.restore(),this._destinationContext2d.clearRect(0,0,this._factory.width,this._factory.height);for(var i=s;i<s+100;)i=Math.round(_.now()/1e3*1e3),this._destinationContext2d.rotate(Math.random()-.5),this._destinationContext2d.drawImage(e,0,0,512,4,0,l.random(256),2048,16),this._destinationContext2d.drawImage(e,0,0,512,4,0,l.random(256),828.416,6.472),this._destinationContext2d.drawImage(e,0,0,512,64,0,l.random(256),128,16),this._destinationContext2d.drawImage(e,0,0,512,64,0,l.random(256),316.4400494437577,39.55500618046971),++t;return t},__class__:ls});var cs=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Menu"]=cs,cs.__name__="b10gph.scenes.Menu",cs.__super__=as,cs.prototype=r(as.prototype,{_init:function(){var e=this;as.prototype._init.call(this),this._kernel.audio.start("Engines",Je.EFFECTS,0,0,.5),this._addBg(null,!0),this._addFg(null,!1),this._logo=new Zt(this._kernel),this._logo.setPosition(270,220),this.addEntity(this._logo,null,!0,100),this.addEntity(new Qs(this._kernel,function(t){e._logo.set_x(t)},-this._factory.width,this._logo.x,2500,2e3,null,Ks.EASE_OUT,Ws.ELASTIC())),this.addEntity(new We(this._kernel,function(){e._kernel.audio.start("Driveby2",Je.EFFECTS,0,0,1)},2500));var t=new zt(this._kernel,this._kernel.getConfig("gui.buttons.play"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue)),s=new zt(this._kernel,this._kernel.getConfig("gui.buttons.instructions"),0,0,null,oi(this,this._pressInstructions));this._addButtons(null,t,s),this._easyTweez()},_outro:function(e){var t=this;this._defaultOutro(e),this._kernel.audio.start("Driveby1",Je.INTERFACE,0,0,.5,0,!0),this.addEntity(new Qs(this._kernel,function(e){t._logo.set_x(e)},this._logo.x,this._factory.width,0,1e3,null,Ks.EASE_IN,Ws.BACK()))},__class__:cs});var us=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Results"]=us,us.__name__="b10gph.scenes.Results",us.__super__=as,us.prototype=r(as.prototype,{_init:function(){as.prototype._init.call(this),this._isFinished=4==this._session.level,this._addBg(null,!1),this._addFg();var e=new is(this._kernel,u.replace(l.string(this._kernel.getConfig("gui.scenes.results.title")),"__X__",l.string(this._session.level)));this.addEntity(e,null,!0,19);var t=new Kt(this._kernel);t.setPosition(585,53),this.addEntity(t,null,!0,30);var s=new zt(this._kernel,this._kernel.getConfig(this._isFinished?"gui.buttons.finished":"gui.buttons.continue"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue));this._addButtons(null,s);var i=new ts(this._kernel,1,this._kernel.getConfig("gui.scenes.results.table.location"),this._kernel.getConfig("gui.scenes.results.table.position"),this._kernel.getConfig("gui.scenes.results.table.points"));i.setPosition(260,110),this.addEntity(i,null,!0,20);var n=this._createTableScoreRow(0,260,135);this.addEntity(n,null,!0,20);var r=this._createTableScoreRow(1,260,160);this.addEntity(r,null,!0,20);var a=this._createTableScoreRow(2,260,185);this.addEntity(a,null,!0,20);var _=this._createTableScoreRow(3,260,210);this.addEntity(_,null,!0,20);var o=this._getPoints(this._session.scoreLevel0)+this._getPoints(this._session.scoreLevel1)+this._getPoints(this._session.scoreLevel2)+this._getPoints(this._session.scoreLevel3),h=new ts(this._kernel,1,this._kernel.getConfig("gui.scenes.results.table.total"),"",null==o?"null":""+o);h.setPosition(260,235),this.addEntity(h,null,!0,20),this._session.level>=4&&this._session.highScore<o&&(this._session.highScore=o),this._session.coins+=10*this._getPoints(this._session.getScore(this._session.level-1));var c=new ts(this._kernel,3,this._kernel.getConfig("gui.scenes.results.table.personalBest"),"",l.string(this._session.highScore));c.setPosition(260,260),this.addEntity(c,null,!0,20);var d=this._session.getScore(this._session.level-1),p=this._getRank(d),g=this._getPoints(d),f=p.message+"<br/><br/>"+u.replace(u.replace(this._kernel.getConfig("gui.scenes.results.message"),"__SCORE__",d+p.ending),"__POINTS__",null==g?"null":""+g),y=new ss(this._kernel,180,300,f,this._factory.createTextStyle(_t.BODY),!0,!1,.5);y.setPosition(this._kernel.factory.width-y.width-20,140),this.addEntity(y,null,!0,21),this._addEasyTweez(e,0),this._addEasyTweez(t,0),this._addEasyTweez(i,1,!1),this._addEasyTweez(n,2,!1),this._addEasyTweez(r,3,!1),this._addEasyTweez(a,4,!1),this._addEasyTweez(_,5,!1),this._addEasyTweez(h,6,!1),this._addEasyTweez(c,7,!1),this._addEasyTweez(y,8,!1),this._easyTweez(!0)},_outro:function(e){this._defaultOutro(e),this._isFinished&&(this._kernel.audio.stop(null,Je.MUSIC),this._kernel.audio.start("MusicWin",Je.MUSIC,1,0,.5))},_createTableScoreRow:function(e,t,s){var i;switch(e){case 0:i="gui.locations.a";break;case 1:i="gui.locations.b";break;case 2:i="gui.locations.c";break;default:i="gui.locations.d"}var n=this._kernel.getConfig(i),r=this._session.getScore(e),a=r+this._getRank(r).ending,_=l.string(this._getPoints(r));0==r&&(a="-",_="-");var o=new ts(this._kernel,2,e+1+". "+n,a,_);return o.setPosition(t,s),o},__class__:us});var ds=function(e){Ye.call(this,e,500)};s["b10gph.scenes.SceneTransition"]=ds,ds.__name__="b10gph.scenes.SceneTransition",ds.__super__=Ye,ds.prototype=r(Ye.prototype,{_init:function(){Ye.prototype._init.call(this)},__class__:ds});var ps=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.SelectLevel"]=ps,ps.__name__="b10gph.scenes.SelectLevel",ps.__super__=as,ps.prototype=r(as.prototype,{_init:function(){as.prototype._init.call(this),this._addBg(null,!1),this._addFg(),this._session.level>3&&(this._session.level=0),0==this._session.level&&this._session.resetGame(),this._title=new is(this._kernel,""),this.addEntity(this._title,null,!0,19);var e=190;this.addEntity(this._locationA=new Jt(this._kernel,St.LOCATION_A,e),null,!0,25),this.addEntity(this._locationB=new Jt(this._kernel,St.LOCATION_B,e+=110),null,!0,25),this.addEntity(this._locationC=new Jt(this._kernel,St.LOCATION_C,e+=110),null,!0,25),this.addEntity(this._locationD=new Jt(this._kernel,St.LOCATION_D,e+=110),null,!0,25),this._configureLevel(this._session.level);var t=new zt(this._kernel,this._kernel.getConfig("gui.buttons.selectLevel"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue));this._addButtons(null,t),this._addEasyTweez(this._title,0),this._addEasyTweez(this._locationA,1,!1),this._addEasyTweez(this._locationB,2,!1),this._addEasyTweez(this._locationC,3,!1),this._addEasyTweez(this._locationD,4,!1),this._easyTweez()},_updater:function(e){null==e&&(e=0),as.prototype._updater.call(this,e),this._session.get_isTester()&&(this._kernel.inputs.joypad.getIsButtonPress(qe.RIGHT)&&this._configureLevel(this._session.level+1),this._kernel.inputs.joypad.getIsButtonPress(qe.LEFT)&&this._configureLevel(this._session.level-1))},_outro:function(e){var t=this;this._kernel.audio.stop(null,Je.MUSIC),this._kernel.audio.start("Engines",Je.EFFECTS,0,0,1);this._defaultOutro(function(){t._session.get_poki().commercialBreak(e)})},_configureLevel:function(e){if(!this._isOutroCalled){this._tools;var t,s=e;t=s-4*Math.floor(s/4),this._session.level=0|t;var i=this._getLocationType(this._session.level),n=u.replace(l.string(this._kernel.getConfig("gui.scenes.selectLevel.title")),"__X__",l.string(this._session.level+1));switch(this._title.configure(n),this._locationA.configure(!1),this._locationB.configure(!1),this._locationC.configure(!1),this._locationD.configure(!1),i._hx_index){case 0:this._locationA.configure(!0);break;case 1:this._locationB.configure(!0);break;case 2:this._locationC.configure(!0);break;case 3:this._locationD.configure(!0)}}},_pressLevelPreview:function(e){this._configureLevel(e),this._pressContinue()},__class__:ps});var gs=function(e,t,s,i,n){null==n&&(n=!1),null==i&&(i=!0),null==s&&(s=!1),as.call(this,e,t,s,i,n)};s["b10gph.scenes.Shop"]=gs,gs.__name__="b10gph.scenes.Shop",gs.__super__=as,gs.prototype=r(as.prototype,{_init:function(){as.prototype._init.call(this),this._addBg(null,!1),this._addFg();var e=new is(this._kernel,this._kernel.getConfig("gui.scenes.shop.title"));this.addEntity(e,null,!0,19);var t=new Kt(this._kernel);t.setPosition(585,53),this.addEntity(t,null,!0,30);var s=new zt(this._kernel,this._kernel.getConfig("gui.buttons.continue"),0,0,this._kernel.factory.keyNext,oi(this,this._pressContinue)),i=new zt(this._kernel,this._kernel.getConfig("gui.buttons.reset"),0,0,null,oi(this,this._pressReset));this._addButtons(null,s,1==this._session.getPercentageComplete()?i:null);var n=130,r=this._createUpgrade(Tt.UPGRADE_SPEED,250,n);this.addEntity(r,null,!0,22);var a=this._createUpgrade(Tt.UPGRADE_STEERING,250,n+=40);this.addEntity(a,null,!0,22);var _=this._createUpgrade(Tt.UPGRADE_ACCELERATION,250,n+=40);this.addEntity(_,null,!0,22);var o=this._createUpgrade(Tt.UPGRADE_BOOST,250,n+=40);this.addEntity(o,null,!0,22),this._addEasyTweez(e,0),this._addEasyTweez(t,0),this._addEasyTweez(r,1,!1),this._addEasyTweez(a,2,!1),this._addEasyTweez(_,3,!1),this._addEasyTweez(o,4,!1),this._easyTweez(!0)},_outro:function(e){this._defaultOutro(e)},_createUpgrade:function(e,t,s){var i=new ns(this._kernel,e);return i.setPosition(t,s),i},__class__:gs});var fs=function(){};s["haxe.IMap"]=fs,fs.__name__="haxe.IMap",fs.__isInterface__=!0;var ys=function(e,t,s){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=s?s:this};s["haxe.Exception"]=ys,ys.__name__="haxe.Exception",ys.caught=function(e){return e instanceof ys?e:e instanceof Error?new ys(e.message,null,e):new Ss(e,null,e)},ys.thrown=function(e){return e instanceof ys?e.get_native():e instanceof Error?e:new Ss(e)},ys.__super__=Error,ys.prototype=r(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException},__class__:ys,__properties__:{get_native:"get_native"}});var ms=function(){};s["haxe.Log"]=ms,ms.__name__="haxe.Log",ms.formatOutput=function(e,t){var s=l.string(e);if(null==t)return s;var i=t.fileName+":"+t.lineNumber;if(null!=t.customParams)for(var n=0,r=t.customParams;n<r.length;){e=r[n];++n,s+=", "+l.string(e)}return i+": "+s},ms.trace=function(e,t){var s=ms.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(s)};var ws=function(){};s["haxe.Resource"]=ws,ws.__name__="haxe.Resource",ws.getString=function(e){for(var t=0,s=ws.content;t<s.length;){var i=s[t];if(++t,i.name==e)return null!=i.str?i.str:Ts.decode(i.data).toString()}return null};var vs=function(){this.buf=new c,this.cache=[],this.useCache=vs.USE_CACHE,this.useEnumIndex=vs.USE_ENUM_INDEX,this.shash=new Bs,this.scount=0};s["haxe.Serializer"]=vs,vs.__name__="haxe.Serializer",vs.run=function(e){var t=new vs;return t.serialize(e),t.toString()},vs.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash.h[e];if(null!=t)return this.buf.b+="R",void(this.buf.b+=null==t?"null":""+t);this.shash.h[e]=this.scount++,this.buf.b+="y",e=encodeURIComponent(e),this.buf.b+=l.string(e.length),this.buf.b+=":",this.buf.b+=null==e?"null":""+e},serializeRef:function(e){for(var t=typeof e,s=0,i=this.cache.length;s<i;){var n=s++,r=this.cache[n];if(typeof r==t&&r==e)return this.buf.b+="r",this.buf.b+=null==n?"null":""+n,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var t=0,s=h.fields(e);t<s.length;){var i=s[t];++t,this.serializeString(i),this.serialize(h.field(e,i))}this.buf.b+="g"},serialize:function(e){switch((T=p.typeof(e))._hx_index){case 0:this.buf.b+="n";break;case 1:if(0==(t=e))return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==t?"null":""+t;break;case 2:var t=e;isNaN(t)?this.buf.b+="k":isFinite(t)?(this.buf.b+="d",this.buf.b+=null==t?"null":""+t):this.buf.b+=t<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 4:if(zs.__instanceof(e,pi)){var s=e.__name__;this.buf.b+="A",this.serializeString(s)}else if(zs.__instanceof(e,gi))this.buf.b+="B",this.serializeString(e.__ename__);else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 5:throw ys.thrown("Cannot serialize function");case 6:var i=T.c;if(i==String)return void this.serializeString(e);if(this.useCache&&this.serializeRef(e))return;switch(i){case Array:var r=0;this.buf.b+="a";for(var a=0,o=e.length;a<o;){null==e[y=a++]?++r:(r>0&&(1==r?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==r?"null":""+r),r=0),this.serialize(e[y]))}r>0&&(1==r?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==r?"null":""+r)),this.buf.b+="h";break;case Date:var c=e;this.buf.b+="v",this.buf.b+=l.string(c.getTime());break;case Ds:this.buf.b+="q";for(var u=(t=e).keys();u.hasNext();){var d=u.next();this.buf.b+=":",this.buf.b+=null==d?"null":""+d,this.serialize(t.h[d])}this.buf.b+="h";break;case Ps:this.buf.b+="l";for(var g=(t=e).h;null!=g;){var f=g.item;g=g.next;var y=f;this.serialize(y)}this.buf.b+="h";break;case Os:this.buf.b+="M";for(u=(t=e).keys();u.hasNext();){d=u.next();var m=h.field(d,"__id__");h.deleteField(d,"__id__"),this.serialize(d),d.__id__=m,this.serialize(t.h[d.__id__])}this.buf.b+="h";break;case Bs:this.buf.b+="b";for(t=e,u=Bs.keysIterator(t.h);u.hasNext();){d=u.next();this.serializeString(d),this.serialize(t.h[d])}this.buf.b+="h";break;case Cs:t=e;this.buf.b+="s",this.buf.b+=l.string(Math.ceil(8*t.length/6)),this.buf.b+=":";y=0;var w=t.length-2,v=vs.BASE64_CODES;if(null==v){v=new Array(vs.BASE64.length);for(a=0,o=vs.BASE64.length;a<o;){var E=a++;v[E]=_.cca(vs.BASE64,E)}vs.BASE64_CODES=v}for(;y<w;){var x=t.b[y++],b=t.b[y++],S=t.b[y++];this.buf.b+=String.fromCodePoint(v[x>>2]),this.buf.b+=String.fromCodePoint(v[63&(x<<4|b>>4)]),this.buf.b+=String.fromCodePoint(v[63&(b<<2|S>>6)]),this.buf.b+=String.fromCodePoint(v[63&S])}if(y==w){x=t.b[y++],b=t.b[y++];this.buf.b+=String.fromCodePoint(v[x>>2]),this.buf.b+=String.fromCodePoint(v[63&(x<<4|b>>4)]),this.buf.b+=String.fromCodePoint(v[b<<2&63])}else if(y==w+1){x=t.b[y++];this.buf.b+=String.fromCodePoint(v[x>>2]),this.buf.b+=String.fromCodePoint(v[x<<4&63])}break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(i.__name__),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 7:var C=T.e;if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}if(this.buf.b+=l.string(this.useEnumIndex?"j":"w"),this.serializeString(C.__ename__),this.useEnumIndex)this.buf.b+=":",this.buf.b+=l.string(e._hx_index);else{C=e;this.serializeString(n[C.__enum__].__constructs__[C._hx_index])}this.buf.b+=":";var k=p.enumParameters(e);this.buf.b+=l.string(k.length);for(var T=0;T<k.length;){var A=k[T];++T,this.serialize(A)}this.useCache&&this.cache.push(e);break;default:throw ys.thrown("Cannot serialize "+l.string(e))}},__class__:vs};var Es=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};s["haxe.Timer"]=Es,Es.__name__="haxe.Timer",Es.delay=function(e,t){var s=new Es(t);return s.run=function(){s.stop(),e()},s},Es.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Es};var xs=function(){};s["haxe._Unserializer.DefaultResolver"]=xs,xs.__name__="haxe._Unserializer.DefaultResolver",xs.prototype={resolveClass:function(e){return s[e]},resolveEnum:function(e){return n[e]},__class__:xs};var bs=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=bs.DEFAULT_RESOLVER;null==t&&(t=new xs,bs.DEFAULT_RESOLVER=t),this.resolver=t};s["haxe.Unserializer"]=bs,bs.__name__="haxe.Unserializer",bs.initCodes=function(){for(var e=[],t=0,s=bs.BASE64.length;t<s;){var i=t++;e[bs.BASE64.charCodeAt(i)]=i}return e},bs.run=function(e){return new bs(e).unserialize()},bs.prototype={readDigits:function(){for(var e=0,t=!1,s=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||i>57)break;e=10*e+(i-48),this.pos++}else{if(this.pos!=s)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(t>=43&&t<58||101==t||69==t))break;this.pos++}return parseFloat(_.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw ys.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw ys.thrown("Invalid object key");var s=this.unserialize();e[t]=s}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw ys.thrown("Invalid enum format");var s=this.readDigits();if(0==s)return p.createEnum(e,t);for(var i=[];s-- >0;)i.push(this.unserialize());return p.createEnum(e,t,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();if(null==(h=this.resolver.resolveClass(e)))throw ys.thrown("Class not found "+e);return h;case 66:e=this.unserialize();if(null==(u=this.resolver.resolveEnum(e)))throw ys.thrown("Enum not found "+e);return u;case 67:e=this.unserialize();if(null==(h=this.resolver.resolveClass(e)))throw ys.thrown("Class not found "+e);var t=Object.create(h.prototype);if(this.cache.push(t),t.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw ys.thrown("Invalid custom data");return t;case 77:var s=new Os;this.cache.push(s);for(var i=this.buf;104!=this.buf.charCodeAt(this.pos);){var n=this.unserialize();s.set(n,this.unserialize())}return this.pos++,s;case 82:if((a=this.readDigits())<0||a>=this.scache.length)throw ys.thrown("Invalid string reference");return this.scache[a];case 97:i=this.buf;var r=[];for(this.cache.push(r);;){if(104==(p=this.buf.charCodeAt(this.pos))){this.pos++;break}if(117==p){this.pos++;var a=this.readDigits();r[r.length+a-1]=null}else r.push(this.unserialize())}return r;case 98:s=new Bs;this.cache.push(s);for(i=this.buf;104!=this.buf.charCodeAt(this.pos);){n=this.unserialize();var o=this.unserialize();s.h[n]=o}return this.pos++,s;case 99:var h;e=this.unserialize();if(null==(h=this.resolver.resolveClass(e)))throw ys.thrown("Class not found "+e);t=Object.create(h.prototype);return this.cache.push(t),this.unserializeObject(t),t;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:e=this.unserialize();if(null==(T=this.resolver.resolveEnum(e)))throw ys.thrown("Enum not found "+e);this.pos++;var l=this.readDigits(),c=T.__constructs__.slice()[l];if(null==c)throw ys.thrown("Unknown enum index "+e+"@"+l);var u=this.unserializeEnum(T,c);return this.cache.push(u),u;case 107:return NaN;case 108:var d=new Ps;this.cache.push(d);for(i=this.buf;104!=this.buf.charCodeAt(this.pos);)d.add(this.unserialize());return this.pos++,d;case 109:return-1/0;case 110:return null;case 111:t={};return this.cache.push(t),this.unserializeObject(t),t;case 112:return 1/0;case 113:s=new Ds;this.cache.push(s);i=this.buf;for(var p=this.buf.charCodeAt(this.pos++);58==p;){var g=this.readDigits();o=this.unserialize();s.h[g]=o,p=this.buf.charCodeAt(this.pos++)}if(104!=p)throw ys.thrown("Invalid IntMap format");return s;case 114:if((a=this.readDigits())<0||a>=this.cache.length)throw ys.thrown("Invalid reference");return this.cache[a];case 115:var f=this.readDigits();i=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<f)throw ys.thrown("Invalid bytes length");var y=bs.CODES;null==y&&(y=bs.initCodes(),bs.CODES=y);for(var m=3&f,w=(g=this.pos)+(f-m),v=new Cs(new ArrayBuffer(3*(f>>2)+(m>=2?m-1:0))),E=0;g<w;){var x=y[i.charCodeAt(g++)],b=y[i.charCodeAt(g++)];v.b[E++]=x<<2|b>>4;var S=y[i.charCodeAt(g++)];v.b[E++]=b<<4|S>>2;var C=y[i.charCodeAt(g++)];v.b[E++]=S<<6|C}if(m>=2){x=y[i.charCodeAt(g++)],b=y[i.charCodeAt(g++)];if(v.b[E++]=x<<2|b>>4,3==m){S=y[i.charCodeAt(g++)];v.b[E++]=b<<4|S>>2}}return this.pos+=f,this.cache.push(v),v;case 116:return!0;case 118:var k;return this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(k=_.strDate(_.substr(this.buf,this.pos,19)),this.pos+=19):k=new Date(this.readFloat()),this.cache.push(k),k;case 119:var T;e=this.unserialize();if(null==(T=this.resolver.resolveEnum(e)))throw ys.thrown("Enum not found "+e);u=this.unserializeEnum(T,this.unserialize());return this.cache.push(u),u;case 120:throw ys.thrown(this.unserialize());case 121:f=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<f)throw ys.thrown("Invalid string length");n=_.substr(this.buf,this.pos,f);return this.pos+=f,n=decodeURIComponent(n.split("+").join(" ")),this.scache.push(n),n;case 122:return 0}throw this.pos--,ys.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:bs};var Ss=function(e,t,s){ys.call(this,String(e),t,s),this.value=e};s["haxe.ValueException"]=Ss,Ss.__name__="haxe.ValueException",Ss.__super__=ys,Ss.prototype=r(ys.prototype,{unwrap:function(){return this.value},__class__:Ss});var Cs=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};s["haxe.io.Bytes"]=Cs,Cs.__name__="haxe.io.Bytes",Cs.ofString=function(e,t){if(t==ks.RawNative){for(var s=new Uint8Array(e.length<<1),i=0,n=e.length;i<n;){var r=i++,a=e.charCodeAt(r);s[r<<1]=255&a,s[r<<1|1]=a>>8}return new Cs(s.buffer)}var _=[];for(r=0;r<e.length;){55296<=(a=e.charCodeAt(r++))&&a<=56319&&(a=a-55232<<10|1023&e.charCodeAt(r++)),a<=127?_.push(a):a<=2047?(_.push(192|a>>6),_.push(128|63&a)):a<=65535?(_.push(224|a>>12),_.push(128|a>>6&63),_.push(128|63&a)):(_.push(240|a>>18),_.push(128|a>>12&63),_.push(128|a>>6&63),_.push(128|63&a))}return new Cs(new Uint8Array(_).buffer)},Cs.ofData=function(e){var t=e.hxBytes;return null!=t?t:new Cs(e)},Cs.prototype={getString:function(e,t,s){if(e<0||t<0||e+t>this.length)throw ys.thrown(Ls.OutsideBounds);null==s&&(s=ks.UTF8);var i="",n=this.b,r=e,a=e+t;switch(s._hx_index){case 0:for(;r<a;){if((l=n[r++])<128){if(0==l)break;i+=String.fromCodePoint(l)}else if(l<224){var _=(63&l)<<6|127&n[r++];i+=String.fromCodePoint(_)}else if(l<240){var o=(31&l)<<12|(127&n[r++])<<6|127&n[r++];i+=String.fromCodePoint(o)}else{var h=(15&l)<<18|(127&n[r++])<<12|(127&n[r++])<<6|127&n[r++];i+=String.fromCodePoint(h)}}break;case 1:for(;r<a;){var l=n[r++]|n[r++]<<8;i+=String.fromCodePoint(l)}}return i},toString:function(){return this.getString(0,this.length)},__class__:Cs};var ks=n["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}},Ts=function(){};s["haxe.crypto.Base64"]=Ts,Ts.__name__="haxe.crypto.Base64",Ts.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==_.cca(e,e.length-1);)e=_.substr(e,0,-1);return new As(Ts.BYTES).decodeBytes(Cs.ofString(e))};var As=function(e){for(var t=e.length,s=1;t>1<<s;)++s;if(s>8||t!=1<<s)throw ys.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=s};s["haxe.crypto.BaseCode"]=As,As.__name__="haxe.crypto.BaseCode",As.prototype={initTable:function(){for(var e=[],t=0;t<256;){e[i=t++]=-1}t=0;for(var s=this.base.length;t<s;){var i=t++;e[this.base.b[i]]=i}this.tbl=e},decodeBytes:function(e){var t=this.nbits;this.base;null==this.tbl&&this.initTable();for(var s=this.tbl,i=e.length*t>>3,n=new Cs(new ArrayBuffer(i)),r=0,a=0,_=0,o=0;o<i;){for(;a<8;){a+=t,r<<=t;var h=s[e.b[_++]];if(-1==h)throw ys.thrown("BaseCode : invalid encoded char");r|=h}a-=8,n.b[o++]=r>>a&255}return n},__class__:As};var Is=function(e,t){this.elt=e,this.next=t};s["haxe.ds.GenericCell"]=Is,Is.__name__="haxe.ds.GenericCell",Is.prototype={__class__:Is};var Rs=function(){};s["haxe.ds.GenericStack"]=Rs,Rs.__name__="haxe.ds.GenericStack",Rs.prototype={remove:function(e){for(var t=null,s=this.head;null!=s;){if(s.elt==e){null==t?this.head=s.next:t.next=s.next;break}t=s,s=s.next}return null!=s},iterator:function(){var e=this.head;return{hasNext:function(){return null!=e},next:function(){var t=e;return e=t.next,t.elt}}},__class__:Rs};var Ds=function(){this.h={}};s["haxe.ds.IntMap"]=Ds,Ds.__name__="haxe.ds.IntMap",Ds.__interfaces__=[fs],Ds.prototype={keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return new Fs(e)},__class__:Ds};var Ps=function(){this.length=0};s["haxe.ds.List"]=Ps,Ps.__name__="haxe.ds.List",Ps.prototype={add:function(e){var t=new Ns(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},push:function(e){var t=new Ns(e,this.h);this.h=t,null==this.q&&(this.q=t),this.length++},remove:function(e){for(var t=null,s=this.h;null!=s;){if(s.item==e)return null==t?this.h=s.next:t.next=s.next,this.q==s&&(this.q=t),this.length--,!0;t=s,s=s.next}return!1},__class__:Ps};var Ns=function(e,t){this.item=e,this.next=t};s["haxe.ds._List.ListNode"]=Ns,Ns.__name__="haxe.ds._List.ListNode",Ns.prototype={__class__:Ns};var Os=function(){this.h={__keys__:{}}};s["haxe.ds.ObjectMap"]=Os,Os.__name__="haxe.ds.ObjectMap",Os.__interfaces__=[fs],Os.prototype={set:function(t,s){var i=t.__id__;null==i&&(i=t.__id__=e.$haxeUID++),this.h[i]=s,this.h.__keys__[i]=t},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return new Fs(e)},__class__:Os};var Bs=function(){this.h=Object.create(null)};s["haxe.ds.StringMap"]=Bs,Bs.__name__="haxe.ds.StringMap",Bs.__interfaces__=[fs],Bs.keysIterator=function(e){var t=Object.keys(e),s=t.length,i=0;return{hasNext:function(){return i<s},next:function(){return t[(i+=1)-1]}}},Bs.prototype={__class__:Bs};var Ms=function(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=oi(this,this.onData)};s["haxe.http.HttpBase"]=Ms,Ms.__name__="haxe.http.HttpBase",Ms.prototype={onData:function(e){},onBytes:function(e){},onError:function(e){},onStatus:function(e){},hasOnData:function(){return!h.compareMethods(oi(this,this.onData),this.emptyOnData)},success:function(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,ks.UTF8)),this.responseAsString},__class__:Ms,__properties__:{get_responseData:"get_responseData"}};var Us=function(e){this.async=!0,this.withCredentials=!1,Ms.call(this,e)};s["haxe.http.HttpJs"]=Us,Us.__name__="haxe.http.HttpJs",Us.__super__=Ms,Us.prototype=r(Ms.prototype,{request:function(t){var s=this;this.responseAsString=null,this.responseBytes=null;var i,n=this.req=js.createXMLHttpRequest(),r=function(t){if(4==n.readyState){var i;try{i=n.status}catch(e){i=null}if(0==i&&"undefined"!=typeof window&&null!=e.location){var r=e.location.protocol.toLowerCase();new a("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(r)&&(i=null!=n.response?200:404)}if(null==i&&(i=null),null!=i&&s.onStatus(i),null!=i&&i>=200&&i<400)s.req=null,s.success(Cs.ofData(n.response));else if(null==i||0==i&&null==n.response)s.req=null,s.onError("Failed to connect or resolve host");else if(null==i){s.req=null;var _=null!=n.response?Cs.ofData(n.response):null;s.responseBytes=_,s.onError("Http Error #"+n.status)}else switch(i){case 12007:s.req=null,s.onError("Unknown host");break;case 12029:s.req=null,s.onError("Failed to connect to host");break;default:s.req=null;_=null!=n.response?Cs.ofData(n.response):null;s.responseBytes=_,s.onError("Http Error #"+n.status)}}};this.async&&(n.onreadystatechange=r);var _=this.postBytes;if(null==(h=this.postData))i=null==_?null:new Blob([_.b.bufferValue]);else if(null==_){i=h}else i=null;if(null!=i)t=!0;else{_=0;for(var h=this.params;_<h.length;){var c=h[_];++_,i=null==i?"":(null==i?"null":l.string(i))+"&";var u=c.name,d=(null==i?"null":l.string(i))+encodeURIComponent(u)+"=",p=c.value;i=d+encodeURIComponent(p)}}try{if(t)n.open("POST",this.url,this.async);else if(null!=i){var g=this.url.split("?").length<=1;n.open("GET",this.url+(g?"?":"&")+(null==i?"null":l.string(i)),this.async),i=null}else n.open("GET",this.url,this.async);n.responseType="arraybuffer"}catch(_){var f=ys.caught(_).unwrap();return this.req=null,void this.onError(f.toString())}n.withCredentials=this.withCredentials,!o.exists(this.headers,function(e){return"Content-Type"==e.name})&&t&&null==this.postData&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(_=0,h=this.headers;_<h.length;){var y=h[_];++_,n.setRequestHeader(y.name,y.value)}n.send(i),this.async||r()},__class__:Us});var Ls=n["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:i},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:i},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:i},Custom:(t=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:i}},t.__params__=["e"],t)},Fs=function(e){this.current=0,this.array=e};s["haxe.iterators.ArrayIterator"]=Fs,Fs.__name__="haxe.iterators.ArrayIterator",Fs.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Fs};var Ys=function(e,t,s){this.xml=t,this.message=e,this.position=s,this.lineNumber=1,this.positionAtLine=0;for(var i=0,n=s;i<n;){var r=i++,a=t.charCodeAt(r);10==a?(this.lineNumber++,this.positionAtLine=0):13!=a&&this.positionAtLine++}};s["haxe.xml.XmlParserException"]=Ys,Ys.__name__="haxe.xml.XmlParserException",Ys.prototype={toString:function(){return zs.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Ys};var Hs=function(){};s["haxe.xml.Parser"]=Hs,Hs.__name__="haxe.xml.Parser",Hs.parse=function(e,t){null==t&&(t=!1);var s=f.createDocument();return Hs.doParse(e,t,0,s),s},Hs.doParse=function(e,t,s,i){null==s&&(s=0);for(var n=null,r=1,a=1,o=null,h=0,u=0,d=0,p=e.charCodeAt(s),y=new c,m=1,w=-1;p==p;){switch(r){case 0:switch(p){case 9:case 10:case 13:case 32:break;default:r=a;continue}break;case 1:if(60!=p){h=s,r=13;continue}r=0,a=2;break;case 2:switch(p){case 33:if(91==e.charCodeAt(s+1)){if("CDATA["!=_.substr(e,s+=2,6).toUpperCase())throw ys.thrown(new Ys("Expected <![CDATA[",e,s));r=17,h=(s+=5)+1}else if(68==e.charCodeAt(s+1)||100==e.charCodeAt(s+1)){if("OCTYPE"!=_.substr(e,s+2,6).toUpperCase())throw ys.thrown(new Ys("Expected <!DOCTYPE",e,s));r=16,h=(s+=8)+1}else{if(45!=e.charCodeAt(s+1)||45!=e.charCodeAt(s+2))throw ys.thrown(new Ys("Expected \x3c!--",e,s));r=15,h=(s+=2)+1}break;case 47:if(null==i)throw ys.thrown(new Ys("Expected node name",e,s));h=s+1,r=0,a=10;break;case 63:r=14,h=s;break;default:r=3,h=s;continue}break;case 3:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){if(s==h)throw ys.thrown(new Ys("Expected node name",e,s));n=f.createElement(_.substr(e,h,s-h)),i.addChild(n),++u,r=0,a=4;continue}break;case 4:switch(p){case 47:r=11;break;case 62:r=9;break;default:r=5,h=s;continue}break;case 5:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){if(h==s)throw ys.thrown(new Ys("Expected attribute name",e,s));if(o=_.substr(e,h,s-h),n.exists(o))throw ys.thrown(new Ys("Duplicate attribute ["+o+"]",e,s));r=0,a=6;continue}break;case 6:if(61!=p)throw ys.thrown(new Ys("Expected =",e,s));r=0,a=7;break;case 7:switch(p){case 34:case 39:y=new c,r=8,h=s+1,w=p;break;default:throw ys.thrown(new Ys('Expected "',e,s))}break;case 8:switch(p){case 38:var v=s-h;y.b+=_.substr(e,h,null==v?null:v),r=18,m=8,h=s+1;break;case 60:case 62:if(t)throw ys.thrown(new Ys("Invalid unescaped "+String.fromCodePoint(p)+" in attribute value",e,s));if(p==w){var E=s-h;y.b+=_.substr(e,h,null==E?null:E);var x=y.b;y=new c,n.set(o,x),r=0,a=4}break;default:if(p==w){var b=s-h;y.b+=_.substr(e,h,null==b?null:b);var S=y.b;y=new c,n.set(o,S),r=0,a=4}}break;case 9:h=s=Hs.doParse(e,t,s,n),r=1;break;case 10:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){if(h==s)throw ys.thrown(new Ys("Expected node name",e,s));var C=_.substr(e,h,s-h);if(null==i||0!=i.nodeType)throw ys.thrown(new Ys("Unexpected </"+C+">, tag is not open",e,s));if(i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));if(C!=i.nodeName){if(i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));throw ys.thrown(new Ys("Expected </"+i.nodeName+">",e,s))}r=0,a=12;continue}break;case 11:if(62!=p)throw ys.thrown(new Ys("Expected >",e,s));r=1;break;case 12:if(62==p)return 0==u&&i.addChild(f.createPCData("")),s;throw ys.thrown(new Ys("Expected >",e,s));case 13:if(60==p){var k=s-h;y.b+=_.substr(e,h,null==k?null:k);var T=f.createPCData(y.b);y=new c,i.addChild(T),++u,r=0,a=2}else if(38==p){var A=s-h;y.b+=_.substr(e,h,null==A?null:A),r=18,m=13,h=s+1}break;case 14:if(63==p&&62==e.charCodeAt(s+1)){var I=_.substr(e,h+1,++s-h-2);i.addChild(f.createProcessingInstruction(I)),++u,r=1}break;case 15:45==p&&45==e.charCodeAt(s+1)&&62==e.charCodeAt(s+2)&&(i.addChild(f.createComment(_.substr(e,h,s-h))),++u,s+=2,r=1);break;case 16:91==p?++d:93==p?--d:62==p&&0==d&&(i.addChild(f.createDocType(_.substr(e,h,s-h))),++u,r=1);break;case 17:if(93==p&&93==e.charCodeAt(s+1)&&62==e.charCodeAt(s+2)){var R=f.createCData(_.substr(e,h,s-h));i.addChild(R),++u,s+=2,r=1}break;case 18:if(59==p){var D=_.substr(e,h,s-h);if(35==D.charCodeAt(0)){var P=120==D.charCodeAt(1)?l.parseInt("0"+_.substr(D,1,D.length-1)):l.parseInt(_.substr(D,1,D.length-1));y.b+=String.fromCodePoint(P)}else if(Object.prototype.hasOwnProperty.call(Hs.escapes.h,D))y.b+=l.string(Hs.escapes.h[D]);else{if(t)throw ys.thrown(new Ys("Undefined entity: "+D,e,s));y.b+=l.string("&"+D+";")}h=s+1,r=m}else if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)&&35!=p){if(t)throw ys.thrown(new Ys("Invalid character in entity: "+String.fromCodePoint(p),e,s));y.b+=String.fromCodePoint(38);var N=s-h;y.b+=_.substr(e,h,null==N?null:N),h=--s+1,r=m}}p=e.charCodeAt(++s)}if(1==r&&(h=s,r=13),13==r){if(0==i.nodeType){if(i.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":g.toString(i.nodeType)));throw ys.thrown(new Ys("Unclosed node <"+i.nodeName+">",e,s))}if(s!=h||0==u){v=s-h;y.b+=_.substr(e,h,null==v?null:v),i.addChild(f.createPCData(y.b)),++u}return s}if(!t&&18==r&&13==m){y.b+=String.fromCodePoint(38);v=s-h;return y.b+=_.substr(e,h,null==v?null:v),i.addChild(f.createPCData(y.b)),++u,s}throw ys.thrown(new Ys("Unexpected end",e,s))};var Vs=function(e){this.output=new c,this.pretty=e};s["haxe.xml.Printer"]=Vs,Vs.__name__="haxe.xml.Printer",Vs.print=function(e,t){null==t&&(t=!1);var s=new Vs(t);return s.writeNode(e,""),s.output.b},Vs.prototype={writeNode:function(e,t){switch(e.nodeType){case 0:if(this.output.b+=l.string(t+"<"),e.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":g.toString(e.nodeType)));this.output.b+=l.string(e.nodeName);for(var s=e.attributes();s.hasNext();){var i=s.next();this.output.b+=l.string(" "+i+'="');var n=u.htmlEscape(e.get(i),!0);this.output.b+=l.string(n),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=f.Document&&e.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":g.toString(e.nodeType)));for(var r=0,a=e.children;r<a.length;){var _=a[r++];this.writeNode(_,this.pretty?t+"\t":t)}if(this.output.b+=l.string(t+"</"),e.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":g.toString(e.nodeType)));this.output.b+=l.string(e.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==f.Document||e.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":g.toString(e.nodeType)));var o=e.nodeValue;if(0!=o.length){n=t+u.htmlEscape(o);this.output.b+=l.string(n),this.pretty&&(this.output.b+="\n")}break;case 2:if(this.output.b+=l.string(t+"<![CDATA["),e.nodeType==f.Document||e.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":g.toString(e.nodeType)));this.output.b+=l.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==f.Document||e.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":g.toString(e.nodeType)));var h=e.nodeValue,c=new RegExp("[\n\r\t]+","g".split("u").join(""));h="\x3c!--"+(h=h.replace(c,""))+"--\x3e",this.output.b+=null==t?"null":""+t;n=u.trim(h);this.output.b+=l.string(n),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==f.Document||e.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":g.toString(e.nodeType)));this.output.b+=l.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==f.Document||e.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":g.toString(e.nodeType)));this.output.b+=l.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=f.Document&&e.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":g.toString(e.nodeType)));for(r=0,a=e.children;r<a.length;){_=a[r++];this.writeNode(_,t)}}},hasChildren:function(e){if(e.nodeType!=f.Document&&e.nodeType!=f.Element)throw ys.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":g.toString(e.nodeType)));for(var t=0,s=e.children;t<s.length;){var i=s[t++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==f.Document||i.nodeType==f.Element)throw ys.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":g.toString(i.nodeType)));if(0!=u.ltrim(i.nodeValue).length)return!0}}return!1},__class__:Vs};var zs=function(){};s["js.Boot"]=zs,zs.__name__="js.Boot",zs.getClass=function(e){if(null==e)return null;if(e instanceof Array)return Array;var t=e.__class__;if(null!=t)return t;var s=zs.__nativeClassName(e);return null!=s?zs.__resolveNativeClass(s):null},zs.__string_rec=function(e,t){if(null==e)return"null";if(t.length>=5)return"<...>";var s=typeof e;switch("function"==s&&(e.__name__||e.__ename__)&&(s="object"),s){case"function":return"<function>";case"object":if(e.__enum__){var i=n[e.__enum__],r=i.__constructs__[e._hx_index],a=i[r];return a.__params__?(t+="\t",r+"("+function(s){for(var i=[],n=0,r=a.__params__;n<r.length;){var _=r[n];n+=1,i.push(zs.__string_rec(e[_],t))}return i}().join(",")+")"):r}if(e instanceof Array){var _="[";t+="\t";for(var o=0,h=e.length;o<h;){var l=o++;_+=(l>0?",":"")+zs.__string_rec(e[l],t)}return _+="]"}var c;try{c=e.toString}catch(o){return"???"}if(null!=c&&c!=Object.toString&&"function"==typeof c){var u=e.toString();if("[object Object]"!=u)return u}_="{\n";t+="\t";var d=null!=e.hasOwnProperty,p=null;for(p in e)d&&!e.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=_.length&&(_+=", \n"),_+=t+p+" : "+zs.__string_rec(e[p],t));return _+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},zs.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var s=e.__interfaces__;if(null!=s)for(var i=0,n=s.length;i<n;){var r=s[i++];if(r==t||zs.__interfLoop(r,t))return!0}return zs.__interfLoop(e.__super__,t)},zs.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case di:return"boolean"==typeof e;case ci:return null!=e;case ui:return"number"==typeof e;case li:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(zs.__downcastCheck(e,t))return!0}else if("object"==typeof t&&zs.__isNativeObj(t)&&e instanceof t)return!0;return t==pi&&null!=e.__name__||(t==gi&&null!=e.__ename__||null!=e.__enum__&&n[e.__enum__]==t)}},zs.__downcastCheck=function(e,t){return e instanceof t||!!t.__isInterface__&&zs.__interfLoop(zs.getClass(e),t)},zs.__implements=function(e,t){return zs.__interfLoop(zs.getClass(e),t)},zs.__cast=function(e,t){if(null==e||zs.__instanceof(e,t))return e;throw ys.thrown("Cannot cast "+l.string(e)+" to "+l.string(t))},zs.__nativeClassName=function(e){var t=zs.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},zs.__isNativeObj=function(e){return null!=zs.__nativeClassName(e)},zs.__resolveNativeClass=function(t){return e[t]};var js=function(){};s["js.Browser"]=js,js.__name__="js.Browser",js.getLocalStorage=function(){try{var e=window.localStorage;if(e.getItem(""),0==e.length){var t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t)}return e}catch(e){return null}},js.getSessionStorage=function(){try{var e=window.sessionStorage;if(e.getItem(""),0==e.length){var t="_hx_"+Math.random();e.setItem(t,t),e.removeItem(t)}return e}catch(e){return null}},js.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw ys.thrown("Unable to create XMLHttpRequest object.")};var Gs=function(){};s["js.Cookie"]=Gs,Gs.__name__="js.Cookie",Gs.set=function(e,t,s,i,n){var r=e+"="+encodeURIComponent(t);null!=s&&(r+=";expires="+new Date((new Date).getTime()+1e3*s).toGMTString());null!=i&&(r+=";path="+i),null!=n&&(r+=";domain="+n),window.document.cookie=r},Gs.all=function(){for(var e=new Bs,t=window.document.cookie.split(";"),s=0;s<t.length;){var i=t[s];++s;var n=(i=u.ltrim(i)).split("=");if(!(n.length<2)){var r=decodeURIComponent(n[1].split("+").join(" "));e.h[n[0]]=r}}return e},Gs.get=function(e){return Gs.all().h[e]},Gs.exists=function(e){var t=Gs.all();return Object.prototype.hasOwnProperty.call(t.h,e)},Gs.remove=function(e,t,s){Gs.set(e,"",-10,t,s)};var Ks=n["tweezer.EEase"]={__ename__:"tweezer.EEase",__constructs__:["EASE_IN","EASE_IN_OUT","EASE_OUT","EASE_OUT_IN"],EASE_IN:{_hx_index:0,__enum__:"tweezer.EEase",toString:i},EASE_IN_OUT:{_hx_index:1,__enum__:"tweezer.EEase",toString:i},EASE_OUT:{_hx_index:2,__enum__:"tweezer.EEase",toString:i},EASE_OUT_IN:{_hx_index:3,__enum__:"tweezer.EEase",toString:i}},Ws=n["tweezer.ETween"]={__ename__:"tweezer.ETween",__constructs__:["BACK","BOUNCE","CIRCULAR","CUBIC","ELASTIC","EXPONENTIAL","LINEAR","QUADRATIC","QUARTIC","QUINTIC","SINE"],BACK:(t=function(e){return{_hx_index:0,p_overshoot:e,__enum__:"tweezer.ETween",toString:i}},t.__params__=["p_overshoot"],t),BOUNCE:{_hx_index:1,__enum__:"tweezer.ETween",toString:i},CIRCULAR:{_hx_index:2,__enum__:"tweezer.ETween",toString:i},CUBIC:{_hx_index:3,__enum__:"tweezer.ETween",toString:i},ELASTIC:(t=function(e,t){return{_hx_index:4,p_period:e,p_amplitude:t,__enum__:"tweezer.ETween",toString:i}},t.__params__=["p_period","p_amplitude"],t),EXPONENTIAL:{_hx_index:5,__enum__:"tweezer.ETween",toString:i},LINEAR:{_hx_index:6,__enum__:"tweezer.ETween",toString:i},QUADRATIC:{_hx_index:7,__enum__:"tweezer.ETween",toString:i},QUARTIC:{_hx_index:8,__enum__:"tweezer.ETween",toString:i},QUINTIC:{_hx_index:9,__enum__:"tweezer.ETween",toString:i},SINE:{_hx_index:10,__enum__:"tweezer.ETween",toString:i}},Xs=function(){};s["tweezer.TweenFactory"]=Xs,Xs.__name__="tweezer.TweenFactory",Xs.createTweenFunction=function(e,t,s,i,n){switch(null==i&&(i=Ks.EASE_IN),null==n&&(n=Ws.LINEAR),n._hx_index){case 0:var r=n.p_overshoot;switch(null==r&&(r=1.70158),i._hx_index){case 0:return function(i){return Js.easeIn(i,e,t,s,r)};case 1:return function(i){return Js.easeInOut(i,e,t,s,r)};case 2:return function(i){return Js.easeOut(i,e,t,s,r)};case 3:return function(i){return Js.easeOutIn(i,e,t,s,r)}}break;case 1:switch(i._hx_index){case 0:return function(i){return Zs.easeIn(i,e,t,s)};case 1:return function(i){return Zs.easeInOut(i,e,t,s)};case 2:return function(i){return Zs.easeOut(i,e,t,s)};case 3:return function(i){return Zs.easeOutIn(i,e,t,s)}}break;case 2:switch(i._hx_index){case 0:return function(i){return qs.easeIn(i,e,t,s)};case 1:return function(i){return qs.easeInOut(i,e,t,s)};case 2:return function(i){return qs.easeOut(i,e,t,s)};case 3:return function(i){return qs.easeOutIn(i,e,t,s)}}break;case 3:switch(i._hx_index){case 0:return function(i){return $s.easeIn(i,e,t,s)};case 1:return function(i){return $s.easeInOut(i,e,t,s)};case 2:return function(i){return $s.easeOut(i,e,t,s)};case 3:return function(i){return $s.easeOutIn(i,e,t,s)}}break;case 4:var a=n.p_amplitude,_=n.p_period;switch(null==_&&(_=.3*s*(i==Ks.EASE_IN_OUT?1.5:1)),null==a&&(a=0),i._hx_index){case 0:return function(i){return ei.easeIn(i,e,t,s,_,a)};case 1:return function(i){return ei.easeInOut(i,e,t,s,_,a)};case 2:return function(i){return ei.easeOut(i,e,t,s,_,a)};case 3:return function(i){return ei.easeOutIn(i,e,t,s,_,a)}}break;case 5:switch(i._hx_index){case 0:return function(i){return ti.easeIn(i,e,t,s)};case 1:return function(i){return ti.easeInOut(i,e,t,s)};case 2:return function(i){return ti.easeOut(i,e,t,s)};case 3:return function(i){return ti.easeOutIn(i,e,t,s)}}break;case 6:return function(i){return si.ease(i,e,t,s)};case 7:switch(i._hx_index){case 0:return function(i){return ii.easeIn(i,e,t,s)};case 1:return function(i){return ii.easeInOut(i,e,t,s)};case 2:return function(i){return ii.easeOut(i,e,t,s)};case 3:return function(i){return ii.easeOutIn(i,e,t,s)}}break;case 8:switch(i._hx_index){case 0:return function(i){return ni.easeIn(i,e,t,s)};case 1:return function(i){return ni.easeInOut(i,e,t,s)};case 2:return function(i){return ni.easeOut(i,e,t,s)};case 3:return function(i){return ni.easeOutIn(i,e,t,s)}}break;case 9:switch(i._hx_index){case 0:return function(i){return ri.easeIn(i,e,t,s)};case 1:return function(i){return ri.easeInOut(i,e,t,s)};case 2:return function(i){return ri.easeOut(i,e,t,s)};case 3:return function(i){return ri.easeOutIn(i,e,t,s)}}break;case 10:switch(i._hx_index){case 0:return function(i){return ai.easeIn(i,e,t,s)};case 1:return function(i){return ai.easeInOut(i,e,t,s)};case 2:return function(i){return ai.easeOut(i,e,t,s)};case 3:return function(i){return ai.easeOutIn(i,e,t,s)}}}};var Qs=function(e,t,s,i,n,r,a,_,o,h,l){null==a&&(a=0),null==r&&(r=1e3),null==n&&(n=0),this._updateCallback=t,this._startValue=s,this._endValue=i,this._startDelay=n,this._duration=r,this._endDelay=a,this._easeType=_,this._tweenType=o,this._completeCallback=h,this._isSnap=l,k.call(this,e),this._updater(),this._updates=0};s["tweezer.Tweezer"]=Qs,Qs.__name__="tweezer.Tweezer",Qs.__super__=k,Qs.prototype=r(k.prototype,{_init:function(){k.prototype._init.call(this),this._tweenFunction=Xs.createTweenFunction(this._startValue,this._endValue-this._startValue,this._duration,this._easeType,this._tweenType)},_updater:function(e){if(null==e&&(e=0),k.prototype._updater.call(this,e),null!=this._updateCallback){var t=this._tweenFunction(Math.min(Math.max(0,this._age-this._startDelay),this._duration));this._updateCallback(this._isSnap?Math.round(t):t)}this._age>=this._startDelay+this._duration+this._endDelay&&(null!=this._completeCallback&&this._completeCallback(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:Qs});var Js=function(){};s["tweezer.tweens.Back"]=Js,Js.__name__="tweezer.tweens.Back",Js.easeIn=function(e,t,s,i,n){return s*(e/=i)*e*((n+1)*e-n)+t},Js.easeOut=function(e,t,s,i,n){return s*((e=e/i-1)*e*((n+1)*e+n)+1)+t},Js.easeInOut=function(e,t,s,i,n){return(e/=i/2)<1?s/2*(e*e*((1+(n*=1.525))*e-n))+t:s/2*((e-=2)*e*((1+(n*=1.525))*e+n)+2)+t},Js.easeOutIn=function(e,t,s,i,n){return e<i/2?Js.easeOut(2*e,t,s/2,i,n):Js.easeIn(2*e-i,t+s/2,s/2,i,n)};var Zs=function(){};s["tweezer.tweens.Bounce"]=Zs,Zs.__name__="tweezer.tweens.Bounce",Zs.easeIn=function(e,t,s,i){return s-Zs.easeOut(i-e,0,s,i)+t},Zs.easeOut=function(e,t,s,i){return(e/=i)<.36363636363636365?s*(7.5625*e*e)+t:e<.7272727272727273?s*(7.5625*(e-=.5454545454545454)*e+.75)+t:e<.9090909090909091?s*(7.5625*(e-=.8181818181818182)*e+.9375)+t:s*(7.5625*(e-=.9545454545454546)*e+.984375)+t},Zs.easeInOut=function(e,t,s,i){return e<i/2?.5*Zs.easeIn(2*e,0,s,i)+t:.5*Zs.easeOut(2*e-i,0,s,i)+.5*s+t},Zs.easeOutIn=function(e,t,s,i){return e<i/2?Zs.easeOut(2*e,t,s/2,i):Zs.easeIn(2*e-i,t+s/2,s/2,i)};var qs=function(){};s["tweezer.tweens.Circular"]=qs,qs.__name__="tweezer.tweens.Circular",qs.easeIn=function(e,t,s,i){return-s*(Math.sqrt(1-(e/=i)*e)-1)+t},qs.easeOut=function(e,t,s,i){return e=e/i-1,s*Math.sqrt(1-e*e)+t},qs.easeInOut=function(e,t,s,i){return(e/=i/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},qs.easeOutIn=function(e,t,s,i){return e<i/2?qs.easeOut(2*e,t,s/2,i):qs.easeIn(2*e-i,t+s/2,s/2,i)};var $s=function(){};s["tweezer.tweens.Cubic"]=$s,$s.__name__="tweezer.tweens.Cubic",$s.easeIn=function(e,t,s,i){return s*(e/=i)*e*e+t},$s.easeOut=function(e,t,s,i){return s*((e=e/i-1)*e*e+1)+t},$s.easeInOut=function(e,t,s,i){return(e/=i/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},$s.easeOutIn=function(e,t,s,i){return e<i/2?$s.easeOut(2*e,t,s/2,i):$s.easeIn(2*e-i,t+s/2,s/2,i)};var ei=function(){};s["tweezer.tweens.Elastic"]=ei,ei.__name__="tweezer.tweens.Elastic",ei.easeIn=function(e,t,s,i,n,r){return 0==e?t:1==(e/=i)?t+s:(0==r||r<Math.abs(s)?(r=s,a=n/4):a=n/(2*Math.PI)*Math.asin(s/r),-r*Math.pow(2,10*--e)*Math.sin((e*i-a)*(2*Math.PI)/n)+t);var a},ei.easeOut=function(e,t,s,i,n,r){return 0==e?t:1==(e/=i)?t+s:(0==r||r<Math.abs(s)?(r=s,a=n/4):a=n/(2*Math.PI)*Math.asin(s/r),r*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/n)+s+t);var a},ei.easeInOut=function(e,t,s,i,n,r){return 0==e?t:2==(e/=i/2)?t+s:(0==r||r<Math.abs(s)?(r=s,a=n/4):a=n/(2*Math.PI)*Math.asin(s/r),e<1?r*Math.pow(2,10*--e)*Math.sin((e*i-a)*(2*Math.PI)/n)*-.5+t:r*Math.pow(2,-10*--e)*Math.sin((e*i-a)*(2*Math.PI)/n)*.5+s+t);var a},ei.easeOutIn=function(e,t,s,i,n,r){return e<i/2?ei.easeOut(2*e,t,s/2,i,n,r):ei.easeIn(2*e-i,t+s/2,s/2,i,n,r)};var ti=function(){};s["tweezer.tweens.Exponential"]=ti,ti.__name__="tweezer.tweens.Exponential",ti.easeIn=function(e,t,s,i){return 0==e?t:s*Math.pow(2,10*(e/i-1))+t-.001*s},ti.easeOut=function(e,t,s,i){return e==i?t+s:1.001*s*(1-Math.pow(2,-10*e/i))+t},ti.easeInOut=function(e,t,s,i){return 0==e?t:e==i?t+s:(e/=i/2)<1?s/2*Math.pow(2,10*(e-1))+t-5e-4*s:s/2*1.0005*(2-Math.pow(2,-10*--e))+t},ti.easeOutIn=function(e,t,s,i){return e<i/2?ti.easeOut(2*e,t,s/2,i):ti.easeIn(2*e-i,t+s/2,s/2,i)};var si=function(){};s["tweezer.tweens.Linear"]=si,si.__name__="tweezer.tweens.Linear",si.ease=function(e,t,s,i){return s*e/i+t};var ii=function(){};s["tweezer.tweens.Quadratic"]=ii,ii.__name__="tweezer.tweens.Quadratic",ii.easeIn=function(e,t,s,i){return s*(e/=i)*e+t},ii.easeOut=function(e,t,s,i){return-s*(e/=i)*(e-2)+t},ii.easeInOut=function(e,t,s,i){return(e/=i/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},ii.easeOutIn=function(e,t,s,i){return e<i/2?ii.easeOut(2*e,t,s/2,i):ii.easeIn(2*e-i,t+s/2,s/2,i)};var ni=function(){};s["tweezer.tweens.Quartic"]=ni,ni.__name__="tweezer.tweens.Quartic",ni.easeIn=function(e,t,s,i){return s*(e/=i)*e*e*e+t},ni.easeOut=function(e,t,s,i){return-s*((e=e/i-1)*e*e*e-1)+t},ni.easeInOut=function(e,t,s,i){return(e/=i/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},ni.easeOutIn=function(e,t,s,i){return e<i/2?ni.easeOut(2*e,t,s/2,i):ni.easeIn(2*e-i,t+s/2,s/2,i)};var ri=function(){};s["tweezer.tweens.Quintic"]=ri,ri.__name__="tweezer.tweens.Quintic",ri.easeIn=function(e,t,s,i){return s*(e/=i)*e*e*e*e+t},ri.easeOut=function(e,t,s,i){return s*((e=e/i-1)*e*e*e*e+1)+t},ri.easeInOut=function(e,t,s,i){return(e/=i/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},ri.easeOutIn=function(e,t,s,i){return e<i/2?ri.easeOut(2*e,t,s/2,i):ri.easeIn(2*e-i,t+s/2,s/2,i)};var ai=function(){};function _i(e){return e instanceof Array?new Fs(e):e.iterator()}function oi(t,s){return null==s?null:(null==s.__id__&&(s.__id__=e.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[s.__id__],null==i&&(i=s.bind(t),t.hx__closures__[s.__id__]=i),i);var i}s["tweezer.tweens.Sine"]=ai,ai.__name__="tweezer.tweens.Sine",ai.easeIn=function(e,t,s,i){return-s*Math.cos(e/i*(Math.PI/2))+s+t},ai.easeOut=function(e,t,s,i){return s*Math.sin(e/i*(Math.PI/2))+t},ai.easeInOut=function(e,t,s,i){return-s/2*(Math.cos(Math.PI*e/i)-1)+t},ai.easeOutIn=function(e,t,s,i){return e<i/2?ai.easeOut(2*e,t,s/2,i):ai.easeIn(2*e-i,t+s/2,s/2,i)},e.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(_.now=performance.now.bind(performance)),s.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.prototype.__class__=s.String=String,String.__name__="String",s.Array=Array,Array.__name__="Array",Date.prototype.__class__=s.Date=Date,Date.__name__="Date";var hi,li={},ci={},ui=Number,di=Boolean,pi={},gi={};ws.content=[{name:"revision",data:"MTY1DQoyMDIwLzA4LzI1IDA4OjQyOjE5DQo"},{name:"config",data:"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxkYXRhPg0KCTxzZXR0aW5ncz4NCgkJPGFzc2V0cz4NCgkJCTxwYWNrYWdlcyBkZWZhdWx0PSJhc3NldHMiIGF1ZGlvPSJhc3NldHMuYXVkaW8iIC8+DQoJCTwvYXNzZXRzPg0KCQk8Zm9udCBuYW1lPSJyb2JvdG8td2ViZm9udCIgLz4NCgkJPGFzY2lpQXJ0Pg0KICBfX19fX19fXyAgX19fICAgXyAgX19fX18gICAgX19fICBfX18gIF9fX19fICBfXyAgX18gX19fX19fX19fICBfX19fIA0KIC8gX19fLyBfIFwvIF8gfCAvIHwvIC8gXyBcICAvIF8gXC8gXyBcLyAgXy8gfC9fLyAvIC8vIC8gX18vIF8gXC8gX18gXA0KLyAvICAvICwgXy8gX18gfC8gICAgLyAvLyAvIC8gX19fLyAsIF8vLyAvXykgICggIC8gXyAgLyBfLy8gLCBfLyAvXy8gLw0KXF9fXy9fL3xfL18vIHxfL18vfF8vX19fXy8gL18vICAvXy98Xy9fX18vXy98X3wgL18vL18vX19fL18vfF98XF9fX18vIA0KDQoJCTwvYXNjaWlBcnQ+DQoJCTx1cmxzPg0KCQkJPHdlYnNpdGU+aHR0cHM6Ly9iMTBiLmNvbTwvd2Vic2l0ZT4NCgkJCTxhdXRob3I+aHR0cHM6Ly9iMTBiLmNvbTwvYXV0aG9yPg0KCQk8L3VybHM+DQoJCTxnb29nbGVBbmFseXRpY3MgaWQ9IlVBLTIyNDA2MzM3LTEyIiBlbmFibGVkPSJmYWxzZSIgLz4NCgkJPGF1ZGlvSG9sZERlbGF5PjUwMDA8L2F1ZGlvSG9sZERlbGF5Pg0KCQk8ZGlzYWJsZUV5ZUNhbmR5PmZhbHNlPC9kaXNhYmxlRXllQ2FuZHk+DQoJCTxkaXNhYmxlRGV2aWNlTW90aW9uPmZhbHNlPC9kaXNhYmxlRGV2aWNlTW90aW9uPg0KCQk8b3JpZW50YXRpb25BcHByb3hpbWF0aW9uPmZhbHNlPC9vcmllbnRhdGlvbkFwcHJveGltYXRpb24+DQoJCTxzdGFydGluZ0xldmVsPjA8L3N0YXJ0aW5nTGV2ZWw+DQoJPC9zZXR0aW5ncz4NCgk8Z3VpPg0KCQk8YXVkaW9Ib2xkTWVzc2FnZT5QUkVTUyBUTyBDT05USU5VRTwvYXVkaW9Ib2xkTWVzc2FnZT4NCgkJPGJ1dHRvbnM+DQoJCQk8d2Vic2l0ZT5Nb3JlIGdhbWVzPC93ZWJzaXRlPg0KCQkJPGluc3RydWN0aW9ucz5Ib3cgdG8gcGxheTwvaW5zdHJ1Y3Rpb25zPg0KCQkJPHBsYXk+UGxheSBub3c8L3BsYXk+DQoJCQk8c2VsZWN0TGV2ZWw+U3RhcnQgcmFjZTwvc2VsZWN0TGV2ZWw+DQoJCQk8cmVwbGF5PlBsYXkgYWdhaW48L3JlcGxheT4NCgkJCTxjb250aW51ZT5Db250aW51ZSBnYW1lPC9jb250aW51ZT4NCgkJCTxmaW5pc2hlZD5HYW1lIG92ZXI8L2ZpbmlzaGVkPg0KCQkJPHJlc2V0PlJlc2V0IGdhbWU8L3Jlc2V0Pg0KCQkJPGJ1eT5CdXk8L2J1eT4NCgkJCTxjb3VudGRvd24+QXV0byBzdGFydDwvY291bnRkb3duPg0KCQkJPHVucGF1c2U+UmVzdW1lPC91bnBhdXNlPg0KCQkJPGF1ZGlvT24+U291bmQgT248L2F1ZGlvT24+DQoJCQk8YXVkaW9PZmY+U291bmQgT2ZmPC9hdWRpb09mZj4NCgkJCTxmdWxsU2NyZWVuT24+RnVsbCBzY3JlZW48L2Z1bGxTY3JlZW5Pbj4NCgkJCTxmdWxsU2NyZWVuT2ZmPkV4aXQgZnVsbCBzY3JlZW48L2Z1bGxTY3JlZW5PZmY+DQoJCQk8YmFjaz5RdWl0IGdhbWU8L2JhY2s+DQoJCQk8dGVzdE1vZGU+DQoJCQkJPGZpbmlzaD5GaW5pc2g8L2ZpbmlzaD4NCgkJCQk8c2tpcD5Ta2lwPC9za2lwPg0KCQkJPC90ZXN0TW9kZT4NCgkJPC9idXR0b25zPg0KCQk8bG9jYXRpb25zPg0KCQkJPGEgYWx0PSJJdGFsaWFuIj5JdGFseTwvYT4NCgkJCTxiIGFsdD0iQnJpdGlzaCI+QnJpdGFpbjwvYj4NCgkJCTxjIGFsdD0iSmFwYW5lc2UiPkphcGFuPC9jPg0KCQkJPGQgYWx0PSJNb25hY28iPk1vbmFjbzwvZD4NCgkJPC9sb2NhdGlvbnM+DQoJCTx1cGdyYWRlcz4NCgkJCTxzcGVlZD5Ub3Agc3BlZWQ8L3NwZWVkPg0KCQkJPHN0ZWVyaW5nPkdyaXA8L3N0ZWVyaW5nPg0KCQkJPGFjY2VsZXJhdGlvbj5BY2NlbGVyYXRpb248L2FjY2VsZXJhdGlvbj4NCgkJCTxib29zdD5Cb29zdDwvYm9vc3Q+DQoJCTwvdXBncmFkZXM+DQoJCTxyYW5rPg0KCQkJPGdvb2Q+RXhjZWxsZW50LCB5b3UgYXJlIHRoZSBHcmFuZCBQcml4IEhlcm8hPC9nb29kPg0KCQkJPG9rICA+V2VsbCBkb25lLCB5b3UgYXJlIG9uIHRoZSBwb2RpdW0hPC9vaz4NCgkJCTxwb29yPkJldHRlciBsdWNrIG5leHQgdGltZSwgdXBncmFkZSB5b3VyIGNhciE8L3Bvb3I+DQoJCTwvcmFuaz4NCgkJPHNjZW5lcz4NCgkJCTxpbnN0cnVjdGlvbnM+DQoJCQkJPHRpdGxlPkhvdyB0byBwbGF5PC90aXRsZT4NCgkJCQk8bWVzc2FnZT48IVtDREFUQVtDb21wZXRlIGFjcm9zcyA0IHJhY2VzIGluIHRoZSBHcmFuZCBQcml4IFNlcmllcy48YnIvPjxici8+RG9kZ2UgdHJhZmZpYywgYm9vc3QsIGNvbGxlY3QgY29pbnMgYW5kIHVwZ3JhZGUgeW91ciBjYXIgZm9yIHRoZSBuZXh0IHJhY2UuPGJyLz48YnIvPkFyZSB5b3UgdGhlIEdyYW5kIFByaXggSGVybz9dXT48L21lc3NhZ2U+DQoJCQk8L2luc3RydWN0aW9ucz4NCgkJCTxzZWxlY3RMZXZlbD4NCgkJCQk8dGl0bGU+UmFjZSBfX1hfXyBvZiA0PC90aXRsZT4NCgkJCQk8YWx0VGl0bGU+R3JhbmQgUHJpeDwvYWx0VGl0bGU+DQoJCQk8L3NlbGVjdExldmVsPg0KCQkJPGludGVyc3RpdGlhbD4NCgkJCQk8dG90YWw+VG90YWwgcG9pbnRzPC90b3RhbD4NCgkJCQk8cGVyc29uYWxCZXN0PlBlcnNvbmFsIGJlc3Q8L3BlcnNvbmFsQmVzdD4NCgkJCTwvaW50ZXJzdGl0aWFsPg0KCQkJPHJlc3VsdHM+DQoJCQkJPHRpdGxlPlJhY2UgX19YX18gb2YgNCBjb21wbGV0ZTwvdGl0bGU+DQoJCQkJPHRhYmxlPg0KCQkJCQk8bG9jYXRpb24+UmFjZTwvbG9jYXRpb24+DQoJCQkJCTxwb3NpdGlvbj5Qb3NpdGlvbjwvcG9zaXRpb24+DQoJCQkJCTxwb2ludHM+UG9pbnRzPC9wb2ludHM+DQoJCQkJCTx0b3RhbD5Ub3RhbCBwb2ludHM8L3RvdGFsPg0KCQkJCQk8cGVyc29uYWxCZXN0PlBlcnNvbmFsIGJlc3Q8L3BlcnNvbmFsQmVzdD4NCgkJCQk8L3RhYmxlPg0KCQkJCTxtZXNzYWdlPllvdSBjb21wbGV0ZWQgdGhlIHJhY2UgaW4gX19TQ09SRV9fIHBvc2l0aW9uIGFuZCBzY29yZWQgX19QT0lOVFNfXyBwb2ludHMuPC9tZXNzYWdlPg0KCQkJPC9yZXN1bHRzPg0KCQkJPHNob3A+DQoJCQkJPHRpdGxlPlVwZ3JhZGUgeW91ciBjYXI8L3RpdGxlPg0KCQkJCTxtYXhlZD5NYXhlZDwvbWF4ZWQ+DQoJCQkJPGluc3VmZmljaWVudD5FYXJuIEZ1bmRzPC9pbnN1ZmZpY2llbnQ+DQoJCQk8L3Nob3A+DQoJCTwvc2NlbmVzPg0KCTwvZ3VpPg0KPC9kYXRhPg0K"}],Os.count=0,zs.__toStr={}.toString,f.Element=0,f.PCData=1,f.CData=2,f.Comment=3,f.DocType=4,f.ProcessingInstruction=5,f.Document=6,vs.USE_CACHE=!1,vs.USE_ENUM_INDEX=!1,vs.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",bs.DEFAULT_RESOLVER=new xs,bs.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Ts.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ts.BYTES=Cs.ofString(Ts.CHARS),Hs.escapes=((hi=new Bs).h.lt="<",hi.h.gt=">",hi.h.amp="&",hi.h.quot='"',hi.h.apos="'",hi),pt.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);